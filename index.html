<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>å˜èªå¡¾(ä»®) å˜èª4æŠï¼ˆCSV/å¾©ç¿’/å‘¨å›/çµæœ/éŸ³å£°/åˆ‡æ›¿ï¼‰</title>
  <meta name="theme-color" content="#0b1020"/>
  <link rel="manifest" href="manifest.json">
  <style>
    :root { --bg:#0b1020; --card:#121a33; --text:#e8eeff; --muted:#a9b3d6; --good:#38d996; --bad:#ff5c7a; }
/* ã¾ãšå®‰å…¨ãªé«˜ã•åŸºæº–ã‚’ä½œã‚‹ */
:root { --vh: 1vh; }

/* ç”»é¢å…¨ä½“ã‚’ä½¿ã†æ‰€ã¯ 100vh ã§ã¯ãªãã“ã‚Œ */
.appHeight{
  /* ç”»é¢é«˜ã®åŸºæº–ã¯ min-height ã ã‘ã«ã—ã¦ã€å†…å®¹ãŒå¢—ãˆãŸã‚‰è‡ªç„¶ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ */
  min-height: calc(var(--vh) * 100);
}
html, body{ height:auto; }


    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", sans-serif;
      background:radial-gradient(1200px 800px at 20% 0%, #1b2a66 0%, var(--bg) 55%); color:var(--text); }
    .wrap { max-width: 1020px; margin: 0 auto; padding: 20px; }
    .row { display:flex; gap:12px; flex-wrap:wrap; align-items:flex-start; justify-content:space-between; }
    .card { background: rgba(18,26,51,.88); border:1px solid rgba(255,255,255,.08); border-radius: 18px;
      box-shadow: 0 12px 30px rgba(0,0,0,.25); padding: 16px; }
    h1 { font-size: 18px; margin:0 0 10px; color: #dbe6ff; letter-spacing: .02em; }
    .hud { display:flex; gap:12px; flex-wrap:wrap; }
    .pill { background: rgba(255,255,255,.07); border:1px solid rgba(255,255,255,.08);
      padding: 10px 12px; border-radius: 14px; font-size: 13px; color: var(--muted); }
    .pill b { color: var(--text); }
    .big { font-size: 28px; font-weight: 800; letter-spacing: .02em; }
    .small { color: var(--muted); font-size: 13px; }
    .question { display:grid; gap:10px; }
    .qtop { display:flex; gap:10px; align-items:baseline; justify-content:space-between; }

    /* â‘¡ é•·æ–‡ã§ã‚‚è¦‹ã‚„ã™ãï¼šæŠ˜ã‚Šè¿”ã— + è‡ªå‹•ç¸®å°ç”¨ */
    #prompt {
      line-height: 1.18;
      word-break: break-word;
      overflow-wrap: anywhere;
    }
    .fit {
      font-size: clamp(18px, 3.3vw, 28px);
    }

    .progress { height: 10px; background: rgba(255,255,255,.08); border-radius: 99px; overflow:hidden;
      border:1px solid rgba(255,255,255,.08); }
    .bar { height:100%; width:100%; background: linear-gradient(90deg, rgba(56,217,150,.95), rgba(95,169,255,.9));
      transform-origin:left; }

    .choices { display:grid; grid-template-columns: 1fr; gap:10px; margin-top: 10px; }
    @media (min-width: 680px) { .choices { grid-template-columns: 1fr 1fr; } }

    button.choice {
      background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.10); color: var(--text);
      border-radius: 16px; padding: 14px 14px; cursor:pointer; text-align:left;
      transition: transform .06s ease, background .2s ease, border-color .2s ease; user-select:none;
    }
    button.choice:hover { transform: translateY(-1px); background: rgba(255,255,255,.085); border-color: rgba(255,255,255,.16); }
    button.choice:active { transform: translateY(0px) scale(.99); }
    button.choice[disabled] { opacity:.72; cursor:not-allowed; }

    /* â‘¡ é¸æŠè‚¢ã‚‚é•·æ–‡å¯¾å¿œ */
    .choiceText {
      display:block;
      font-weight: 800;
      font-size: clamp(14px, 2.1vw, 16px);
      line-height: 1.22;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .flash {
  border-radius: 16px;
  padding: 10px 12px;
  font-size: 16px;
  display: none;

  /* ä¸Šå›ºå®šã‚’ã‚„ã‚ã¦ã€ä»¥å‰ã®å ´æ‰€ï¼ˆå•é¡Œã®è¿‘ãï¼‰ã«æˆ»ã™ */
  position: static;
  transform: none;

  /* ç”»é¢ã‹ã‚‰ã¯ã¿å‡ºã•ãªã„ */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  white-space: normal;
  overflow-wrap: anywhere;

  /* ä»¥å‰ã®å ´æ‰€ã£ã½ãï¼šé¸æŠè‚¢ã®ä¸Šã§è¦‹ã‚„ã™ã */
  margin: 10px 0 0 0;
}
    .flash.good { display:block; background: rgba(56,217,150,.14); border:1px solid rgba(56,217,150,.35); color:#bff7df; }
    .flash.bad  { display:block; background: rgba(255,92,122,.12); border:1px solid rgba(255,92,122,.35); color:#ffd2db; }

    .controls { display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; }
    .btn {
      background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); color: var(--text);
      border-radius: 14px; padding: 10px 12px; font-size: 13px; cursor:pointer;
    }
    .btn:hover { background: rgba(255,255,255,.10); }
    .btn.smallbtn { padding: 8px 10px; font-size: 12px; border-radius: 12px; }

    .settings { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    input[type="number"], select, input[type="file"], input[type="range"] {
      padding: 9px 10px; border-radius: 12px; border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18); color: var(--text); outline:none;
    }
    input[type="number"] { width: 90px; }

    .footer { opacity:.9; margin-top: 10px; }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10); padding: 2px 6px; border-radius: 8px; }
    .hint { opacity:.9; }
    .inline { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .spacer { height:12px; }
  
/* BIG flash message */
.flash{font-size:28px !important; line-height:1.2 !important; font-weight:800 !important; padding:14px 16px !important;}

    /* è¿½åŠ : è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ãƒãƒƒãƒ—ï¼ˆã‚¹ãƒãƒ›å‘ã‘ï¼‰ */
    .langchip{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(233,242,255,.92);
      padding:8px 10px;
      border-radius: 999px;
      font-weight: 800;
      cursor: pointer;
      user-select:none;
    }
    .langchip.on{
      border-color: rgba(47,209,132,.75);
      background: rgba(47,209,132,.18);
      color: rgba(233,242,255,.98);
    }

    /* è¿½åŠ : å…¨è§£é™¤ã®åå¿œã‚’åˆ†ã‹ã‚Šã‚„ã™ã */
    .langClearPulse{ transform: translateY(1px); filter: brightness(1.15); }

/* TTS HUD pill */
#ttsHudPill.free{ color:#cfd6ff; }
#ttsHudPill.active{ color:#38d996; }
#ttsHudPill.waiting{ color:#ff5c7a; }



/* ===== Mobile answer size (requested) ===== */
@media (max-width: 520px){
  .choices{ gap: 14px; }

  button.choice{
    padding: 22px 18px;
    border-radius: 18px;
  }

  /* Answer text size similar to your screenshot */
  .choiceText{
    font-size: clamp(26px, 6.5vw, 34px);
    line-height: 1.18;
    font-weight: 800;
    letter-spacing: .2px;
  }

  /* (1)(2)(3)(4) label */
  button.choice .small{
    font-size: 16px;
    opacity: .85;
  }
}


/* ===== Mobile layout tighten (HUD/Top area) ===== */
@media (max-width: 520px){
  h1{ margin-bottom: 6px; }
}


    /* Custom Deck layout (stacked like left screenshot) */

/* Custom Deck: left form + right list (like screenshot) */
#customDeckPanel .cd-layout{
  display:grid;
  grid-template-columns: 420px 1fr;
  gap: 14px;
  align-items:start;
}
#customDeckPanel .cd-left{ min-width: 260px; }
#customDeckPanel .cd-right{
  min-width: 0;
}
#customDeckPanel .cd-right .cardlike{
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.07);
  border-radius: 14px;
  padding: 10px;
}
#customDeckPanel .cd-right table{ width:100%; }
@media (max-width: 860px){
  #customDeckPanel .cd-layout{ grid-template-columns: 1fr; }
}
.cd-row{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:stretch;
}

.cd-field{
  width:100%;
  min-width:0;
}

.cd-field.small,
.cd-field.mid{ max-width:none; }

.cd-actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}

.cd-actions .btn.primary{ background:rgba(56,217,150,.18); border:1px solid rgba(56,217,150,.45); }
.cd-actions .btn.danger{ background:rgba(255,92,122,.12); border:1px solid rgba(255,92,122,.45); }
.cd-note{ font-size:12px; color:rgba(232,238,255,.75); }

@media (max-width: 520px){
  .cd-actions .btn{ width:100%; }
  .cd-actions .btn.half{ width:48%; }
}


</style>
</head>

<body class="appHeight">
  <div class="wrap">
    <div class="row">
      <div class="card" style="flex: 1 1 600px;">
        <div class="inline" style="justify-content:space-between;align-items:center;gap:10px;">
  <h1 style="margin:0;">å˜èªå¡¾(ä»®) å˜èª4æŠï¼ˆCSV/å¾©ç¿’/å‘¨å›/çµæœ/éŸ³å£°/åˆ‡æ›¿ï¼‰</h1>
  <button class="btn smallbtn" type="button" id="openHelp">ï¼Ÿ ä½¿ã„æ–¹</button>
</div>

        <div class="hud">
          <div class="pill">ã‚¹ã‚³ã‚¢: <b id="score">0</b></div>
          <div class="pill">ã‚³ãƒ³ãƒœ: <b id="combo">0</b></div>
          <div class="pill">æ­£è§£ç‡: <b id="acc">0%</b></div>
          <div class="pill">æ®‹ã‚Š: <b id="remaining">0</b></div>
        
          <div class="pill" id="ttsHudPill">ğŸ™ éŸ³å£°: æœªä½¿ç”¨</div>
<button class="btn smallbtn" type="button" id="clearTtsLock">ğŸ”“ éŸ³å£°ãƒ­ãƒƒã‚¯è§£é™¤</button>


<div class="pill">CSV: <b id="csvHud">å†…è”µãƒ‡ãƒ¼ã‚¿</b></div>
<div class="pill">ä»Šæ—¥: <b id="dailyHud">0å• 0%</b> <span id="streakHud" class="small" style="margin-left:6px;">ğŸ”¥0</span></div>
        </div>

        <div class="spacer"></div>

        <div class="question">
          <!-- çµæœãƒ‘ãƒãƒ« -->
          <div id="resultPanel" class="card" style="display:none;margin-top:12px;">
            <div class="inline" style="justify-content:flex-start;align-items:center;gap:10px;flex-wrap:wrap;">
              <h1>çµæœï¼ˆé–“é•ãˆãŸé †ï¼‰</h1>
              <button class="btn smallbtn" type="button" id="closeResultTop">é–‰ã˜ã‚‹</button>
            </div>
            <div class="small" id="resultSummary"></div>
            <div class="settings" style="margin-top:8px;">
              <span class="small">è¡¨ç¤º: å‡ºé¡Œå›æ•°</span>
              <select id="resultMinSeen">
                <option value="1">1å›ä»¥ä¸Šï¼ˆå…¨éƒ¨ï¼‰</option>
                <option value="3">3å›ä»¥ä¸Š</option>
                <option value="5" selected>5å›ä»¥ä¸Š</option>
              </select>
              <button class="btn" id="autoPickWeakFromResults">ã“ã®æ¡ä»¶ã§è‹¦æ‰‹ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆ</button>
            </div>
            <div style="height:10px"></div>
            <div id="resultTable" class="small" style="overflow:auto;"></div>
            <div style="height:10px"></div>
            <button class="btn" type="button" id="closeResult">é–‰ã˜ã‚‹</button>
          </div>

          <div class="qtop">
            <div>
              <div class="inline">
                <div class="small" id="modeLabel">æ—¥æœ¬èª â†’ è‹±èªï¼ˆ4æŠï¼‰</div>
                <button class="btn smallbtn" type="button" id="speak">ğŸ”Š ç™ºéŸ³</button>
</div>
              <div class="big fit" id="prompt">---</div>
              <div class="small hint" id="ttsHint"></div>
            </div>
            <div style="text-align:right">
              <div class="small">åˆ¶é™æ™‚é–“</div>
              <div class="big"><span id="time">0.0</span>s</div>
            </div>
          </div>

          <div class="progress">
            <div class="bar" id="bar"></div>
          </div>

          <div id="flash" class="flash"></div>
          <div class="choices" id="choices"></div>

          <div class="controls">
            <button class="btn" type="button" id="skip">ã‚¹ã‚­ãƒƒãƒ—ï¼ˆå¾©ç¿’ã«å›ã™ï¼‰</button>
            <button class="btn" type="button" id="restart">ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button class="btn" type="button" id="showResultsBtn">çµæœã‚’è¦‹ã‚‹</button>
            <button class="btn" type="button" id="pauseBtn">â¸ ä¸€æ™‚åœæ­¢</button>
          </div>

          <div class="footer small">
            ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ:
            <span class="kbd">1</span>ã€œ<span class="kbd">4</span>ã§é¸æŠ /
            <span class="kbd">S</span>ã§ã‚¹ã‚­ãƒƒãƒ— /
            <span class="kbd">R</span>ã§ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ /
            <span class="kbd">P</span>ã§ç™ºéŸ³
          </div>
        </div>
      </div>

      <div class="card" style="flex: 1 1 360px;">
        <h1>è¨­å®š</h1>

        <div class="spacer"></div>

        <div class="card" style="background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08);">
          <h1 style="font-size:16px;margin:0 0 8px;">ğŸ“… å­¦ç¿’ãƒ­ã‚°ï¼ˆã“ã®CSVï¼‰</h1>
          <div class="small" id="dailySummaryLine">ä»Šæ—¥: --</div>
          <div class="small" id="streakLine" style="margin-top:4px;">é€£ç¶š: --</div>
          <div class="inline" style="margin-top:10px; gap:8px; flex-wrap:wrap;">
            <button class="btn smallbtn" type="button" id="toggleDailyPanel">å±¥æ­´ã‚’è¦‹ã‚‹</button>
            <button class="btn smallbtn" type="button" id="resetToday">ä»Šæ—¥ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <div id="dailyPanel" class="card" style="display:none; margin-top:10px; padding:12px;">
            <div class="small" style="opacity:.92; margin-bottom:6px;">ç›´è¿‘ã®å±¥æ­´ï¼ˆæœ€å¤§30æ—¥ï¼‰</div>
            <div id="dailyHistory" class="small" style="max-height:220px; overflow:auto;"></div>
          </div>
          <div class="small" style="opacity:.8; margin-top:8px;">
            â€»ã“ã®ãƒ­ã‚°ã¯ã€Œã“ã®CSVã ã‘ã€ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆä»–CSVã¨ã¯åˆ¥ï¼‰<br/>
            â€»ã€Œä»Šæ—¥ã‚’ãƒªã‚»ãƒƒãƒˆã€ã¯ã“ã®CSVã®â€œä»Šæ—¥åˆ†â€ã ã‘0ã«ã—ã¾ã™
          </div>
        </div>


        <!-- â‘¢ æ–¹å‘åˆ‡æ›¿ -->
        <div class="settings">
          <label class="small">å‡ºé¡Œæ–¹å‘</label>
          <select id="direction">
            <option value="ja2en">æ—¥æœ¬èª â†’ è‹±èª</option>
            <option value="en2ja">è‹±èª â†’ æ—¥æœ¬èª</option>
          </select>
        </div>

        <div class="spacer"></div>


        <div class="card" style="background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08);">
          <h1 style="font-size:16px;margin:0 0 8px;">âœï¸ è‡ªä½œå˜èªå¸³</h1>
          <div class="small" style="opacity:.92;">
            ã“ã®ã‚¢ãƒ—ãƒªã ã‘ã§å˜èªã‚’è¿½åŠ ãƒ»ç·¨é›†ã§ãã¾ã™ï¼ˆç«¯æœ«å†…ã«ä¿å­˜ï¼‰ã€‚
          </div>
          <div class="inline" style="margin-top:10px; gap:8px; flex-wrap:wrap;">
<button class="btn smallbtn" type="button" id="openCustomDeck">è‡ªä½œå˜èªå¸³ã‚’é–‹ã</button>
            <button class="btn smallbtn" type="button" id="useCustomDeckQuick">è‡ªä½œå˜èªå¸³ã‚’ä½¿ã†</button>
          </div>
          <div class="small" style="margin-top:8px; opacity:.85;"
            ><span class="small" style="opacity:.75;">v68</span> â€¢ <span id="customDeckHint" style="margin-top:8px; opacity:.85;"></span></div>
        </div>



        <div class="settings">
          <label class="small">1å•ã®æ™‚é–“ï¼ˆç§’ï¼‰</label>
          <input id="secondsPerQ" type="number" min="1" max="30" step="0.5" value="6" />
        </div>

        <div class="spacer"></div>

        <div class="settings">
          <label class="small">å‡ºé¡Œã™ã‚‹è¨€èªï¼ˆlangãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼‰</label>
          <div class="small" style="opacity:.9; margin-bottom:6px;">
            CSVã« <span class="kbd">lang</span> åˆ—ã‚’å…¥ã‚Œã‚‹ã¨ã€ã“ã“ã§è¨€èªã‚’é¸ã‚“ã åˆ†ã ã‘å‡ºé¡Œã—ã¾ã™ï¼ˆæ··ã–ã‚Šé˜²æ­¢ï¼‰ã€‚
          </div>
          <select id="langFilter" multiple style="display:none;"></select>
<div id="langChips" style="display:flex;flex-wrap:wrap;gap:8px;"></div>
          <div class="inline" style="gap:8px; margin-top:8px; flex-wrap:wrap;">
            <button class="btn smallbtn" type="button" id="langAll">å…¨é¸æŠ</button>
            <button class="btn smallbtn" type="button" id="langClear">å…¨è§£é™¤</button>
          </div>

          <div class="inline" style="gap:8px; margin-top:8px; flex-wrap:wrap; align-items:center;">
            <span class="small" style="opacity:.9;">ğŸ™ éŸ³å£°ãƒ¢ãƒ¼ãƒ‰</span>
            <select id="voiceMode" class="smallbtn" style="padding:8px 10px;">
              <option value="auto">è‡ªå‹•ï¼ˆãŠã™ã™ã‚ï¼‰</option>
              <option value="local">ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿</option>
              <option value="online">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ã¿</option>
            </select>
            <span class="small" style="opacity:.75;">â€»ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã¯ãƒãƒƒãƒˆå¿…é ˆ</span>
          </div>
          <div class="small" id="langFilterStatus" style="opacity:.9; margin-top:6px;">è¨€èª: ã™ã¹ã¦</div>
        </div>
        <div class="spacer"></div>

        <div class="settings">
          <label class="small">å‘¨å›æ•°</label>
          <select id="rounds">
            <option value="1">1å‘¨</option>
            <option value="2">2å‘¨</option>
            <option value="3">3å‘¨</option>
            <option value="5">5å‘¨</option>
            <option value="10">10å‘¨</option>
            <option value="inf">âˆï¼ˆçµ‚ã‚ã‚‰ãªã„ï¼‰</option>
          </select>
        </div>

        <div class="spacer"></div>

        <div class="settings">
          <label class="small">å¾©ç¿’ã®ã—ã¤ã“ã•ï¼ˆâˆç”¨ï¼‰</label>
          <input id="reviewWeight" type="number" min="1" max="10" step="1" value="5" />
        </div>

        <div class="spacer"></div>

        <div class="settings">
          <label class="small">ãƒ‡ãƒƒã‚­</label>
          <select id="deckSelect">
            <option value="all">å…¨éƒ¨</option>
            <option value="1">Deck1</option>
            <option value="2">Deck2</option>
            <option value="3">Deck3</option>
            <option value="12">Deck1+Deck2</option>
            <option value="23">Deck2+Deck3</option>
          </select>
          <div class="small" style="margin-top:6px;line-height:1.3;">
            â€»Deck1=Lv1ã€Deck2=Lv2ã€Deck3=Lv3ã€‚<b>å…¨éƒ¨</b>ã¯Lvã§çµã‚Šè¾¼ã¿ã¾ã›ã‚“ï¼ˆLv4/5ã‚‚å«ã‚€ï¼‰ã€‚
          </div>
          <div class="small" style="margin-top:10px;">å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰</div>
            <select id="quizMode" style="width:100%;margin-top:6px;">
              <option value="single">å˜ç‹¬ï¼ˆã„ã¾ã®å˜èªå¸³ã ã‘ï¼‰</option>
              <option value="mix">ãƒŸãƒƒã‚¯ã‚¹ï¼ˆå†…è”µãƒ‡ãƒ¼ã‚¿ï¼‹ã„ã¾ã®å˜èªå¸³ï¼‰</option>
            </select>
            <div class="small" style="opacity:.8;margin-top:6px;">â€»å˜èªãŒ4ã¤æœªæº€ã§ã‚‚ã€ãƒŸãƒƒã‚¯ã‚¹ãªã‚‰å‡ºé¡Œã§ãã‚‹å ´åˆãŒã‚ã‚Šã¾ã™</div>

        </div>
        <div class="small" id="deckStatus" style="margin-top:8px;opacity:.9;"></div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.10);margin:12px 0;">

        <h1 style="font-size:16px;margin:0 0 8px;">å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰</h1>

        <div class="settings">
          <label class="small">å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰</label>
          <select id="reviewMode">
            <option value="off">OFF</option>
            <option value="on">ONï¼ˆé¸ã‚“ã èªã‚’ãƒ«ãƒ¼ãƒ—ï¼‰</option>
          </select>
        </div>

        <div class="spacer"></div>

        <div class="settings">
          <label class="small">å¾©ç¿’èªæ•°</label>
          <input id="reviewCount" type="number" min="4" max="50" step="1" value="10" />
        </div>

        <div class="spacer"></div>

      <div class="settings">
  <button class="btn" type="button" id="pickReview">å¾©ç¿’èªã‚’é¸ã¶ï¼ˆãƒã‚§ãƒƒã‚¯ï¼‰</button>
  <button class="btn" type="button" id="autoPickWeak">è‹¦æ‰‹ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆ</button>
  <button class="btn" type="button" id="autoPickWeakGlobal">å…¨CSVã‹ã‚‰è‹¦æ‰‹ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆ</button>
  <button class="btn" type="button" id="openGlobalWeak">ç·åˆ è‹¦æ‰‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°</button>
  <button class="btn" type="button" id="clearReview">å¾©ç¿’ã‚’ã‚¯ãƒªã‚¢</button>
            <button class="btn" type="button" id="resetStats">ãƒ©ãƒ³ã‚­ãƒ³ã‚°åˆæœŸåŒ–</button>
</div>

<div class="settings" style="margin-top:10px;">
  <label class="small">è‹¦æ‰‹åˆ¤å®šï¼ˆæ­£è§£ç‡% æœªæº€ï¼‰</label>
  <input id="weakThreshold" type="number" min="0" max="100" step="1" value="30" />
</div>
  







        <div class="small" id="reviewStatus" style="margin-top:8px;opacity:.9;"></div>

        <div id="reviewPanel" class="card" style="display:none;margin-top:10px;padding:12px;">
          <div class="small" style="margin-bottom:8px;">å¾©ç¿’ã—ãŸã„å˜èªã«ãƒã‚§ãƒƒã‚¯ï¼ˆæœ€å¤§ <span id="reviewMax">10</span>ï¼‰</div>
          <div id="reviewList" style="max-height:220px;overflow:auto;"></div>
          <div style="height:10px"></div>
          <button class="btn" type="button" id="saveReview">ä¿å­˜ã—ã¦é–‰ã˜ã‚‹</button>
        </div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.10);margin:12px 0;">

        <h1 style="font-size:16px;margin:0 0 8px;">éŸ³å£°ï¼ˆTTSï¼‰</h1>

        <!-- â‘  æ­£è§£æ™‚ã®è‡ªå‹•ç™ºéŸ³ -->
        <div class="settings">
          <label class="small">è‹±â†’æ—¥ï¼ˆå•é¡Œè¡¨ç¤ºæ™‚ï¼‰ã«è‡ªå‹•ç™ºéŸ³</label>
          <select id="autoSpeak">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </div>

        <div class="spacer"></div>

        <div class="settings">
          <label class="small">å£°ï¼ˆè‡ªå‹•é¸æŠï¼‰</label>
          <select id="voiceSelect"></select>
        </div>

        <div class="spacer"></div>

        <div class="settings">
          <label class="small">é€Ÿã•</label>
          <input id="rate" type="range" min="0.7" max="1.2" step="0.05" value="1.0" />
          <span class="small" id="rateLabel">1.00</span>
        </div>

        <div class="spacer"></div>

        <div class="settings">
          <label class="small">éŸ³é‡</label>
          <input id="volume" type="range" min="0" max="1" step="0.05" value="1.0" />
          <span class="small" id="volLabel">1.00</span>
        </div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.10);margin:12px 0;">

        <div class="settings">
          <label class="small">CSVã‚’èª­ã¿è¾¼ã¿</label>
          <input id="csvFile" type="file" accept=".csv,text/csv" />
          <button class="btn smallbtn" type="button" id="forgetLastCsv">ğŸ§¹ å‰å›CSVã‚’å¿˜ã‚Œã‚‹</button>
          <div class="small" id="lastCsvStatus" style="margin-top:6px;opacity:.85;"></div>
        </div>
        <div class="small" id="csvStatus" style="margin-top:8px;opacity:.9;"></div>

        <div style="margin-top:10px" class="small">
          CSVå½¢å¼: <span class="kbd">en,ja,level</span><br/>
          en = è‹±èª / ja = æ—¥æœ¬èª / level = 1ã€œ3ï¼ˆä»»æ„ï¼‰
        </div>
      </div>
    </div>
  </div>
        <!-- CSVä¸Šæ›¸ãæ™‚ï¼šæˆç¸¾ã®å¼•ãç¶™ãé¸æŠï¼ˆãƒãƒƒã‚·ãƒ¥ãŒå¤‰ã‚ã£ãŸã¨ãï¼‰ -->
        <div id="overwritePanel" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.55); padding:18px; z-index:9999; overflow:auto;">
          <div class="card" style="max-width:760px;margin:0 auto;">
            <h1 style="font-size:16px;margin:0 0 8px;">CSVãŒæ›´æ–°ã•ã‚ŒãŸã¿ãŸã„</h1>
            <div class="small" id="overwriteInfo" style="opacity:.92;"></div>
            <div class="spacer"></div>

            <div class="small" style="opacity:.9;">
              ã©ã®æˆç¸¾ã‚’ä½¿ã†ï¼Ÿï¼ˆã‚ã¨ã§ç®¡ç†ç”»é¢ã§åˆ‡æ›¿ã‚‚ã§ãã‚‹ã‚ˆã†ã«æ‹¡å¼µå¯èƒ½ï¼‰
            </div>
            <div class="spacer"></div>

            <div class="inline">
              <button class="btn" id="btnInheritAll">å¼•ãç¶™ãï¼ˆå…¨éƒ¨ï¼‰</button>
              <button class="btn" id="btnMergeCommon">éƒ¨åˆ†ãƒãƒ¼ã‚¸ï¼ˆå…±é€šå˜èªã ã‘ï¼‰</button>
              <button class="btn" id="btnResetNew">ãƒªã‚»ãƒƒãƒˆï¼ˆæ–°ã—ãé–‹å§‹ï¼‰</button>
              <button class="btn smallbtn" id="btnCancelLoad">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>

            <div class="spacer"></div>
            <div class="small" style="opacity:.85;">
              â€»ã€Œå¼•ãç¶™ãã€ã¯å‰ã®æˆç¸¾ã‚’ãã®ã¾ã¾æ–°CSVã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚<br/>
              â€»ã€Œéƒ¨åˆ†ãƒãƒ¼ã‚¸ã€ã¯æ–°CSVã«å­˜åœ¨ã™ã‚‹å˜èªã ã‘æˆç¸¾ã‚’æŒã£ã¦ãã¾ã™ï¼ˆå¤ã„å˜èªã¯æ¨ã¦ã‚‹ï¼‰ã€‚<br/>
              â€»ã€Œãƒªã‚»ãƒƒãƒˆã€ã¯æ–°CSVã®æˆç¸¾ã‚’0ã‹ã‚‰å§‹ã‚ã¾ã™ï¼ˆå¤ã„æˆç¸¾ã¯æ®‹ã‚‹ã®ã§ã€å¾Œã§æˆ»ã™ã“ã¨ã‚‚å¯èƒ½ï¼‰ã€‚
            </div>
          </div>
        
        </div>

<!-- ç·åˆ è‹¦æ‰‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå…¨CSVæ¨ªæ–­ï¼‰ -->
        <div id="globalWeakPanel" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.55); padding:18px; z-index:9999; overflow:auto;">
          <div class="card" style="max-width:900px;margin:0 auto;">
            <div class="inline" style="justify-content:space-between;align-items:center;">
              <h1 style="font-size:16px;margin:0;">ç·åˆ è‹¦æ‰‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå…¨CSVæ¨ªæ–­ï¼‰</h1>
              <button class="btn smallbtn" type="button" id="closeGlobalWeak">é–‰ã˜ã‚‹</button>
            </div>
            <div class="small" style="opacity:.9;margin-top:6px;">
              â€»å˜èªã‚­ãƒ¼ã¯ <span class="kbd">en||ja||level</span> ã§åˆç®—ï¼ˆåŒã˜å˜èªã¯å…¨éƒ¨ã¾ã¨ã‚ã‚‹ï¼‰
            </div>

            <div class="spacer"></div>

            <div class="settings">
              <label class="small">é›†è¨ˆæ¡ä»¶ï¼ˆå‡ºé¡Œå›æ•°ãŒã“ã‚Œæœªæº€ã¯é™¤å¤–ï¼‰</label>
              <input id="globalMinSeen" type="number" min="1" max="9999" step="1" value="5" />
            </div>

            <div class="spacer"></div>

            <div class="settings">
              <label class="small">è‹¦æ‰‹åˆ¤å®šï¼ˆæ­£è§£ç‡% æœªæº€ï¼‰</label>
              <input id="globalWeakThreshold" type="number" min="0" max="100" step="1" value="30" />
            </div>

            <div class="spacer"></div>

            <div class="settings">
              <button class="btn" type="button" id="refreshGlobalWeak">ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ›´æ–°</button>
              <button class="btn" type="button" id="applyGlobalWeakToReview">ã“ã®æ¡ä»¶ã§å…¨CSVè‹¦æ‰‹ã‚’å¾©ç¿’ã‚»ãƒƒãƒˆã«ã™ã‚‹</button>
              <button class="btn" type="button" id="loadGlobalReview">ä¿å­˜ã—ãŸç·åˆå¾©ç¿’ã‚’èª­ã¿è¾¼ã‚€</button>
            </div>
            <div id="globalFlash" class="flash" style="display:none; margin-top:10px;"></div>


            <div class="small" id="globalWeakInfo" style="margin-top:8px;opacity:.9;"></div>
            <div style="height:10px"></div>

            <div id="globalWeakList" style="max-height:420px;overflow:auto;"></div>
          </div>
        </div>


<script>
  // =============================
  // Auto Lv (1ã€œ5) by CEFR-J Vocabulary Profile
  // Source: openlanguageprofiles/olp-en-cefrj (CEFR-J Vocabulary Profile ver 1.5)
  // Terms of use: research & commercial OK with proper citation; copyright: Tono Laboratory, TUFS.
  const __CEFRJ_DICT_NAME = "CEFR-J VP 1.5";
  const __OXFORD_DICT_NAME = "Oxford 3000/5000 by CEFR (PDF)";
  const __OXFORD_LV = {"a, an":1,"about":1,"above":1,"across":1,"action":1,"activity":1,"actor":1,"actress":1,"add":1,"address":4,"adult":2,"advice":1,"afraid":1,"after":2,"afternoon":1,"again":1,"age":3,"ago":1,"agree":1,"air":1,"airport":1,"all":2,"also":1,"always":1,"amazing":1,"and":1,"angry":1,"animal":1,"another":1,"answer":1,"any":2,"anyone":1,"anything":1,"apartment":1,"apple":1,"april":1,"area":1,"arm":5,"around":1,"arrive":1,"art":1,"article":1,"artist":1,"as":2,"ask":1,"at":1,"august":1,"aunt":1,"autumn":1,"away":1,"baby":1,"back":4,"bad":1,"bag":1,"ball":1,"banana":1,"band":1,"bank (money)":1,"bank":3,"bath":1,"bathroom":1,"be":1,"beach":1,"beautiful":1,"because":1,"become":1,"bed":1,"bedroom":1,"beer":1,"before":2,"begin":1,"beginning":1,"behind":1,"believe":1,"below":1,"best":2,"better":3,"between":2,"bicycle":1,"big":1,"bike":1,"bill":4,"bird":1,"birthday":1,"black":1,"blog":1,"blonde":1,"blue":1,"boat":1,"body":1,"book":2,"boot":1,"bored":1,"boring":1,"born":1,"both":1,"bottle":1,"box":1,"boy":1,"boyfriend":1,"bread":1,"break":1,"breakfast":1,"bring":1,"brother":1,"brown":1,"build":1,"building":1,"bus":1,"business":1,"busy":1,"but":4,"butter":1,"buy":1,"by":3,"bye":1,"cafe":1,"cake":1,"call":1,"camera":1,"can":2,"can1":1,"cannot":1,"capital":1,"car":1,"card":1,"career":1,"carrot":1,"carry":1,"cat":1,"cd":1,"cent":1,"centre":3,"century":1,"chair":4,"change":1,"chart":4,"cheap":3,"check":2,"cheese":1,"chicken":1,"child":1,"chocolate":1,"choose":1,"cinema":1,"city":1,"class":1,"classroom":1,"clean":1,"climb":3,"clock":1,"close":4,"close1":4,"clothes":1,"club":1,"coat":1,"coffee":1,"cold":1,"college":1,"colour":1,"come":1,"common":1,"company":1,"compare":1,"complete":1,"computer":1,"concert":1,"conversation":1,"cook":2,"cooking":1,"cool":3,"correct":1,"cost":1,"could":1,"country":1,"course":1,"cousin":1,"cow":1,"cream":3,"create":1,"culture":1,"cup":1,"customer":1,"cut":3,"dad":1,"dance":1,"dancer":1,"dancing":1,"dangerous":1,"dark":2,"date":4,"daughter":1,"day":1,"dear":2,"december":1,"decide":1,"delicious":1,"describe":1,"description":1,"design":1,"desk":1,"detail":4,"dialogue":1,"dictionary":1,"die":1,"diet":1,"difference":1,"different":1,"difficult":1,"dinner":1,"dirty":1,"discuss":1,"dish":1,"do":1,"do1":1,"doctor":1,"dog":1,"dollar":1,"door":1,"down":1,"downstairs":2,"draw":1,"dress":1,"drink":1,"drive":2,"driver":1,"during":1,"dvd":1,"each":1,"ear":1,"early":1,"east":1,"easy":1,"eat":1,"egg":1,"eight":1,"eighteen":1,"eighty":1,"elephant":1,"eleven":1,"else":1,"email":1,"end":1,"enjoy":1,"enough":1,"euro":1,"even":4,"evening":1,"event":1,"ever":1,"every":1,"everybody":1,"everyone":1,"everything":1,"exam":1,"example":1,"excited":1,"exciting":1,"exercise":1,"expensive":1,"explain":1,"extra":3,"eye":1,"face":3,"fact":1,"fall":2,"false":1,"family":1,"famous":1,"fantastic":1,"far":3,"farm":2,"farmer":1,"fast":1,"fat":2,"father":1,"favourite":1,"february":1,"feel":4,"feeling":1,"festival":1,"few":1,"fifteen":1,"fifth":1,"fifty":1,"fill":1,"film":2,"final":2,"find":1,"fine":5,"finish":2,"fire":3,"first":2,"fish":2,"five":1,"flat":2,"flight":1,"floor":1,"flower":1,"fly":2,"follow":1,"food":1,"foot":1,"football":1,"for":1,"forget":1,"form":1,"forty":1,"four":1,"fourteen":1,"fourth":1,"free":4,"friday":1,"friend":1,"friendly":1,"from":1,"front":1,"fruit":1,"full":1,"fun":2,"funny":1,"future":2,"game":1,"garden":1,"geography":1,"get":1,"girl":1,"girlfriend":1,"give":1,"glass":1,"go":3,"good":2,"goodbye":1,"grandfather":1,"grandmother":1,"grandparent":1,"great":1,"green":1,"grey":1,"group":1,"grow":1,"guess":1,"guitar":1,"gym":1,"hair":1,"half":2,"hand":3,"happen":1,"happy":1,"hard":1,"hat":1,"hate":3,"have":2,"have to":1,"he":1,"head":3,"health":1,"healthy":1,"hear":1,"hello":1,"help":1,"her":1,"here":1,"hey":1,"hi":1,"high":4,"him":1,"his":2,"history":1,"hobby":1,"holiday":1,"home":2,"homework":1,"hope":2,"horse":1,"hospital":1,"hot":1,"hotel":1,"hour":1,"house":4,"how":1,"however":1,"hundred":1,"hungry":1,"husband":1,"i":1,"ice":1,"ice cream":1,"idea":1,"if":1,"imagine":1,"important":1,"improve":1,"in":1,"include":1,"information":1,"interest":1,"interested":1,"interesting":1,"internet":1,"interview":1,"into":1,"introduce":1,"island":1,"it":3,"its":1,"jacket":1,"january":1,"jeans":1,"job":1,"join":1,"journey":1,"juice":1,"july":1,"june":1,"just":5,"keep":1,"key":3,"kilometre":1,"kind":3,"kind (type)":1,"kitchen":1,"know":1,"land":2,"language":1,"large":1,"last1":2,"last":2,"last1 (final)":2,"late":1,"later":2,"laugh":1,"learn":1,"leave":4,"left":1,"leg":1,"lesson":1,"let":1,"letter":1,"library":1,"lie":3,"lie1":1,"life":1,"light (from the sun/a lamp)":2,"light":2,"like (similar)":1,"like":3,"like (find sb/sth pleasant)":3,"line":4,"lion":1,"list":1,"listen":1,"little":2,"live":3,"live1":1,"local":3,"long":1,"long1":1,"look":2,"lose":1,"lot":1,"love":1,"lunch":1,"machine":1,"magazine":1,"main":1,"make":4,"man":1,"many":1,"map":4,"march":5,"market":3,"married":1,"match (contest/correspond)":1,"match":1,"may":2,"maybe":1,"me":1,"meal":1,"mean":1,"meaning":1,"meat":1,"meet":1,"meeting":1,"member":1,"menu":1,"message":1,"metre":1,"midnight":1,"mile":1,"milk":1,"million":1,"minute1":1,"minute":5,"miss":1,"mistake":4,"model":4,"modern":1,"moment":1,"monday":1,"money":1,"month":1,"more":1,"morning":1,"most":1,"mother":1,"mountain":1,"mouse":1,"mouth":1,"move":3,"movie":1,"much":1,"mum":1,"museum":1,"music":1,"must":1,"my":1,"name":1,"natural":1,"near":1,"need":3,"negative":4,"neighbour":1,"never":1,"new":1,"news":1,"newspaper":1,"next":3,"next to":1,"nice":1,"night":1,"nine":1,"nineteen":1,"ninety":1,"no":1,"no one":1,"nobody":1,"north":1,"nose":1,"not":1,"note":3,"nothing":1,"november":1,"now":3,"number":2,"nurse":1,"object":4,"o'clock":1,"october":1,"of":1,"off":1,"office":1,"often":1,"oh":1,"ok":1,"old":1,"on":1,"once":3,"one":1,"onion":1,"online":1,"only":1,"open":1,"opinion":1,"opposite":1,"or":1,"orange":1,"order":1,"other":1,"our":1,"out":1,"outside":2,"over":1,"own":2,"page":1,"paint":1,"painting":1,"pair":1,"paper":1,"paragraph":1,"parent":1,"park":1,"part":1,"partner":1,"party":1,"passport":1,"past":2,"pay":2,"pen":1,"pencil":1,"people":1,"pepper":1,"perfect":1,"period":1,"person":1,"personal":1,"phone":1,"photo":1,"photograph":2,"phrase":1,"piano":1,"picture":4,"piece":1,"pig":1,"pink":1,"place":3,"plan":1,"plane":1,"plant":2,"play":1,"player":1,"please":2,"point":3,"police":1,"policeman":1,"pool":1,"poor":1,"popular":1,"positive":4,"possible":1,"post":1,"potato":1,"pound":1,"practice":1,"practise":1,"prefer":1,"prepare":1,"present":2,"pretty":1,"price":4,"probably":1,"problem":1,"product":1,"programme":1,"project":4,"purple":1,"put":1,"quarter":1,"question":2,"quick":1,"quickly":1,"quiet":1,"quite":1,"radio":1,"rain":1,"read":1,"reader":1,"reading":1,"ready":1,"real":1,"really":1,"reason":1,"red":1,"relax":1,"remember":1,"repeat":3,"report":2,"restaurant":1,"result":3,"return":1,"rice":1,"rich":1,"ride":2,"right":1,"river":1,"road":1,"room":1,"routine":4,"rule":3,"run":2,"sad":1,"salad":1,"salt":1,"same":1,"sandwich":1,"saturday":1,"say":5,"school":1,"science":1,"scientist":1,"sea":1,"second1":2,"second":2,"second1 (next after the first)":2,"second1 (unit of time)":1,"section":1,"see":1,"sell":1,"send":1,"sentence":4,"september":1,"seven":1,"seventeen":1,"seventy":1,"share":3,"she":1,"sheep":1,"shirt":1,"shoe":1,"shop":1,"shopping":1,"short":1,"should":1,"show":1,"shower":1,"sick":1,"similar":1,"sing":1,"singer":1,"sister":1,"sit":1,"situation":1,"six":1,"sixteen":1,"sixty":1,"skill":1,"skirt":1,"sleep":2,"slow":3,"small":1,"snake":1,"snow":1,"so":1,"some":1,"somebody":1,"someone":1,"something":1,"sometimes":1,"son":1,"song":1,"soon":1,"sorry":1,"sound":5,"soup":1,"south":1,"space":1,"speak":1,"special":1,"spell":5,"spelling":1,"spend":1,"sport":1,"spring":3,"stand":4,"star":2,"start":2,"statement":1,"station":1,"stay":2,"still":3,"stop":1,"story":1,"street":1,"strong":1,"student":1,"study":1,"style":1,"subject":4,"success":1,"sugar":1,"summer":1,"sun":1,"sunday":1,"supermarket":1,"sure":2,"sweater":1,"swim":3,"swimming":1,"table":1,"take":1,"talk":2,"tall":1,"taxi":1,"tea":1,"teach":1,"teacher":1,"team":1,"teenager":1,"telephone":1,"television":1,"tell":1,"ten":1,"tennis":1,"terrible":1,"test":1,"text":2,"than":1,"thank":1,"thanks":1,"that":3,"the":1,"theatre":1,"their":1,"them":1,"then":1,"there":1,"they":1,"thing":1,"think":1,"third":2,"thirsty":1,"thirteen":1,"thirty":1,"this":3,"thousand":1,"three":1,"through":1,"thursday":1,"ticket":1,"time":4,"tired":1,"title":4,"to":1,"today":1,"together":1,"toilet":1,"tomato":1,"tomorrow":1,"tonight":1,"too":1,"tooth":1,"topic":1,"tourist":1,"town":1,"traffic":1,"train":2,"travel":1,"tree":1,"trip":4,"trousers":1,"true":1,"try":4,"t-shirt":1,"tuesday":1,"turn":1,"tv":1,"twelve":1,"twenty":1,"twice":1,"two":1,"type":3,"umbrella":1,"uncle":1,"under":1,"understand":1,"university":1,"until":1,"up":1,"upstairs":2,"us":1,"use":2,"useful":1,"usually":1,"vacation":1,"vegetable":1,"very":4,"video":1,"village":1,"visit":1,"visitor":1,"wait":2,"waiter":1,"wake":1,"walk":1,"wall":1,"want":1,"warm":3,"wash":2,"watch":1,"water":3,"way":4,"we":1,"wear":1,"weather":1,"website":1,"wednesday":1,"week":1,"weekend":1,"welcome":2,"well":5,"west":1,"what":1,"when":1,"where":1,"which":1,"white":1,"who":1,"why":1,"wife":1,"will":3,"win":3,"window":1,"wine":1,"winter":1,"with":1,"without":1,"woman":1,"wonderful":1,"word":1,"work":1,"worker":1,"world":1,"would":1,"write":1,"writer":1,"writing":1,"wrong":4,"yeah":1,"year":1,"yellow":1,"yes":1,"yesterday":1,"you":1,"young":3,"your":1,"yourself":1,"ability":2,"able":2,"abroad":2,"accept":2,"accident":2,"according to":2,"achieve":2,"act":3,"active":2,"actually":2,"advantage":2,"adventure":2,"advertise":2,"advertisement":2,"advertising":2,"affect":2,"against":2,"ah":2,"airline":2,"alive":2,"all right":2,"allow":2,"almost":2,"alone":2,"along":2,"already":2,"alternative":3,"although":2,"among":2,"amount":4,"ancient":2,"ankle":2,"anybody":2,"any more":2,"anyway":2,"anywhere":2,"app":2,"appear":2,"appearance":2,"apply":2,"architect":2,"architecture":2,"argue":2,"argument":2,"army":2,"arrange":2,"arrangement":2,"asleep":2,"assistant":2,"athlete":2,"attack":2,"attend":2,"attention":2,"attractive":2,"audience":2,"author":2,"available":2,"average":3,"avoid":2,"award":3,"awful":2,"background":2,"badly":2,"bar":4,"baseball":2,"based":2,"basketball":2,"bean":2,"bear (animal)":2,"bear":4,"beat":4,"beef":2,"behave":2,"behaviour":2,"belong":2,"belt":2,"benefit":3,"billion":2,"bin":2,"biology":2,"birth":2,"biscuit":2,"bit":2,"blank":2,"blood":2,"blow":4,"board":3,"boil":2,"bone":2,"borrow":2,"boss":2,"bottom":2,"bowl":2,"brain":2,"bridge":2,"bright":2,"brilliant":2,"broken":2,"brush":2,"burn":4,"businessman":2,"button":2,"camp":2,"camping":2,"can2":2,"care":2,"careful":2,"carefully":2,"carpet":2,"cartoon":2,"case":2,"cash":2,"castle":2,"catch":4,"cause":2,"celebrate":2,"celebrity":2,"certain":2,"certainly":2,"chance":2,"character":2,"charity":2,"chat":2,"chef":2,"chemistry":2,"chip":2,"choice":2,"church":2,"cigarette":2,"circle":2,"classical":2,"clear":3,"clearly":2,"clever":2,"climate":2,"close2":3,"closed":2,"clothing":2,"cloud":2,"coach":3,"coast":2,"code":2,"colleague":2,"collect":2,"column":2,"comedy":2,"comfortable":2,"comment":3,"communicate":2,"community":2,"compete":2,"competition":2,"complain":2,"completely":2,"condition":2,"conference":2,"connect":2,"connected":2,"consider":2,"contain":2,"context":2,"continent":2,"continue":2,"control":2,"cooker":2,"copy":2,"corner":2,"correctly":2,"count":3,"couple":2,"cover":3,"crazy":2,"creative":2,"credit":4,"crime":2,"criminal":3,"cross":2,"crowd":2,"crowded":2,"cry":4,"cupboard":2,"curly":2,"cycle":2,"daily":3,"danger":2,"data":2,"dead":2,"deal":3,"death":2,"decision":2,"deep":3,"definitely":2,"degree":2,"dentist":2,"department":2,"depend":2,"desert":4,"designer":2,"destroy":2,"detective":2,"develop":2,"device":2,"diary":2,"differently":2,"digital":2,"direct":3,"direction":2,"director":2,"disagree":2,"disappear":2,"disaster":2,"discover":2,"discovery":2,"discussion":2,"disease":2,"distance":2,"divorced":2,"document":4,"double":3,"download":2,"drama":2,"drawing":2,"dream":2,"driving":5,"drop":3,"drug":2,"dry":2,"earn":2,"earth":2,"easily":2,"education":2,"effect":2,"either":2,"electric":2,"electrical":2,"electricity":2,"electronic":2,"employ":2,"employee":2,"employer":2,"empty":3,"ending":2,"energy":2,"engine":2,"engineer":2,"enormous":2,"enter":2,"environment":2,"equipment":2,"error":2,"especially":2,"essay":2,"everyday":2,"everywhere":2,"evidence":2,"exact":2,"exactly":2,"excellent":2,"except":3,"exist":2,"expect":2,"experience":3,"experiment":3,"expert":2,"explanation":2,"express":2,"expression":2,"extreme":4,"extremely":2,"factor":2,"factory":2,"fail":2,"fair":2,"fan":2,"farming":2,"fashion":2,"fear":3,"feature":3,"feed":4,"female":2,"fiction":2,"field":2,"fight":2,"figure":4,"finally":2,"finger":2,"firstly":2,"fishing":2,"fit":5,"fix":4,"flu":2,"flying":2,"focus":2,"following":4,"foreign":2,"forest":2,"fork":2,"formal":2,"fortunately":2,"forward":4,"fresh":2,"fridge":2,"frog":2,"furniture":2,"further":3,"gallery":2,"gap":2,"gas":2,"gate":2,"general":2,"gift":2,"goal":2,"god":2,"gold":2,"golf":2,"government":2,"grass":2,"greet":2,"ground":2,"guest":2,"guide":2,"gun":2,"guy":2,"habit":2,"hall":2,"happily":2,"headache":2,"heart":2,"heat":2,"heavy":2,"height":2,"helpful":2,"hero":2,"hers":2,"herself":2,"hide":2,"hill":2,"himself":2,"hit":2,"hockey":2,"hold":4,"hole":2,"huge":2,"human":2,"hurt":4,"ideal":4,"identify":2,"ill":2,"illness":2,"image":2,"immediately":2,"impossible":2,"included":2,"including":2,"increase":2,"incredible":2,"independent":2,"individual":2,"industry":2,"informal":2,"injury":2,"insect":2,"inside":2,"instead":2,"instruction":2,"instructor":2,"instrument":2,"intelligent":2,"international":2,"introduction":2,"invent":2,"invention":2,"invitation":2,"invite":2,"involve":2,"item":2,"itself":2,"jam":2,"jazz":2,"jewellery":2,"joke":2,"journalist":2,"jump":2,"kid":2,"kill":2,"king":2,"knee":2,"knife":2,"knock":3,"knowledge":2,"lab":2,"lady":2,"lake":2,"lamp":2,"laptop":2,"last1 (taking time)":2,"laughter":2,"law":2,"lawyer":2,"lazy":2,"lead1":3,"lead":3,"leader":2,"learning":2,"least":2,"lecture":2,"lemon":2,"lend":2,"less":2,"level":4,"lifestyle":2,"lift":2,"light (not heavy)":2,"likely":2,"link":2,"listener":2,"lock":2,"lorry":2,"lost":2,"loud":2,"loudly":2,"lovely":2,"low":4,"luck":2,"lucky":2,"mail":2,"major":2,"male":2,"manage":2,"manager":2,"manner":2,"mark":2,"marry":2,"material":4,"mathematics":2,"maths":2,"matter":2,"media":2,"medical":2,"medicine":2,"memory":2,"mention":3,"metal":2,"method":2,"middle":2,"might":2,"mind":2,"mine (belongs to me)":2,"mine":3,"mirror":2,"missing":2,"mobile":2,"monkey":2,"moon":2,"mostly":2,"motorcycle":2,"movement":2,"musical":3,"musician":2,"myself":2,"narrow":4,"national":4,"nature":2,"nearly":2,"necessary":2,"neck":2,"neither":3,"nervous":2,"network":2,"noise":2,"noisy":2,"none":2,"normal":3,"normally":2,"notice":2,"novel":5,"nowhere":2,"nut":2,"ocean":2,"offer":2,"officer":2,"oil":2,"onto":2,"opportunity":2,"option":2,"ordinary":2,"organization":2,"organize":2,"original":3,"ourselves":2,"oven":2,"owner":2,"pack":3,"pain":2,"painter":2,"palace":2,"pants":2,"parking":2,"particular":2,"pass":3,"passenger":2,"patient":4,"pattern":2,"peace":2,"penny":2,"per":2,"per cent":2,"perform":2,"perhaps":2,"permission":2,"personality":2,"pet":2,"petrol":2,"physical":2,"physics":2,"pick":4,"pilot":2,"planet":2,"plastic":2,"plate":2,"platform":2,"pleased":2,"pocket":2,"polite":2,"pollution":2,"pop":5,"population":2,"position":4,"possession":2,"possibility":2,"poster":2,"power":4,"predict":2,"president":2,"prevent":2,"print":4,"printer":2,"prison":2,"prize":2,"process":4,"produce":4,"professional":4,"professor":2,"profile":2,"program":3,"progress":4,"promise":2,"pronounce":2,"protect":2,"provide":2,"pub":2,"public":2,"publish":2,"pull":3,"purpose":2,"push":3,"quality":2,"quantity":2,"queen":2,"quietly":2,"race (competition)":2,"race":3,"railway":2,"raise":2,"rate":4,"rather":2,"reach":4,"react":2,"realize":2,"receive":2,"recent":2,"recently":2,"reception":2,"recipe":2,"recognize":2,"recommend":2,"record":2,"recording":2,"recycle":2,"reduce":2,"refer":2,"refuse1":2,"refuse":2,"region":2,"regular":2,"relationship":2,"remove":2,"repair":3,"replace":2,"reply":2,"reporter":2,"request":3,"research":2,"researcher":2,"respond":2,"response":2,"rest":2,"rest (remaining part)":2,"rest (sleep/relax)":2,"review":2,"ring":3,"ring1":2,"ring2":3,"rise":3,"rock":5,"rock (stone)":2,"rock (music)":2,"role":2,"roof":2,"round":4,"route":2,"rubbish":2,"rude":2,"runner":2,"running":2,"sadly":2,"safe":2,"sail":3,"sailing":2,"salary":2,"sale":2,"sauce":2,"save":2,"scared":2,"scary":2,"scene":2,"schedule":4,"score":2,"screen":4,"search":2,"season":2,"seat":4,"secondly":2,"secret":2,"secretary":2,"seem":2,"sense":4,"separate":3,"series":2,"serious":2,"serve":2,"service":2,"several":2,"shake":3,"shall":2,"shape":4,"sheet":2,"ship":4,"shoulder":2,"shout":2,"shut":2,"side":2,"sign":2,"silver":2,"simple":2,"since":3,"singing":2,"single":2,"sir":2,"site":2,"size":2,"ski":2,"skiing":2,"skin":2,"sky":2,"slowly":2,"smartphone":2,"smell":2,"smile":2,"smoke":2,"smoking":2,"soap":2,"soccer":2,"social":2,"society":2,"sock":2,"soft":2,"soldier":2,"solution":2,"solve":2,"somewhere":2,"sort":3,"source":2,"speaker":2,"specific":2,"speech":2,"speed":4,"spider":2,"spoon":2,"square":2,"stage":4,"stair":2,"stamp":2,"state":3,"steal":2,"step":4,"stomach":2,"stone":2,"store":3,"storm":2,"straight":2,"strange":2,"strategy":2,"stress":2,"structure":4,"stupid":2,"succeed":2,"successful":2,"such":2,"suddenly":2,"suggest":2,"suggestion":2,"suit":3,"support":2,"suppose":2,"surprise":2,"surprised":2,"surprising":2,"survey":4,"sweet":2,"symbol":2,"system":2,"tablet":2,"target":4,"task":2,"taste":2,"teaching":2,"technology":2,"teenage":2,"temperature":2,"term":4,"themselves":2,"thick":2,"thief":2,"thin":2,"thinking":2,"thought":2,"throw":2,"tidy":2,"tie":2,"tip":3,"tool":2,"top":5,"touch":3,"tour":3,"tourism":2,"towards":2,"towel":2,"tower":2,"toy":2,"track":4,"tradition":2,"traditional":2,"trainer":2,"training":2,"transport":3,"traveller":2,"trouble":4,"truck":2,"twin":2,"typical":2,"underground":2,"understanding":2,"unfortunately":2,"unhappy":2,"uniform":2,"unit":2,"united":2,"unusual":2,"used to":2,"user":2,"usual":2,"valley":2,"van":2,"variety":2,"vehicle":2,"view":3,"virus":2,"voice":2,"war":2,"washing":2,"wave":3,"weak":2,"web":2,"wedding":2,"weight":2,"wet":2,"wheel":2,"while":3,"whole":3,"whose":2,"wide":2,"wild":2,"wind":4,"wind1":2,"winner":2,"wish":2,"wood":2,"wooden":2,"working":2,"worried":2,"worry":3,"worse":4,"worst":4,"wow":2,"yet":4,"yours":2,"zero":2,"absolutely":3,"academic":4,"access":3,"accommodation":3,"account":4,"achievement":3,"ad":3,"addition":3,"admire":3,"admit":3,"advanced":3,"advise":3,"afford":3,"aged":3,"agent":3,"agreement":3,"ahead":3,"aim":3,"alarm":4,"album":3,"alcohol":3,"alcoholic":3,"amazed":3,"ambition":3,"ambitious":3,"analyse":3,"analysis":3,"announce":3,"announcement":3,"annoy":3,"annoyed":3,"annoying":3,"apart":3,"apologize":3,"application":3,"appointment":3,"appreciate":3,"approximately":3,"arrest":3,"arrival":3,"assignment":3,"assist":3,"atmosphere":3,"attach":3,"attitude":3,"attract":3,"attraction":3,"authority":3,"aware":3,"backwards":3,"bake":3,"balance":3,"ban":3,"bank (river)":3,"base":3,"basic":3,"basis":3,"battery":3,"battle":4,"beauty":3,"bee":3,"belief":3,"bell":3,"bend":3,"bite":3,"block":3,"bomb":3,"border":4,"bother":3,"branch":3,"brand":3,"brave":3,"breath":3,"breathe":3,"breathing":3,"bride":3,"bubble":3,"bury":3,"calm":3,"campaign":3,"campus":3,"candidate":3,"cap":3,"captain":3,"careless":3,"category":3,"ceiling":3,"celebration":3,"central":3,"ceremony":3,"chain":4,"challenge":4,"champion":3,"channel":3,"chapter":3,"charge":3,"cheat":3,"cheerful":3,"chemical":3,"chest":3,"childhood":3,"claim":3,"clause":3,"click":3,"client":3,"cloth":3,"clue":3,"coal":3,"coin":3,"collection":3,"coloured":3,"combine":3,"commercial":3,"commit":3,"communication":3,"comparison":3,"competitor":3,"competitive":3,"complaint":3,"complex":4,"concentrate":3,"conclude":3,"conclusion":3,"confident":3,"confirm":3,"confuse":3,"confused":3,"connection":3,"consequence":3,"consist":3,"consume":3,"consumer":3,"contact":3,"container":3,"content":5,"content1":3,"continuous":3,"contrast":3,"convenient":3,"convince":3,"costume":3,"cottage":3,"cotton":3,"countryside":3,"court":3,"covered":3,"cruel":3,"cultural":3,"currency":3,"current":4,"currently":3,"curtain":3,"custom":3,"damage":3,"decade":3,"decorate":3,"define":3,"definite":3,"definition":3,"deliver":3,"departure":3,"despite":3,"destination":3,"determine":3,"determined":3,"development":3,"diagram":3,"diamond":3,"difficulty":3,"directly":3,"dirt":3,"disadvantage":3,"disappointed":3,"disappointing":3,"discount":4,"dislike":3,"divide":4,"documentary":3,"donate":3,"doubt":3,"dressed":3,"drum":3,"drunk":3,"due":3,"dust":3,"duty":3,"earthquake":3,"eastern":3,"economic":3,"economy":3,"edge":3,"editor":3,"educate":3,"educated":3,"educational":3,"effective":3,"effectively":3,"effort":3,"election":3,"element":3,"embarrassed":3,"embarrassing":3,"emergency":3,"emotion":3,"employment":3,"encourage":3,"enemy":3,"engaged":3,"engineering":3,"entertain":3,"entertainment":3,"entrance":3,"entry":3,"environmental":3,"episode":3,"equal":4,"equally":3,"escape":3,"essential":3,"eventually":3,"examine":3,"exchange":3,"excitement":3,"exhibition":3,"expand":3,"expected":3,"expedition":3,"experienced":3,"explode":3,"explore":3,"explosion":3,"export":3,"fairly":3,"familiar":3,"fancy":3,"fascinating":3,"fashionable":3,"fasten":3,"favour":4,"fence":3,"fighting":3,"file":4,"financial":3,"fitness":3,"fixed":3,"flag":3,"flood":3,"flour":3,"flow":3,"fold":4,"folk":3,"force":3,"forever":3,"frame":3,"freeze":3,"frequently":3,"friendship":3,"frighten":3,"frightened":3,"frightening":3,"frozen":3,"fry":3,"fuel":4,"function":4,"fur":3,"garage":3,"gather":3,"generally":3,"generation":3,"generous":3,"gentle":3,"gentleman":3,"ghost":3,"giant":3,"glad":3,"global":3,"glove":3,"goods":3,"grade":4,"graduate":3,"grain":3,"grateful":3,"growth":3,"guard":3,"guilty":3,"hang":3,"happiness":3,"hardly":3,"headline":3,"heating":3,"heavily":3,"helicopter":3,"highlight":3,"highly":3,"hire":4,"historic":3,"historical":3,"honest":3,"horrible":3,"horror":3,"host":4,"hunt":4,"hurricane":3,"hurry":3,"identity":3,"ignore":3,"illegal":3,"imaginary":3,"immediate":3,"immigrant":3,"impact":3,"import":3,"importance":3,"impression":3,"impressive":3,"improvement":3,"incredibly":3,"indeed":3,"indicate":3,"indirect":3,"indoor":3,"indoors":3,"influence":3,"ingredient":3,"injure":3,"injured":3,"innocent":3,"intelligence":3,"intend":3,"intention":3,"invest":3,"investigate":3,"involved":3,"iron":3,"issue":4,"journal":3,"judge":3,"keen":3,"keyboard":3,"kick":3,"killing":3,"kind (caring)":3,"kiss":3,"label":3,"laboratory":3,"lack":3,"latest":4,"lay":3,"layer":3,"leading":3,"leaf":3,"leather":3,"legal":3,"leisure":3,"length":3,"lie2":3,"lie2 (tell a lie)":3,"limit":3,"lip":3,"liquid":3,"literature":3,"live2":3,"living":3,"locate":3,"located":3,"location":3,"lonely":3,"loss":3,"luxury":3,"mad":3,"magic":3,"mainly":3,"mall":3,"management":3,"marketing":3,"marriage":3,"meanwhile":3,"measure":3,"medium":4,"mental":3,"mess":3,"mild":3,"mine (hole in the ground)":3,"mix":3,"mixture":3,"mood":3,"mud":3,"murder":3,"muscle":3,"mystery":3,"nail":3,"narrative":3,"nation":3,"native":3,"naturally":3,"necessarily":3,"needle":3,"neighbourhood":3,"net":5,"nor":3,"northern":3,"nuclear":3,"obvious":3,"obviously":3,"occasion":3,"occur":3,"odd":3,"official":4,"old-fashioned":3,"operation":3,"organized":3,"organizer":3,"originally":3,"ought":3,"ours":3,"outdoor":3,"outdoors":3,"package":4,"painful":3,"pale":3,"pan":3,"participate":3,"particularly":3,"passion":3,"path":3,"payment":3,"peaceful":3,"percentage":3,"perfectly":3,"performance":3,"personally":3,"persuade":3,"photographer":3,"photography":3,"pin":3,"pipe":3,"planning":3,"pleasant":3,"pleasure":3,"plenty":3,"plot":4,"plus":4,"plus1":4,"poem":3,"poet":3,"poetry":3,"poison":3,"poisonous":3,"policy":3,"political":3,"politician":3,"politics":3,"port":3,"portrait":3,"possibly":3,"pot":3,"pour":3,"poverty":3,"powder":3,"powerful":3,"practical":3,"pray":3,"prayer":3,"prediction":3,"prepared":3,"presentation":3,"press":3,"pressure":3,"pretend":3,"previous":3,"previously":3,"priest":3,"primary":3,"prince":3,"princess":3,"printing":3,"prisoner":3,"private":3,"producer":3,"production":3,"profession":3,"profit":3,"promote":3,"proper":3,"properly":3,"property":3,"protest":3,"proud":3,"prove":3,"punish":3,"punishment":3,"qualification":3,"qualified":3,"qualify":3,"queue":3,"quit":3,"quotation":3,"quote":3,"race (people)":3,"racing":3,"range":4,"rare":3,"rarely":3,"reaction":3,"reality":3,"receipt":3,"recommendation":3,"reference":3,"reflect":3,"regularly":3,"reject":3,"relate":3,"related":3,"relation":3,"relative":3,"relaxed":3,"relaxing":3,"release":3,"reliable":3,"religion":3,"religious":3,"remain":3,"remind":3,"remote":3,"rent":3,"repeated":3,"represent":3,"require":3,"reservation":3,"resource":3,"respect":3,"responsibility":3,"responsible":3,"retire":3,"retired":3,"revise":3,"risk":3,"robot":3,"roll":3,"romantic":3,"rope":3,"rough":3,"row":3,"row1":3,"royal":3,"rugby":3,"safety":3,"sailor":3,"sample":4,"sand":3,"scan":3,"scientific":3,"script":3,"sculpture":3,"secondary":3,"security":3,"seed":3,"sensible":3,"seriously":3,"servant":3,"set (put)":3,"set":3,"set (group)":3,"setting":3,"sex":3,"sexual":3,"sharp":3,"shelf":3,"shell":3,"shift":4,"shine":3,"shiny":3,"shoot":5,"shy":3,"sight":3,"signal":3,"silent":3,"silly":3,"similarity":3,"similarly":3,"simply":3,"sink":3,"slice":3,"slightly":3,"smart":3,"smooth":3,"software":3,"soil":3,"solid":3,"southern":3,"specifically":3,"spending":3,"spicy":3,"spirit":3,"spoken":3,"spot":4,"spread":4,"stadium":3,"staff":3,"standard":3,"statistic":3,"statue":3,"stick (push into/attach)":3,"stick":3,"stick (piece of wood)":3,"stranger":3,"strength":3,"string":3,"strongly":3,"studio":3,"stuff":4,"substance":3,"successfully":3,"sudden":3,"suffer":3,"suitable":3,"summarize":3,"summary":3,"supply":3,"supporter":3,"surely":3,"surface":3,"survive":3,"switch":4,"symptom":3,"tail":3,"talent":3,"talented":3,"tape":3,"tax":3,"technical":3,"technique":3,"tend":3,"tent":3,"theirs":3,"theme":3,"theory":3,"therefore":3,"though":3,"throat":3,"throughout":3,"tight":3,"till":3,"tin":3,"tiny":3,"toe":3,"tongue":3,"total":5,"totally":3,"trade":3,"translate":3,"translation":3,"treat":3,"treatment":3,"trend":3,"trick":3,"truth":3,"tube":3,"typically":3,"tyre":3,"ugly":3,"unable":3,"uncomfortable":3,"underwear":3,"unemployed":3,"unemployment":3,"unfair":3,"union":3,"unless":3,"unlike":3,"unlikely":3,"unnecessary":3,"unpleasant":3,"update":3,"upon":3,"upset":3,"used":3,"used1":3,"used2":3,"valuable":3,"value":4,"various":3,"version":3,"victim":3,"viewer":3,"violent":3,"volunteer":3,"vote":3,"warn":3,"warning":3,"waste":3,"weapon":3,"weigh":3,"western":3,"whatever":3,"whenever":3,"whether":3,"wing":3,"within":3,"wonder":3,"wool":3,"worldwide":3,"worth":4,"written":3,"yard":3,"youth":3,"abandon":4,"absolute":4,"acceptable":4,"accompany":4,"accurate":4,"accuse":4,"acknowledge":4,"acquire":4,"actual":4,"adapt":4,"additional":4,"administration":4,"adopt":4,"advance":4,"affair":4,"afterwards":4,"agency":4,"agenda":4,"aggressive":4,"aid":4,"aircraft":4,"alter":4,"anger":4,"angle":4,"anniversary":4,"annual":4,"anxious":4,"apparent":4,"apparently":4,"appeal":4,"approach":4,"appropriate":4,"approval":4,"approve":4,"arise":4,"armed":4,"arms":4,"artificial":4,"artistic":4,"ashamed":4,"aspect":4,"assess":4,"assessment":4,"associate":4,"associated":4,"association":4,"assume":4,"attempt":4,"bacteria":4,"barrier":4,"basically":4,"bear (deal with)":4,"beg":4,"being":4,"bent":4,"bet":4,"beyond":4,"bitter":4,"blame":4,"blind":4,"bond":4,"breast":4,"brief":4,"broad":4,"broadcast":4,"budget":4,"bullet":4,"bunch":4,"bush":4,"cable":4,"calculate":4,"cancel":4,"cancer":4,"capable":4,"capacity":4,"capture":4,"cast":4,"cell":4,"chairman":4,"characteristic":4,"chief":4,"circumstance":4,"cite":4,"citizen":4,"civil":4,"classic":4,"closely":4,"collapse":4,"combination":4,"comfort":4,"command":4,"commission":4,"commitment":4,"committee":4,"commonly":4,"complicated":4,"component":4,"concentration":4,"concept":4,"concern":4,"concerned":4,"conduct":4,"confidence":4,"conflict":4,"confusing":4,"conscious":4,"conservative":4,"consideration":4,"consistent":4,"constant":4,"constantly":4,"construct":4,"construction":4,"contemporary":4,"contest":4,"contract":4,"contribute":4,"contribution":4,"convert":4,"convinced":4,"core":4,"corporate":4,"council":4,"county":4,"courage":4,"crash":4,"creation":4,"creature":4,"crew":4,"crisis":4,"criterion":4,"critic":4,"critical":4,"criticism":4,"criticize":4,"crop":4,"crucial":4,"cure":4,"curve":4,"curved":4,"debate":4,"debt":4,"decent":4,"declare":4,"decline":4,"decoration":4,"decrease":4,"deeply":4,"defeat":4,"defence":4,"defend":4,"delay":4,"deliberate":4,"deliberately":4,"delight":4,"delighted":4,"delivery":4,"demand":4,"demonstrate":4,"deny":4,"depressed":4,"depressing":4,"depth":4,"deserve":4,"desire":4,"desperate":4,"detailed":4,"detect":4,"dig":4,"disc":4,"discipline":4,"dishonest":4,"dismiss":4,"display":4,"distribute":4,"distribution":4,"district":4,"division":4,"domestic":4,"dominate":4,"downwards":4,"dozen":4,"draft":4,"drag":4,"dramatic":4,"edit":4,"edition":4,"efficient":4,"elderly":4,"elect":4,"elsewhere":4,"emerge":4,"emotional":4,"emphasis":4,"emphasize":4,"enable":4,"encounter":4,"engage":4,"enhance":4,"enquiry":4,"ensure":4,"enthusiasm":4,"enthusiastic":4,"entire":4,"entirely":4,"establish":4,"estate":4,"estimate":4,"ethical":4,"evaluate":4,"evil":4,"examination":4,"excuse":4,"executive":4,"existence":4,"expectation":4,"expense":4,"exploration":4,"expose":4,"extend":4,"extent":4,"external":4,"extraordinary":4,"facility":4,"failure":4,"faith":4,"fault":4,"feather":4,"fee":4,"feedback":4,"fellow":4,"finance":4,"finding":4,"firm":4,"flame":4,"flash":4,"flexible":4,"float":4,"folding":4,"forgive":4,"former":4,"fortune":4,"found":4,"freedom":4,"frequency":4,"fully":4,"fund":4,"fundamental":4,"funding":4,"furthermore":4,"gain":4,"gang":4,"generate":4,"genre":4,"govern":4,"grab":4,"gradually":4,"grand":4,"grant":4,"guarantee":4,"handle":4,"harm":4,"harmful":4,"hearing":4,"heaven":4,"heel":4,"hell":4,"hesitate":4,"hollow":4,"holy":4,"honour":4,"household":4,"housing":4,"humorous":4,"humour":4,"hunting":4,"illustrate":4,"illustration":4,"imagination":4,"impatient":4,"imply":4,"impose":4,"impress":4,"impressed":4,"inch":4,"incident":4,"income":4,"increasingly":4,"industrial":4,"infection":4,"inform":4,"initial":4,"initially":4,"initiative":4,"inner":4,"insight":4,"insist":4,"inspire":4,"install":4,"instance":4,"institute":4,"institution":4,"insurance":4,"intended":4,"intense":4,"internal":4,"interpret":4,"interrupt":4,"investigation":4,"investment":4,"joy":4,"judgement":4,"junior":4,"justice":4,"justify":4,"labour":4,"landscape":4,"largely":4,"launch":4,"leadership":4,"league":4,"lean":4,"licence":4,"limited":4,"lively":4,"load":4,"loan":4,"logical":4,"long-term":4,"loose":4,"lord":4,"lower":4,"lung":4,"maintain":4,"majority":4,"mass":4,"massive":4,"master":4,"matching":4,"maximum":4,"means":4,"measurement":4,"melt":4,"military":4,"mineral":4,"minimum":4,"minister":4,"minor":4,"minority":4,"mission":4,"mixed":4,"modify":4,"monitor":4,"moral":4,"motor":4,"mount":4,"multiple":4,"multiply":4,"mysterious":4,"neat":4,"nerve":4,"nevertheless":4,"nightmare":4,"notion":4,"numerous":4,"obey":4,"objective":4,"obligation":4,"observation":4,"observe":4,"obtain":4,"occasionally":4,"offence":4,"offend":4,"offensive":4,"opening":4,"operate":4,"opponent":4,"oppose":4,"opposed":4,"opposition":4,"organ":4,"origin":4,"otherwise":4,"outcome":4,"outer":4,"outline":4,"overall":4,"owe":4,"pace":4,"panel":4,"parliament":4,"participant":4,"partly":4,"passage":4,"pension1":4,"pension":4,"permanent":4,"permit":4,"perspective":4,"phase":4,"phenomenon":4,"philosophy":4,"pile":4,"pitch":4,"plain":4,"pointed":4,"popularity":4,"pose":4,"possess":4,"potential":4,"praise":4,"pregnant":4,"preparation":4,"presence":4,"preserve":4,"prime":4,"principle":4,"priority":4,"privacy":4,"procedure":4,"proof":4,"proposal":4,"propose":4,"prospect":4,"protection":4,"psychologist":4,"psychology":4,"publication":4,"pupil":4,"purchase":4,"pure":4,"pursue":4,"rank":4,"rapid":4,"rapidly":4,"raw":4,"realistic":4,"reasonable":4,"recall":4,"recover":4,"reduction":4,"regard":4,"regional":4,"register":4,"regret":4,"regulation":4,"relatively":4,"relevant":4,"relief":4,"rely":4,"remark":4,"representative":4,"reputation":4,"requirement":4,"rescue":4,"reserve":4,"resident":4,"resist":4,"resolve":4,"resort":4,"retain":4,"reveal":4,"revolution":4,"reward":4,"rhythm":4,"rid":4,"root":4,"rub":4,"rubber":4,"rural":4,"rush":4,"satellite":4,"satisfied":4,"satisfy":4,"saving":4,"scale":4,"scheme":4,"scream":4,"sector":4,"secure":4,"seek":4,"select":4,"selection":4,"self":4,"senior":4,"sensitive":4,"sequence":4,"session":4,"settle":4,"severe":4,"shade":4,"shadow":4,"shallow":4,"shame":4,"shelter":4,"shock":4,"shocked":4,"shooting":4,"shot":4,"significant":4,"significantly":4,"silence":4,"silk":4,"sincere":4,"slave":4,"slide":4,"slight":4,"slip":4,"slope":4,"solar":4,"somewhat":4,"soul":4,"specialist":4,"species":4,"spiritual":4,"split":4,"sponsor":4,"stable":4,"stare":4,"status":4,"steady":4,"steel":4,"steep":4,"sticky":4,"stiff":4,"stock":4,"stream":4,"stretch":4,"strict":4,"strike":4,"struggle":4,"submit":4,"sum":4,"surgery":4,"surround":4,"surrounding":4,"suspect":4,"swear":4,"sweep":4,"sympathy":4,"tale":4,"tank":4,"tear1":4,"tear":4,"tear2":4,"temporary":4,"therapy":4,"threat":4,"threaten":4,"thus":4,"tone":4,"tough":4,"transfer":4,"transform":4,"transition":4,"trial":4,"tropical":4,"truly":4,"trust":4,"tune":4,"tunnel":4,"ultimately":4,"unconscious":4,"unexpected":4,"unique":4,"universe":4,"unknown":4,"upper":4,"upwards":4,"urban":4,"urge":4,"vary":4,"vast":4,"venue":4,"via":4,"victory":4,"violence":4,"virtual":4,"vision":4,"visual":4,"vital":4,"vitamin":4,"volume":4,"wage":4,"weakness":4,"wealth":4,"wealthy":4,"whereas":4,"wherever":4,"whisper":4,"whom":4,"widely":4,"wildlife":4,"willing":4,"wind2":4,"wire":4,"wise":4,"witness":4,"wound":4,"wrap":4,"zone":4,"absorb":4,"abstract":4,"accent":4,"accidentally":4,"accommodate":4,"accomplish":4,"accountant":4,"accuracy":4,"accurately":4,"acid":5,"activate":4,"addiction":4,"additionally":4,"adequate":4,"adequately":4,"adjust":4,"affordable":4,"agriculture":4,"aids":4,"alien":5,"alongside":4,"altogether":4,"ambulance":4,"amusing":4,"analyst":4,"ancestor":4,"animation":4,"annually":4,"anticipate":4,"anxiety":4,"apology":4,"applicant":4,"appropriately":4,"arrow":4,"artwork":4,"aside":4,"asset":4,"assign":4,"assistance":4,"assumption":4,"assure":4,"astonishing":4,"attachment":4,"auction":4,"audio":4,"automatic":4,"automatically":4,"awareness":4,"awkward":4,"badge":4,"balanced":4,"ballet":4,"balloon":4,"barely":4,"bargain":4,"basement":4,"basket":4,"bat":5,"beneficial":4,"beside":4,"besides":4,"bias":4,"bid":4,"biological":4,"blanket":4,"bold":4,"bombing":4,"booking":4,"boost":4,"bound":4,"brick":4,"briefly":4,"broadcaster":4,"broadly":4,"bug":4,"cabin":4,"canal":4,"candle":4,"carbon":4,"casual":4,"cave":4,"certainty":4,"certificate":4,"challenging":4,"championship":4,"charming":4,"chase":4,"cheek":4,"cheer":4,"choir":4,"chop":4,"circuit":4,"civilization":4,"clarify":4,"classify":4,"clerk":4,"cliff":4,"clinic":4,"clip":4,"coincidence":4,"collector":4,"colony":4,"colourful":4,"comic":4,"commander":4,"comparative":4,"completion":4,"compose":4,"composer":4,"compound":4,"comprehensive":4,"comprise":4,"compulsory":4,"concrete":4,"confess":4,"confusion":4,"consequently":4,"conservation":4,"considerable":4,"considerably":4,"consistently":4,"conspiracy":4,"consult":4,"consultant":4,"consumption":4,"controversial":4,"controversy":4,"convenience":4,"convention":4,"conventional":4,"convey":4,"convincing":4,"cope":4,"corporation":4,"corridor":4,"counter":5,"counter (long flat surface)":4,"coverage":4,"crack":4,"craft":5,"creativity":4,"critically":4,"cruise":4,"cue":4,"curious":4,"curriculum":4,"cute":4,"dairy":4,"dare":4,"darkness":4,"database":4,"deadline":4,"deadly":4,"dealer":4,"deck":4,"defender":4,"delete":4,"democracy":4,"democratic":4,"demonstration":4,"depart":4,"dependent":4,"deposit":5,"depression":4,"derive":4,"desperately":4,"destruction":4,"determination":4,"devote":4,"differ":4,"disability":4,"disabled":4,"disagreement":4,"disappoint":4,"disappointment":4,"discourage":4,"disorder":4,"distant":4,"distinct":4,"distinguish":4,"distract":4,"disturb":4,"dive":4,"diverse":4,"diversity":4,"divorce":4,"dominant":4,"donation":4,"dot":4,"downtown":4,"dramatically":4,"drought":4,"dull":4,"dump":4,"duration":4,"dynamic":5,"economics":4,"economist":4,"editorial":4,"efficiently":4,"elbow":4,"electronics":4,"elegant":4,"elementary":4,"eliminate":4,"embrace":4,"emission":4,"emotionally":4,"empire":4,"enjoyable":4,"entertaining":4,"entrepreneur":4,"envelope":4,"equip":4,"equivalent":4,"era":4,"erupt":4,"essentially":4,"ethic":4,"ethnic":4,"evaluation":4,"evident":4,"evolution":4,"evolve":4,"exceed":4,"exception":4,"excessive":4,"exclude":4,"exhibit":4,"exit":5,"exotic":4,"expansion":4,"expertise":4,"exploit":4,"exposure":4,"extension":4,"extensive":4,"extensively":4,"extract":5,"fabric":4,"fabulous":4,"failed":4,"fake":4,"fame":4,"fantasy":4,"fare":4,"federal":4,"fever":4,"firefighter":4,"firework":4,"firmly":4,"flavour":4,"fond":4,"fool":4,"forbid":4,"forecast":4,"format":4,"formation":4,"formerly":4,"fortunate":4,"forum":4,"fossil":4,"foundation":4,"founder":4,"fraction":4,"fragment":4,"framework":4,"fraud":4,"freely":4,"frequent":4,"fulfil":4,"full-time":4,"fundamentally":4,"furious":4,"gaming":4,"gay":4,"gender":4,"gene":4,"genetic":4,"genius":4,"genuine":4,"genuinely":4,"gesture":4,"gig":4,"globalization":4,"globe":4,"golden":4,"goodness":4,"gorgeous":4,"governor":4,"graphic":4,"graphics":4,"greatly":4,"greenhouse":4,"grocery":4,"guideline":4,"habitat":4,"harbour":4,"headquarters":4,"heal":4,"healthcare":4,"helmet":4,"hence":4,"herb":4,"hidden":4,"highway":4,"hilarious":4,"hip":4,"historian":4,"homeless":4,"honesty":4,"hook":5,"hopefully":4,"hunger":4,"hypothesis":4,"icon":4,"id":4,"identical":4,"illusion":4,"immigration":4,"immune":4,"implement":4,"implication":4,"incentive":4,"incorporate":4,"incorrect":4,"independence":4,"index":4,"indication":4,"inevitable":4,"inevitably":4,"infer":4,"inflation":4,"info":4,"infrastructure":4,"inhabitant":4,"inherit":4,"ink":4,"innovation":4,"innovative":4,"input":4,"insert":4,"inspector":4,"installation":4,"instant":4,"instantly":4,"integrate":4,"intellectual":5,"interact":4,"interaction":4,"interpretation":4,"interval":4,"invade":4,"invasion":4,"investor":4,"isolate":4,"isolated":4,"jail":4,"jet":4,"joint":4,"journalism":4,"jury":4,"kit":4,"ladder":4,"landing":4,"lane":4,"lately":4,"leaflet":4,"legend":4,"lens":4,"lifetime":4,"lighting":4,"likewise":4,"limitation":4,"literally":4,"literary":4,"litre":4,"litter":4,"logo":4,"lottery":4,"loyal":4,"lyric":4,"magnificent":4,"make-up":4,"making":4,"manufacture":4,"manufacturing":4,"marathon":4,"margin":4,"marker":4,"martial":4,"mate":4,"mayor":4,"mechanic":4,"mechanical":4,"mechanism":4,"medal":4,"medication":4,"membership":4,"memorable":4,"metaphor":4,"miner":4,"miserable":4,"mode":4,"modest":4,"monster":4,"monthly":4,"monument":4,"moreover":4,"mortgage":4,"mosque":4,"motion":4,"motivate":4,"motivation":4,"moving":4,"myth":4,"naked":4,"nasty":4,"navigation":4,"nearby":4,"necessity":4,"negotiate":4,"negotiation":4,"neutral":4,"newly":4,"norm":4,"notebook":4,"novelist":4,"nowadays":4,"nursing":4,"nutrition":4,"obesity":4,"observer":4,"obstacle":4,"occupation":4,"occupy":4,"offender":4,"ongoing":4,"openly":4,"opera":4,"operator":4,"optimistic":4,"orchestra":4,"organic":4,"outfit":4,"output":4,"outstanding":4,"overcome":4,"overnight":4,"overseas":4,"ownership":4,"oxygen":4,"packet":4,"palm":4,"panic":4,"parade":4,"parallel":4,"participation":4,"partnership":4,"part-time":4,"passionate":4,"password":4,"patience":4,"pause":4,"peer":4,"penalty":4,"perceive":4,"perception":4,"permanently":4,"pill":4,"pity":4,"placement":4,"portion":4,"potentially":4,"precede":4,"precious":4,"precise":4,"precisely":4,"predictable":4,"preference":4,"pride":4,"primarily":4,"principal":5,"prior":4,"probability":4,"probable":4,"proceed":4,"programming":4,"progressive":4,"prohibit":4,"promising":4,"promotion":4,"prompt":4,"proportion":4,"protein":4,"protester":4,"psychological":4,"publicity":4,"publishing":4,"punk":4,"purely":4,"pursuit":4,"puzzle":4,"questionnaire":4,"racial":4,"racism":4,"racist":4,"radiation":4,"rail":4,"random":4,"rat":4,"rating":4,"reasonably":4,"rebuild":4,"receiver":4,"recession":4,"reckon":4,"recognition":4,"recovery":4,"recruit":4,"recruitment":4,"referee":4,"refugee":4,"registration":4,"regulate":4,"reinforce":4,"relieve":4,"relieved":4,"remarkable":4,"remarkably":4,"reporting":4,"resign":4,"resolution":4,"restore":4,"restrict":4,"restriction":4,"retail":4,"retirement":4,"revenue":4,"revision":4,"ridiculous":4,"risky":4,"rival":4,"rob":4,"robbery":4,"rocket":4,"romance":4,"rose":4,"roughly":4,"ruin":4,"satisfaction":4,"scandal":4,"scare":4,"scenario":4,"scholar":4,"scholarship":4,"scratch":4,"screening":4,"seeker":4,"seminar":4,"settler":4,"severely":4,"sexy":4,"shaped":4,"shocking":4,"shore":4,"shortage":4,"shortly":4,"short-term":4,"sibling":4,"signature":4,"significance":4,"skilled":4,"skull":4,"slogan":4,"so-called":4,"somehow":4,"sometime":4,"sophisticated":4,"spare":5,"specialize":4,"specify":4,"spectacular":4,"spectator":4,"speculate":4,"speculation":4,"spice":4,"spill":4,"spite":4,"spoil":4,"spokesman":4,"spokesperson":4,"spokeswoman":4,"sponsorship":4,"sporting":4,"stall":4,"stance":4,"starve":4,"steadily":4,"steam":4,"stimulate":4,"strengthen":4,"strictly":4,"stroke":4,"stunning":4,"subsequent":4,"subsequently":4,"suburb":4,"suffering":4,"sufficient":4,"sufficiently":4,"super":4,"surgeon":4,"survival":4,"survivor":4,"suspend":4,"sustainable":4,"swallow":4,"sympathetic":4,"tackle":5,"tag":4,"tap":4,"technological":4,"teens":4,"temple":4,"temporarily":4,"tendency":4,"tension":4,"terminal":5,"terms":4,"terribly":4,"terrify":4,"territory":4,"terror":4,"terrorism":4,"terrorist":4,"testing":4,"textbook":4,"theft":4,"therapist":4,"thesis":4,"thorough":4,"thoroughly":4,"thumb":4,"timing":4,"tissue":4,"ton":4,"tonne":4,"tournament":4,"trace":5,"trading":4,"tragedy":4,"tragic":4,"trait":4,"transmit":4,"transportation":4,"trap":4,"treasure":4,"tribe":4,"trigger":5,"trillion":4,"troop":4,"tsunami":4,"ultimate":4,"unacceptable":4,"uncertainty":4,"undergo":4,"undertake":4,"unfold":4,"unfortunate":4,"unite":4,"unity":4,"universal":4,"urgent":4,"usage":4,"useless":4,"valid":4,"variation":4,"vertical":4,"viewpoint":4,"visa":4,"visible":4,"voluntary":4,"voting":4,"wander":4,"warming":4,"weekly":4,"weird":4,"welfare":4,"wheat":4,"whoever":4,"widespread":4,"wisdom":4,"withdraw":4,"workforce":4,"workplace":4,"workshop":4,"worm":4,"wrist":4,"abolish":5,"abortion":5,"absence":5,"absent":5,"absurd":5,"abundance":5,"abuse":5,"academy":5,"accelerate":5,"acceptance":5,"accessible":5,"accomplishment":5,"accordance":5,"accordingly":5,"accountability":5,"accountable":5,"accumulate":5,"accumulation":5,"accusation":5,"accused":5,"acquisition":5,"acre":5,"activation":5,"activist":5,"acute":5,"adaptation":5,"adhere":5,"adjacent":5,"adjustment":5,"administer":5,"administrative":5,"administrator":5,"admission":5,"adolescent":5,"adoption":5,"adverse":5,"advocate":5,"aesthetic":5,"affection":5,"aftermath":5,"aggression":5,"agricultural":5,"aide":5,"albeit":5,"alert":5,"align":5,"alignment":5,"alike":5,"allegation":5,"allege":5,"allegedly":5,"alliance":5,"allocate":5,"allocation":5,"allowance":5,"ally":5,"aluminium":5,"amateur":5,"ambassador":5,"amend":5,"amendment":5,"amid":5,"analogy":5,"anchor":5,"angel":5,"anonymous":5,"apparatus":5,"appealing":5,"appetite":5,"applaud":5,"applicable":5,"appoint":5,"appreciation":5,"arbitrary":5,"architectural":5,"archive":5,"arena":5,"arguably":5,"array":5,"articulate":5,"ash":5,"aspiration":5,"aspire":5,"assassination":5,"assault":5,"assemble":5,"assembly":5,"assert":5,"assertion":5,"assurance":5,"asylum":5,"atrocity":5,"attain":5,"attendance":5,"attorney":5,"attribute":5,"audit":5,"authentic":5,"authorize":5,"auto":5,"autonomy":5,"availability":5,"await":5,"backdrop":5,"backing":5,"backup":5,"bail":5,"ballot":5,"banner":5,"bare":5,"barrel":5,"bass1":5,"bass":5,"battlefield":5,"bay":5,"beam":5,"beast":5,"behalf":5,"beloved":5,"bench":5,"benchmark":5,"beneath":5,"beneficiary":5,"betray":5,"bind":5,"biography":5,"bishop":5,"bizarre":5,"blade":5,"blast":5,"bleed":5,"blend":5,"bless":5,"blessing":5,"boast":5,"bonus":5,"boom":5,"bounce":5,"boundary":5,"bow1":5,"bow":5,"breach":5,"breakdown":5,"breakthrough":5,"breed":5,"broadband":5,"browser":5,"brutal":5,"buck":5,"buddy":5,"buffer":5,"bulk":5,"burden":5,"bureaucracy":5,"burial":5,"burst":5,"cabinet":5,"calculation":5,"canvas":5,"capability":5,"capitalism":5,"capitalist":5,"cargo":5,"carriage":5,"carve":5,"casino":5,"casualty":5,"catalogue":5,"cater":5,"cattle":5,"caution":5,"cautious":5,"cease":5,"cemetery":5,"chamber":5,"chaos":5,"characterize":5,"charm":5,"charter":5,"chronic":5,"chunk":5,"circulate":5,"circulation":5,"citizenship":5,"civic":5,"civilian":5,"clarity":5,"clash":5,"classification":5,"cling":5,"clinical":5,"closure":5,"cluster":5,"coalition":5,"coastal":5,"cocktail":5,"cognitive":5,"coincide":5,"collaborate":5,"collaboration":5,"collective":5,"collision":5,"colonial":5,"columnist":5,"combat":5,"commence":5,"commentary":5,"commentator":5,"commerce":5,"commissioner":5,"commodity":5,"communist":5,"companion":5,"comparable":5,"compassion":5,"compel":5,"compelling":5,"compensate":5,"compensation":5,"competence":5,"competent":5,"compile":5,"complement":5,"complexity":5,"compliance":5,"complication":5,"comply":5,"composition":5,"compromise":5,"compute":5,"conceal":5,"concede":5,"conceive":5,"conception":5,"concession":5,"condemn":5,"confer":5,"confession":5,"configuration":5,"confine":5,"confirmation":5,"confront":5,"confrontation":5,"congratulate":5,"congregation":5,"congressional":5,"conquer":5,"conscience":5,"consciousness":5,"consecutive":5,"consensus":5,"consent":5,"conserve":5,"consistency":5,"consolidate":5,"constituency":5,"constitute":5,"constitution":5,"constitutional":5,"constraint":5,"consultation":5,"contemplate":5,"contempt":5,"contend":5,"contender":5,"content2":5,"contention":5,"continually":5,"contractor":5,"contradiction":5,"contrary":5,"contributor":5,"conversion":5,"convict":5,"conviction":5,"cooperate":5,"cooperative":5,"coordinate":5,"coordination":5,"coordinator":5,"cop":5,"copper":5,"copyright":5,"correction":5,"correlate":5,"correlation":5,"correspond":5,"correspondence":5,"correspondent":5,"corresponding":5,"corrupt":5,"corruption":5,"costly":5,"councillor":5,"counselling":5,"counsellor":5,"counter (argue against)":5,"counterpart":5,"countless":5,"coup":5,"courtesy":5,"crawl":5,"creator":5,"credibility":5,"credible":5,"creep":5,"critique":5,"crown":5,"crude":5,"crush":5,"crystal":5,"cult":5,"cultivate":5,"curiosity":5,"custody":5,"cutting":5,"cynical":5,"dam":5,"damaging":5,"dawn":5,"debris":5,"debut":5,"decision-making":5,"decisive":5,"declaration":5,"dedicated":5,"dedication":5,"deed":5,"deem":5,"default":5,"defect":5,"defensive":5,"deficiency":5,"deficit":5,"defy":5,"delegate":5,"delegation":5,"delicate":5,"demon":5,"denial":5,"denounce":5,"dense":5,"density":5,"dependence":5,"depict":5,"deploy":5,"deployment":5,"deprive":5,"deputy":5,"descend":5,"descent":5,"designate":5,"desirable":5,"desktop":5,"destructive":5,"detain":5,"detection":5,"detention":5,"deteriorate":5,"devastate":5,"devil":5,"devise":5,"diagnose":5,"diagnosis":5,"dictate":5,"dictator":5,"differentiate":5,"dignity":5,"dilemma":5,"dimension":5,"diminish":5,"dip":5,"diplomat":5,"diplomatic":5,"directory":5,"disastrous":5,"discard":5,"discharge":5,"disclose":5,"disclosure":5,"discourse":5,"discretion":5,"discrimination":5,"dismissal":5,"displace":5,"disposal":5,"dispose":5,"dispute":5,"disrupt":5,"disruption":5,"dissolve":5,"distinction":5,"distinctive":5,"distort":5,"distress":5,"disturbing":5,"divert":5,"divine":5,"doctrine":5,"documentation":5,"domain":5,"dominance":5,"donor":5,"dose":5,"drain":5,"drift":5,"drown":5,"dual":5,"dub":5,"dumb":5,"duo":5,"eager":5,"earnings":5,"ease":5,"echo":5,"ecological":5,"educator":5,"effectiveness":5,"efficiency":5,"ego":5,"elaborate":5,"electoral":5,"elevate":5,"eligible":5,"elite":5,"embark":5,"embarrassment":5,"embassy":5,"embed":5,"embody":5,"emergence":5,"empirical":5,"empower":5,"enact":5,"encompass":5,"encouragement":5,"encouraging":5,"endeavour":5,"endless":5,"endorse":5,"endorsement":5,"endure":5,"enforce":5,"enforcement":5,"engagement":5,"engaging":5,"enquire":5,"enrich":5,"enrol":5,"ensue":5,"enterprise":5,"enthusiast":5,"entitle":5,"entity":5,"epidemic":5,"equality":5,"equation":5,"erect":5,"escalate":5,"essence":5,"establishment":5,"eternal":5,"evacuate":5,"evoke":5,"evolutionary":5,"exaggerate":5,"excellence":5,"exceptional":5,"excess":5,"exclusion":5,"exclusive":5,"exclusively":5,"execute":5,"execution":5,"exert":5,"exile":5,"expenditure":5,"experimental":5,"expire":5,"explicit":5,"explicitly":5,"exploitation":5,"explosive":5,"extremist":5,"facilitate":5,"faction":5,"faculty":5,"fade":5,"fairness":5,"fatal":5,"fate":5,"favourable":5,"feat":5,"feminist":5,"fibre":5,"fierce":5,"film-maker":5,"filter":5,"firearm":5,"fixture":5,"flaw":5,"flawed":5,"flee":5,"fleet":5,"flesh":5,"flexibility":5,"flourish":5,"fluid":5,"footage":5,"foreigner":5,"forge":5,"formula":5,"formulate":5,"forth":5,"forthcoming":5,"foster":5,"fragile":5,"franchise":5,"frankly":5,"frustrated":5,"frustrating":5,"frustration":5,"functional":5,"fundraising":5,"funeral":5,"gallon":5,"gambling":5,"gathering":5,"gaze":5,"gear":5,"generic":5,"genocide":5,"glance":5,"glimpse":5,"glorious":5,"glory":5,"governance":5,"grace":5,"grasp":5,"grave (for dead person)":5,"grave":5,"grave (serious)":5,"gravity":5,"grid":5,"grief":5,"grin":5,"grind":5,"grip":5,"gross":5,"guerrilla":5,"guidance":5,"guilt":5,"gut":5,"hail":5,"halfway":5,"halt":5,"handful":5,"handling":5,"handy":5,"harassment":5,"hardware":5,"harmony":5,"harsh":5,"harvest":5,"hatred":5,"haunt":5,"hazard":5,"heighten":5,"heritage":5,"hierarchy":5,"high-profile":5,"hint":5,"homeland":5,"hopeful":5,"horizon":5,"horn":5,"hostage":5,"hostile":5,"hostility":5,"humanitarian":5,"humanity":5,"humble":5,"hydrogen":5,"identification":5,"ideological":5,"ideology":5,"idiot":5,"ignorance":5,"imagery":5,"immense":5,"imminent":5,"implementation":5,"imprison":5,"imprisonment":5,"inability":5,"inadequate":5,"inappropriate":5,"incidence":5,"inclined":5,"inclusion":5,"incur":5,"indicator":5,"indictment":5,"indigenous":5,"induce":5,"indulge":5,"inequality":5,"infamous":5,"infant":5,"infect":5,"inflict":5,"influential":5,"inherent":5,"inhibit":5,"initiate":5,"inject":5,"injection":5,"injustice":5,"inmate":5,"insertion":5,"insider":5,"inspect":5,"inspection":5,"inspiration":5,"instinct":5,"institutional":5,"instruct":5,"instrumental":5,"insufficient":5,"insult":5,"intact":5,"intake":5,"integral":5,"integrated":5,"integration":5,"integrity":5,"intensify":5,"intensity":5,"intensive":5,"intent":5,"interactive":5,"interface":5,"interfere":5,"interference":5,"interim":5,"interior":5,"intermediate":5,"intervene":5,"intervention":5,"intimate":5,"intriguing":5,"investigator":5,"invisible":5,"invoke":5,"involvement":5,"ironic":5,"ironically":5,"irony":5,"irrelevant":5,"isolation":5,"judicial":5,"junction":5,"jurisdiction":5,"justification":5,"kidnap":5,"kidney":5,"kingdom":5,"lad":5,"landlord":5,"landmark":5,"lap":5,"large-scale":5,"laser":5,"latter":5,"lawn":5,"lawsuit":5,"layout":5,"leak":5,"leap":5,"legacy":5,"legendary":5,"legislation":5,"legislative":5,"legislature":5,"legitimate":5,"lengthy":5,"lesbian":5,"lesser":5,"lethal":5,"liable":5,"liberal":5,"liberation":5,"liberty":5,"license":5,"lifelong":5,"likelihood":5,"limb":5,"linear":5,"line-up":5,"linger":5,"listing":5,"literacy":5,"liver":5,"lobby":5,"log":5,"logic":5,"long-standing":5,"long-time":5,"loom":5,"loop":5,"loyalty":5,"machinery":5,"magical":5,"magistrate":5,"magnetic":5,"magnitude":5,"mainland":5,"mainstream":5,"maintenance":5,"mandate":5,"mandatory":5,"manifest":5,"manipulate":5,"manipulation":5,"manuscript":5,"marginal":5,"marine":5,"marketplace":5,"mask":5,"massacre":5,"mathematical":5,"mature":5,"maximize":5,"meaningful":5,"meantime":5,"medieval":5,"meditation":5,"melody":5,"memo":5,"memoir":5,"memorial":5,"mentor":5,"merchant":5,"mercy":5,"mere":5,"merely":5,"merge":5,"merger":5,"merit":5,"methodology":5,"midst":5,"migration":5,"militant":5,"militia":5,"mill":5,"minimal":5,"minimize":5,"mining":5,"ministry":5,"minute2":5,"miracle":5,"misery":5,"misleading":5,"missile":5,"mob":5,"mobility":5,"mobilize":5,"moderate":5,"modification":5,"momentum":5,"monk":5,"monopoly":5,"morality":5,"motive":5,"motorist":5,"municipal":5,"mutual":5,"namely":5,"nationwide":5,"naval":5,"neglect":5,"neighbouring":5,"nest":5,"newsletter":5,"niche":5,"noble":5,"nod":5,"nominate":5,"nomination":5,"nominee":5,"nonetheless":5,"non-profit":5,"nonsense":5,"noon":5,"notable":5,"notably":5,"notify":5,"notorious":5,"nursery":5,"objection":5,"oblige":5,"obsess":5,"obsession":5,"occasional":5,"occurrence":5,"odds":5,"offering":5,"offspring":5,"operational":5,"opt":5,"optical":5,"optimism":5,"oral":5,"organizational":5,"orientation":5,"originate":5,"outbreak":5,"outing":5,"outlet":5,"outlook":5,"outrage":5,"outsider":5,"overlook":5,"overly":5,"oversee":5,"overturn":5,"overwhelm":5,"overwhelming":5,"pad":5,"parameter":5,"parental":5,"parish":5,"parliamentary":5,"partial":5,"partially":5,"passing":5,"passive":5,"pastor":5,"patch":5,"patent":5,"pathway":5,"patrol":5,"patron":5,"peak":5,"peasant":5,"peculiar":5,"persist":5,"persistent":5,"personnel":5,"petition":5,"philosopher":5,"philosophical":5,"physician":5,"pioneer":5,"pipeline":5,"pirate":5,"pit":5,"plea":5,"plead":5,"pledge":5,"plug":5,"plunge":5,"pole":5,"poll":5,"pond":5,"portfolio":5,"portray":5,"postpone":5,"post-war":5,"practitioner":5,"preach":5,"precedent":5,"precision":5,"predator":5,"predecessor":5,"predominantly":5,"pregnancy":5,"prejudice":5,"preliminary":5,"premier":5,"premise":5,"premium":5,"prescribe":5,"prescription":5,"presently":5,"preservation":5,"preside":5,"presidency":5,"presidential":5,"prestigious":5,"presumably":5,"presume":5,"prevail":5,"prevalence":5,"prevention":5,"prey":5,"privatization":5,"privilege":5,"probe":5,"problematic":5,"proceedings":5,"proceeds":5,"processing":5,"processor":5,"proclaim":5,"productive":5,"productivity":5,"profitable":5,"profound":5,"projection":5,"prominent":5,"pronounced":5,"propaganda":5,"proposition":5,"prosecute":5,"prosecution":5,"prosecutor":5,"prospective":5,"prosperity":5,"protective":5,"protocol":5,"province":5,"provincial":5,"provision":5,"provoke":5,"psychiatric":5,"pulse":5,"pump":5,"punch":5,"query":5,"quest":5,"quota":5,"radar":5,"radical":5,"rage":5,"raid":5,"rally":5,"ranking":5,"rape":5,"ratio":5,"rational":5,"ray":5,"readily":5,"realization":5,"realm":5,"rear":5,"reasoning":5,"reassure":5,"rebel":5,"rebellion":5,"recipient":5,"reconstruction":5,"recount1":5,"recount":5,"referendum":5,"reflection":5,"reform":5,"refuge":5,"refusal":5,"regain":5,"regardless":5,"regime":5,"regulator":5,"regulatory":5,"rehabilitation":5,"reign":5,"rejection":5,"relevance":5,"reliability":5,"reluctant":5,"remainder":5,"remains":5,"remedy":5,"reminder":5,"removal":5,"render":5,"renew":5,"renowned":5,"rental":5,"replacement":5,"reportedly":5,"representation":5,"reproduce":5,"reproduction":5,"republic":5,"resemble":5,"reside":5,"residence":5,"residential":5,"residue":5,"resignation":5,"resistance":5,"respective":5,"respectively":5,"restoration":5,"restraint":5,"resume":5,"retreat":5,"retrieve":5,"revelation":5,"revenge":5,"reverse":5,"revival":5,"revive":5,"revolutionary":5,"rhetoric":5,"rifle":5,"riot":5,"rip":5,"ritual":5,"robust":5,"rod":5,"rotate":5,"rotation":5,"ruling":5,"rumour":5,"sack":5,"sacred":5,"sacrifice":5,"saint":5,"sake":5,"sanction":5,"scattered":5,"sceptical":5,"scope":5,"screw":5,"scrutiny":5,"seal":5,"secular":5,"seemingly":5,"segment":5,"seize":5,"seldom":5,"selective":5,"senator":5,"sensation":5,"sensitivity":5,"sentiment":5,"separation":5,"serial":5,"settlement":5,"set-up":5,"sexuality":5,"shareholder":5,"shatter":5,"shed":5,"sheer":5,"shipping":5,"shrink":5,"shrug":5,"sigh":5,"simulate":5,"simulation":5,"simultaneously":5,"sin":5,"situated":5,"sketch":5,"skip":5,"slam":5,"slap":5,"slash":5,"slavery":5,"slot":5,"smash":5,"snap":5,"soak":5,"soar":5,"socialist":5,"sole":5,"solely":5,"solicitor":5,"solidarity":5,"solo":5,"sovereignty":5,"spam":5,"span":5,"spark":5,"specialized":5,"specification":5,"specimen":5,"spectacle":5,"spectrum":5,"sphere":5,"spin":5,"spine":5,"spotlight":5,"spouse":5,"spy":5,"squad":5,"squeeze":5,"stab":5,"stability":5,"stabilize":5,"stake":5,"standing":5,"stark":5,"statistical":5,"steer":5,"stem":5,"stereotype":5,"stimulus":5,"stir":5,"storage":5,"straightforward":5,"strain":5,"strand":5,"strategic":5,"striking":5,"strip":5,"strip (long narrow piece)":5,"strip (remove clothes/a layer)":5,"strive":5,"structural":5,"stumble":5,"stun":5,"submission":5,"subscriber":5,"subscription":5,"subsidy":5,"substantial":5,"substantially":5,"substitute":5,"substitution":5,"subtle":5,"suburban":5,"succession":5,"successive":5,"successor":5,"suck":5,"sue":5,"suicide":5,"suite":5,"summit":5,"superb":5,"superior":5,"supervise":5,"supervision":5,"supervisor":5,"supplement":5,"supportive":5,"supposedly":5,"suppress":5,"supreme":5,"surge":5,"surgical":5,"surplus":5,"surrender":5,"surveillance":5,"suspension":5,"suspicion":5,"suspicious":5,"sustain":5,"swing":5,"sword":5,"symbolic":5,"syndrome":5,"synthesis":5,"systematic":5,"tactic":5,"tactical":5,"taxpayer":5,"tempt":5,"tenant":5,"tender":5,"tenure":5,"terminate":5,"terrain":5,"terrific":5,"testify":5,"testimony":5,"texture":5,"thankfully":5,"theatrical":5,"theology":5,"theoretical":5,"thereafter":5,"thereby":5,"thoughtful":5,"thought-provoking":5,"thread":5,"threshold":5,"thrilled":5,"thrive":5,"tide":5,"tighten":5,"timber":5,"timely":5,"tobacco":5,"tolerance":5,"tolerate":5,"toll":5,"torture":5,"toss":5,"toxic":5,"trademark":5,"trail":5,"trailer":5,"transaction":5,"transcript":5,"transformation":5,"transit":5,"transmission":5,"transparency":5,"transparent":5,"trauma":5,"treaty":5,"tremendous":5,"tribal":5,"tribunal":5,"tribute":5,"trio":5,"triumph":5,"trophy":5,"troubled":5,"trustee":5,"tuition":5,"turnout":5,"turnover":5,"twist":5,"undergraduate":5,"underlying":5,"undermine":5,"undoubtedly":5,"unify":5,"unprecedented":5,"unveil":5,"upcoming":5,"upgrade":5,"uphold":5,"utility":5,"utilize":5,"utterly":5,"vacuum":5,"vague":5,"validity":5,"vanish":5,"variable":5,"varied":5,"vein":5,"venture":5,"verbal":5,"verdict":5,"verify":5,"verse":5,"versus":5,"vessel":5,"veteran":5,"viable":5,"vibrant":5,"vice":5,"vicious":5,"villager":5,"violate":5,"violation":5,"virtue":5,"vocal":5,"vow":5,"vulnerability":5,"vulnerable":5,"ward":5,"warehouse":5,"warfare":5,"warrant":5,"warrior":5,"weaken":5,"weave":5,"weed":5,"well-being":5,"whatsoever":5,"whereby":5,"whilst":5,"whip":5,"wholly":5,"widen":5,"widow":5,"width":5,"willingness":5,"wipe":5,"wit":5,"withdrawal":5,"workout":5,"worship":5,"worthwhile":5,"worthy":5,"yell":5,"yield":5,"youngster":5};


  const __CEFRJ_LV = {"'m":1,"'re":1,"'s":1,"a":1,"a.m.":1,"abandon":4,"abandoned":4,"ability":2,"able":2,"abnormal":3,"abnormally":4,"aboard":3,"abolish":5,"aboriginal":4,"aborigine":3,"abortion":5,"about":1,"above":1,"abroad":2,"abruptly":4,"absence":5,"absent":5,"absentee":4,"absolute":4,"absolutely":3,"absolutely adv.academic":3,"absorb":4,"abstract":4,"absurd":5,"abundance":5,"abundant":3,"abuse":5,"academic":4,"academy":5,"accelerate":5,"accent":4,"accept":2,"acceptable":4,"acceptance":5,"access":3,"accessibility":4,"accessible":5,"accessory":3,"accident":2,"accidental":3,"accidentally":4,"accommodate":4,"accommodation":3,"accompany":4,"accomplish":4,"accomplishment":5,"accordance":5,"according to":2,"accordingly":5,"account":3,"accountability":5,"accountable":5,"accountant":4,"accumulate":5,"accumulation":5,"accuracy":4,"accurate":4,"accurately":4,"accusation":5,"accuse":4,"accused":5,"accustom":3,"ache":3,"achievable":4,"achieve":2,"achievement":3,"acid":4,"acknowledge":4,"acknowledgement":3,"acknowledgment":3,"acquaintance":3,"acquire":4,"acquisition":5,"acre":5,"across":1,"act":2,"action":1,"activate":4,"activation":5,"active":2,"actively":4,"activity":1,"actor":1,"actress":1,"actual":4,"actually":2,"acute":5,"ad":3,"adapt":4,"adaptable":4,"adaptation":5,"add":1,"addict":4,"addicted":4,"addiction":4,"addition":3,"additional":4,"additionally":4,"address":1,"addressee":3,"adequate":4,"adequately":4,"adhere":5,"adj.":1,"adjacent":5,"adjective":2,"adjust":4,"adjustment":5,"administer":5,"administration":4,"administrative":5,"administrator":5,"admirable":4,"admiration":3,"admire":3,"admiringly":4,"admission":5,"admit":3,"admittedly":4,"adolescent":5,"adopt":4,"adopted":4,"adoption":5,"adorable":3,"adore":4,"adorn":4,"adult":1,"advance":4,"advanced":3,"advancement":4,"advantage":2,"advent":4,"adventure":2,"adventurous":4,"adverb":3,"adverbial":3,"adverse":5,"adversely":4,"adversity":4,"advert":3,"advertise":2,"advertisement":2,"advertising":2,"advice":1,"advise":3,"adviser":3,"advisor":3,"advocate":5,"aerobics":3,"aeroplane":1,"aesthetic":5,"affair":4,"affect":2,"affection":5,"affectionate":4,"affectionately":4,"afford":3,"affordable":4,"afraid":1,"after":1,"aftermath":5,"afternoon":1,"afterward":3,"afterwards":4,"again":1,"against":2,"age":1,"aged":3,"ageless":4,"agency":4,"agenda":4,"agent":3,"aggression":5,"aggressive":4,"aggressively":4,"ago":1,"agonise":4,"agonize":4,"agony":4,"agree":1,"agreement":3,"agricultural":5,"agriculture":4,"ah":2,"ahead":3,"aid":4,"aide":5,"aids":4,"aim":3,"aim v. ,":3,"air":1,"air conditioning":3,"air force":3,"aircraft":4,"aircrew":4,"airline":2,"airplane":1,"airport":1,"aisle":2,"alarm":3,"alarm clock":2,"albeit":5,"album":3,"alcohol":3,"alcoholic":3,"alcoholism":4,"alert":4,"alert v. ,":5,"alien":4,"align":5,"alignment":5,"alike":3,"alike adv. ,":5,"alive":2,"all":1,"all right":1,"all right adj./adv. ,":2,"allegation":5,"allege":5,"allegedly":5,"allergic":3,"alliance":5,"allocate":5,"allocation":5,"allow":2,"allowance":5,"ally":5,"almost":2,"alone":2,"along":2,"alongside":4,"aloud":3,"alphabet":3,"alphabetical":4,"already":2,"alright":2,"also":1,"altar":4,"alter":4,"alternate":4,"alternative":2,"alternatively":4,"although":2,"altitude":4,"altogether":4,"aluminium":5,"aluminum":4,"always":1,"am":1,"amateur adj. ,":5,"amaze":4,"amazed":3,"amazement":4,"amazing":1,"amazingly":4,"ambassador":5,"ambiguity":4,"ambiguous":4,"ambition":3,"ambitious":3,"ambulance":4,"amend":5,"amendment":5,"amid":5,"ammonia":4,"among":2,"amongst":4,"amount":2,"ample":4,"amplifier":4,"amplify":4,"amuse":4,"amused":2,"amusement":2,"amusing":4,"an":1,"analogy":5,"analyse":3,"analysis":3,"analyst":4,"analyze":3,"ancestor":4,"anchor":5,"anchorage":4,"anchorman":4,"anchorperson":4,"ancient":2,"and":1,"angel":5,"anger":4,"angle":3,"angrily":2,"angry":1,"anguish":4,"animal":1,"animate":4,"animated":3,"animation":4,"ankle":2,"anniversary":4,"announce":3,"announcement":3,"annoy":3,"annoyance":3,"annoyed":3,"annoying":3,"annual":4,"annually":4,"anonymous":5,"another":1,"answer":1,"ant":3,"anti":3,"antiaircraft":4,"antibacterial":4,"anticancer":4,"anticipate":4,"anticipation":4,"antipollution":4,"antique":3,"antistatic":4,"antivirus":4,"antonym":3,"anxiety":4,"anxious":4,"anxiously":3,"any":1,"any adv.anybody":2,"any more":2,"anybody":1,"anyhow":3,"anymore":2,"anyone":1,"anything":1,"anyway":2,"anywhere":2,"anywhere adv. ,":2,"apart":3,"apartment":1,"ape":3,"apologise":2,"apologize":3,"apology":4,"apostrophe":4,"app":2,"apparatus":5,"apparent":4,"apparently":4,"appeal":4,"appealing":5,"appear":2,"appearance":2,"appetite":5,"applaud":5,"applause":3,"apple":1,"applicable":5,"applicant":4,"application":3,"apply":2,"appoint":5,"appointment":3,"appreciate":3,"appreciation":5,"appreciative":4,"approach":4,"appropriate":4,"appropriately":4,"approval":4,"approve":4,"approximate":4,"approximately":3,"april":1,"apron":1,"arbitrary":5,"arch":4,"archaeologist":4,"archeologist":4,"architect":2,"architectural":5,"architecture":2,"archive":5,"arctic":4,"are":1,"area":1,"arena":5,"arguably":5,"argue":2,"argument":2,"arise":4,"aristocracy":4,"arithmetic":3,"arm":1,"armchair":2,"armed":4,"armful":4,"arms":4,"army":2,"around":1,"arouse":4,"arrange":2,"arrangement":2,"array":5,"arrest":3,"arrest v. ,":3,"arrival":3,"arrive":1,"arrogant":4,"arrow":4,"art":1,"artery":4,"article":1,"articulate":5,"artificial":4,"artificially":4,"artist":1,"artistic":4,"artistry":4,"artwork":4,"as":1,"as adv. ,":2,"ash":5,"ashamed":4,"aside":4,"ask":1,"asleep":2,"aspect":4,"aspiration":5,"aspire":5,"aspirin":3,"assassination":5,"assault":5,"assemble":5,"assembly":5,"assert":5,"assertion":5,"assess":4,"assessment":4,"asset":4,"assign":4,"assignment":3,"assist":3,"assistance":4,"assistant":2,"associate":4,"associated":4,"association":4,"assume":4,"assumption":4,"assurance":5,"assure":4,"astonish":4,"astonished":4,"astonishing":4,"astonishment":4,"astronaut":2,"astronomer":3,"astronomy":4,"asylum":5,"at":1,"athlete":2,"athletic":3,"athletics":4,"atlantic":3,"atmosphere":3,"atom":2,"atomic":3,"attach":3,"attached":4,"attachment":4,"attack":2,"attain":5,"attainable":4,"attainment":4,"attempt":4,"attend":2,"attendance":5,"attention":2,"attention n. ,":2,"attentive":4,"attentively":4,"attitude":3,"attorney":5,"attract":3,"attraction":3,"attractive":2,"attractiveness":4,"attribute":4,"attribute v. ,":5,"atypical":4,"aubergine":4,"auction":4,"audience":2,"audio":4,"audit":5,"audition":4,"august":1,"aunt":1,"authentic":5,"author":2,"authorise":4,"authoritative":4,"authority":3,"authorize":5,"auto":5,"automatic":4,"automatically":4,"autonomy":5,"autumn":1,"auxiliary":3,"availability":5,"available":2,"avenue":3,"average":3,"average adj. ,":2,"avoid":2,"await":5,"awake":1,"award":2,"aware":3,"awareness":4,"away":1,"awe":4,"awesome":3,"awful":2,"awkward":4,"ax":4,"axe":4,"axis":4,"baby":1,"babysit":3,"babysitter":3,"back":1,"backache":3,"backdrop":5,"background":2,"backing":5,"backpack":3,"backpacker":3,"backpacking":3,"backup":5,"backward":4,"backwards":3,"backyard":4,"bacon":3,"bacteria":4,"bad":1,"bad-tempered":4,"badge":4,"badly":2,"badminton":2,"bag":1,"baggage":3,"bail":5,"bake":3,"baker":3,"bakery":3,"balance":3,"balanced":4,"balcony":2,"bald":3,"balky":4,"ball":1,"ballad":4,"ballet":4,"balloon":4,"ballot":5,"ban":4,"ban v. ,":3,"banana":1,"band":1,"bandage":3,"bang":3,"bank":1,"bank (money)":1,"bank (river)":3,"bank account":3,"banker":4,"banking":2,"bankrupt":4,"bankruptcy":4,"banner":5,"bar":2,"barbecue":2,"barber":2,"barbershop":4,"bare":5,"barely":4,"bargain":4,"bark":3,"barley":4,"barman":3,"barn":4,"barometer":4,"barrel":5,"barren":4,"barrier":4,"bartender":4,"base":3,"baseball":2,"based":2,"basement":4,"basic":3,"basically":4,"basin":3,"basis":3,"basket":4,"basketball":2,"bass 1":5,"bat":4,"batch":2,"bath":1,"bathe":3,"bathhouse":4,"bathroom":1,"battery":3,"battle":3,"battlefield":5,"bay":5,"be":1,"be v. ,":1,"beach":1,"beagle":4,"beak":4,"beam":5,"bean":2,"bear":1,"bear (animal)":2,"bear (deal with)":4,"beard":3,"bearing":4,"beast":5,"beat":2,"beautiful":1,"beautifully":3,"beautify":4,"beauty":3,"beaver":3,"because":1,"because of":3,"become":1,"bed":1,"bedroom":1,"bedside":3,"bee":3,"beef":2,"been":2,"beer":1,"before":1,"beg":4,"begin":1,"beginner":2,"beginning":1,"behalf":5,"behave":2,"behavior":2,"behaviour":2,"behind":1,"being":4,"belief":3,"believe":1,"bell":3,"bellow":4,"belly":2,"belong":2,"belongings":4,"beloved":5,"below":1,"below adv. ,":1,"belt":2,"bench":5,"benchmark":5,"bend":2,"bend v. ,":3,"beneath":5,"beneficial":4,"beneficiary":5,"benefit":2,"benevolence":4,"benevolent":4,"bent":4,"berry":4,"beside":4,"besides":4,"best":1,"best adv. ,":2,"bestow":4,"bestseller":4,"bet":3,"bet v. ,":4,"betray":5,"better":1,"between":1,"bewilder":4,"bewilderment":4,"beyond":4,"bias":4,"bicycle":1,"bid":4,"bidding":4,"big":1,"bike":1,"bikini":4,"bilingual":3,"bill":1,"billion":2,"bin":2,"bind":5,"bio":4,"biochemistry":3,"biography":5,"biological":4,"biology":2,"biotechnology":4,"bird":1,"birdcage":4,"birth":2,"birthday":1,"birthplace":4,"biscuit":2,"bishop":5,"bit":2,"bite":2,"bitter":4,"bitterly":4,"bizarre":5,"black":1,"black adj. ,":1,"blackboard":2,"blade":5,"blame":2,"blame v. ,":4,"blank":1,"blank adj. ,":2,"blanket":4,"blast":5,"blaze":4,"bleed":5,"blend":3,"blend v. ,":5,"bless":5,"blessing":5,"blind":4,"blindly":4,"blindness":4,"blink":4,"block":3,"blog":1,"blogger":3,"blonde":1,"blood":2,"bloodstream":4,"bloody":4,"bloom":2,"blooming":4,"blossom":4,"blow":2,"blue":1,"blue adj. ,":1,"blur":4,"blurt":4,"blush":3,"board":2,"board game":2,"boast":5,"boat":1,"body":1,"boil":2,"boiled":2,"boiling":4,"bold":4,"boldly":3,"bolt":4,"bomb":3,"bombard":4,"bomber":4,"bombing":4,"bond":4,"bone":2,"bonus":5,"bony":4,"book":1,"bookcase":2,"booking":4,"bookish":4,"booklet":4,"bookmark":4,"bookshelf":2,"bookshop":2,"bookstore":1,"boom":5,"boost":4,"boost v. ,":4,"boot":1,"booth":4,"border":3,"bore":3,"bored":1,"boredom":3,"boring":1,"born":1,"borrow":2,"boss":2,"bossy":4,"botany":4,"both":1,"bother":3,"bothered":4,"bothersome":4,"bottle":1,"bottom":2,"bounce":5,"bound":4,"boundary":5,"bourbon":4,"bow":3,"bow 1 v.,":5,"bowl":2,"box":1,"boxer":4,"boxing":3,"boy":1,"boyfriend":1,"bra":2,"bracelet":3,"bracket":4,"brag":4,"brain":2,"brainstorm":2,"brainstorming":3,"brake":2,"branch":3,"brand":3,"brand-new":3,"brass":3,"brave":3,"bravely":3,"bravery":4,"breach":5,"bread":1,"break":1,"break v. ,":1,"breakable":4,"breakdown":5,"breakfast":1,"breakthrough":5,"breakup":4,"breast":4,"breath":3,"breathe":3,"breathing":3,"breathless":3,"breathtaking":4,"breed":3,"breed v. ,":5,"breeding":3,"breeze":2,"breezy":4,"brewery":4,"brick":4,"bride":3,"bridge":2,"brief":4,"briefly":4,"bright":2,"brightly":3,"brilliant":2,"brilliantly":4,"bring":1,"broad":4,"broadband":5,"broadcast":3,"broadcast v. ,":4,"broadcaster":4,"broaden":4,"broadly":4,"broccoli":3,"brochure":4,"broken":2,"bronze":3,"brother":1,"brother-in-law":4,"brotherhood":3,"brown":1,"brown adj. ,":1,"browse":4,"browser":5,"bruise":4,"brush":1,"brush v. ,":2,"brutal":5,"bubble":3,"buck":5,"bucket":1,"bud":4,"buddy":5,"budget":4,"buffer":5,"bug":4,"build":1,"builder":3,"building":1,"bulb":2,"bulimia":4,"bulk":5,"bull":3,"bullet":4,"bulletin":3,"bully":4,"bum":4,"bump":3,"bumper":4,"bun":4,"bunch":4,"burden":5,"burdensome":4,"bureau":3,"bureaucracy":5,"burger":1,"burglar":3,"burglary":4,"burgle":4,"burial":5,"burn":2,"burning":3,"burst":5,"bury":3,"bus":1,"bus station":2,"bus stop":2,"bush":4,"business":1,"businessman":2,"businesswoman":2,"bust":3,"bustle":4,"bustling":4,"busy":1,"but":1,"butcher":3,"butter":1,"butterfly":1,"button":2,"buy":1,"buyer":3,"buzz":4,"by":1,"bye":1,"cab":2,"cabbage":3,"cabin":4,"cabinet":5,"cable":4,"cafe":1,"cafeteria":2,"cafÃ©":1,"cage":3,"cake":1,"calculate":4,"calculation":5,"calculator":3,"calendar":2,"calf":3,"call":1,"call v. ,":1,"caller":3,"calm":3,"calm adj. , v.,":3,"calmly":4,"calmness":3,"camel":3,"camera":1,"camp":2,"campaign":3,"camping":2,"campsite":3,"campus":3,"can":1,"can1":1,"can2":2,"canal":4,"cancel":4,"cancer":4,"candidate":3,"candle":4,"candy":1,"cane":4,"canned":3,"cannonball":4,"canon":4,"canteen":3,"canvas":5,"cap":3,"capability":5,"capable":4,"capacity":4,"capital":1,"capital letter":2,"capitalism":5,"capitalist adj.cargo":5,"capsule":3,"captain":3,"caption":4,"captive":4,"capture":3,"capture v. ,":4,"car":1,"car park":2,"caravan":4,"carbon":4,"carbon dioxide":4,"carbon footprint":4,"carbon monoxide":4,"card":1,"cardboard":4,"cardigan":4,"care":2,"career":1,"carefree":4,"careful":2,"carefully":2,"careless":3,"carelessly":3,"carelessness":3,"caring":4,"carnival":4,"carpet":2,"carpool":4,"carriage":5,"carrot":1,"carry":1,"carton":3,"cartoon":2,"carve":5,"cascade":4,"case":2,"cash":2,"cashpoint":3,"casino":5,"cassette":2,"cast":4,"castle":2,"casual":4,"casually":4,"casualty":5,"cat":1,"catalog":4,"catalogue":5,"catalyst":4,"catastrophe":4,"catastrophic":4,"catch":2,"catchy":4,"categorisation":4,"categorise":3,"categorization":4,"categorize":3,"category":3,"cater":5,"catering":4,"cathedral":4,"cattle":5,"cause":2,"caution":5,"cautious":5,"cave":4,"cd":1,"cd player":1,"cd-rom":3,"cease":5,"ceiling":3,"celebrate":2,"celebration":3,"celebrity":2,"cell":4,"cellar":4,"cellist":4,"cello":4,"cemetery":5,"cent":1,"center":2,"centigrade":4,"centimeter":2,"centimetre":2,"central":3,"central heating":3,"centre":1,"century":1,"cereal":2,"ceremony":3,"certain":2,"certainly":2,"certainty":4,"certificate":4,"certification":4,"certify":4,"chain":3,"chair":1,"chairman":4,"challenge":3,"challenging":4,"chamber":5,"champagne":2,"champion":3,"championship":4,"chance":2,"chancellor":4,"change":1,"change v. ,":1,"channel":3,"chaos":5,"chaotic":4,"chapter":3,"character":2,"characterise":3,"characteristic":4,"characterize":5,"charge":3,"chariot":3,"charity":2,"charm":5,"charming":4,"chart":1,"chart v.chief adj. ,":4,"charter":5,"chase":3,"chase v. ,":4,"chat":2,"chat show":3,"chat v. ,":2,"cheap":1,"cheat":4,"cheat v. ,":3,"check":1,"check-in":3,"check-in counter":3,"check-in desk":3,"checkout":3,"checkpoint":4,"cheek":4,"cheeky":4,"cheer":2,"cheer v. ,":4,"cheerful":3,"cheerfully":4,"cheerfulness":4,"cheese":1,"chef":2,"chemical":2,"chemical adj. ,":3,"chemist":3,"chemistry":2,"chemotherapy":4,"cheque":2,"cherish":3,"cherished":4,"cherry":4,"chess":2,"chest":3,"chest of drawers":3,"chew":4,"chewing gum":3,"chicken":1,"chief":3,"child":1,"childhood":3,"childish":4,"chili":2,"chilli":2,"chimney":4,"chimpanzee":2,"chin":2,"chip":2,"chirp":2,"chocolate":1,"choice":2,"choir":4,"choke":3,"choose":1,"chop":4,"christian":3,"chronic":5,"chronological":3,"chuckle":3,"chunk":5,"church":2,"cigarette":2,"cinema":1,"circle":2,"circuit":4,"circuitry":4,"circular":3,"circulate":5,"circulation":5,"circumstance":4,"circus":3,"cite":4,"citizen":4,"citizenship":5,"city":1,"citywide":4,"civic":5,"civil":4,"civilian":5,"civilisation":3,"civilization":4,"claim":2,"claim v. ,":3,"clam":4,"clap":4,"clarify":4,"clarity":5,"clash":5,"class":1,"classic":2,"classic adj. ,":4,"classical":2,"classical music":2,"classification":5,"classify":4,"classmate":1,"classroom":1,"clause":3,"clean":1,"clean adj. ,":1,"cleaner":2,"clear":2,"clearly":2,"clearness":4,"clerical":4,"clerk":4,"clever":2,"click":2,"click v. ,":3,"client":3,"cliff":4,"climate":2,"climate change":4,"climb":1,"climber":3,"climbing":2,"cling":5,"clinic":4,"clinical":5,"clip":4,"clock":1,"clog":4,"clone":2,"close 1":1,"closed":2,"closely":4,"closure":5,"cloth":3,"clothes":1,"clothing":2,"cloud":2,"cloudy":1,"clown":2,"club":1,"clue":3,"clumsy":4,"cluster":5,"coach":2,"coaching":4,"coal":3,"coalition":5,"coarse":4,"coast":2,"coastal":5,"coastline":4,"coat":1,"cocktail":5,"cocoa":4,"coconut":4,"cod":3,"code":2,"coffee":1,"coffin":3,"cognitive":5,"coherence":4,"coherent":4,"coin":3,"coincide":5,"coincidence":4,"coke":1,"cola":2,"cold":1,"cold adj. ,":1,"collaborate":5,"collaboration":5,"collapse":3,"collapse v. ,":4,"collar":3,"colleague":2,"collect":2,"collection":3,"collective":5,"collector":4,"college":1,"collision":5,"collocation":4,"colon":4,"colonial":5,"colony":4,"color":1,"colorful":2,"colour":1,"coloured":3,"colourful":4,"column":2,"columnist":5,"coma":4,"comb":2,"combat":5,"combination":4,"combine":3,"come":1,"comedian":3,"comedy":2,"comet":3,"comfort":4,"comfortable":2,"comfortably":4,"comic":2,"comic adj. ,":4,"comma":3,"command":4,"commander":4,"commemorate":4,"commence":5,"comment":2,"commentary":5,"commentator":5,"commerce":5,"commercial":3,"commercial adj. ,":3,"commission":4,"commissioner":5,"commit":3,"commitment":4,"committee":4,"commodity":5,"common":1,"common sense":3,"commonly":4,"commonwealth":4,"communicate":2,"communication":3,"communicative":4,"communist":5,"community":2,"commute":4,"companion":5,"company":1,"comparable":5,"comparative":4,"compare":1,"comparison":3,"compassion":5,"compassionate":4,"compatible":4,"compel":5,"compelling":5,"compensate":5,"compensation":5,"compete":2,"competence":5,"competent":5,"competition":2,"competitive":3,"competitor":3,"compile":5,"complain":2,"complaint":3,"complement":5,"complete":2,"complete adj. ,":1,"completely":2,"completion":4,"complex":3,"complexion":4,"complexity":5,"compliance":5,"complicate":3,"complicated":4,"complication":5,"compliment":3,"comply":5,"component":4,"compose":4,"composer":4,"composition":5,"compound":4,"comprehension":4,"comprehensive":4,"compress":4,"compression":4,"comprise":4,"compromise":5,"compulsory":4,"compute":5,"computer":1,"conceal":5,"concede":5,"conceit":4,"conceivable":4,"conceive":4,"concentrate":3,"concentration":4,"concept":4,"conception":5,"concern":4,"concerned":4,"concerning":4,"concert":1,"concession":5,"conclude":3,"conclusion":3,"concrete":4,"concrete adj. ,":4,"condemn":5,"condition":2,"conduct":3,"conduct v. ,":4,"conductor":4,"cone":4,"confer":5,"conference":2,"conferencing":4,"confess":4,"confession":5,"confidence":4,"confident":3,"confidently":4,"configuration":5,"confine":5,"confirm":3,"confirmation":5,"conflict":4,"confront":5,"confrontation":5,"confuse":2,"confused":3,"confusing":4,"confusion":4,"congratulate":5,"congregation":5,"congressional":5,"conjunction":4,"connect":2,"connected":2,"connection":3,"connexion":3,"conquer":5,"conquest":4,"conscience":5,"conscious":4,"consciousness":5,"consecutive":5,"consensus":5,"consent":5,"consequence":3,"consequently":3,"consequently adv.conservation":4,"conservation":3,"conservative":3,"conservative adj. ,":4,"conserve":5,"consider":2,"considerable":4,"considerably":4,"consideration":4,"considering":4,"consist":3,"consistency":5,"consistent":4,"consistently":4,"consolation":4,"console":4,"consolidate":5,"consonant":3,"conspiracy":4,"constant":4,"constantly":4,"constituency":5,"constitute":5,"constitution":5,"constitutional":5,"constraint":5,"construct":4,"construction":4,"consult":4,"consultant":4,"consultation":5,"consume":3,"consumer":3,"consumption":4,"contact":3,"contain":2,"container":3,"contaminate":4,"contemplate":5,"contemporary":4,"contempt":5,"contend":5,"contender":5,"content 1":3,"contention":5,"contest":4,"context":2,"continent":2,"continual":3,"continually":5,"continue":2,"continuous":3,"continuously":3,"contract":4,"contractor":5,"contradict":4,"contradiction":5,"contradictory":4,"contrary":3,"contrary adj. ,":5,"contrast":3,"contribute":4,"contribution":4,"contributor":5,"control":2,"controversial":4,"controversy":4,"convenience":4,"convenient":3,"conveniently":4,"convention":4,"conventional":4,"conversation":1,"converse":4,"conversely":4,"conversion":5,"convert":4,"convey":4,"convict":5,"conviction":5,"convince":3,"convinced":4,"convincing":4,"cook":1,"cooker":2,"cookie":1,"cooking":1,"cool":1,"cooler":2,"cooperate":5,"cooperation":4,"cooperative":5,"coordinate":5,"coordination":5,"coordinator":5,"cop":5,"cope":4,"copper":5,"copy":2,"copyright":5,"coral":4,"core":4,"corn":1,"corner":2,"cornerstone":4,"cornet":4,"corona":4,"corporal":4,"corporate":4,"corporation":4,"correct":1,"correct adj. ,":1,"correction":5,"correctly":2,"correctness":4,"correlate":5,"correlation":5,"correspond":5,"correspondence":5,"correspondent":5,"corresponding":5,"corridor":4,"corrupt":5,"corruption":5,"cosiness":4,"cost":1,"costly":5,"costume":3,"cosy":4,"cottage":3,"cotton":3,"couch":1,"cough":3,"could":1,"council":4,"councillor":5,"counseling":3,"counselling":5,"counsellor":5,"count":2,"counter":3,"counter (argue against)":5,"counter (long flat surface)":4,"counterpart":5,"countless":5,"country":1,"countryman":4,"countryside":3,"countrywide":4,"county":4,"coup":5,"couple":2,"courage":4,"courageous":3,"courgette":3,"course":1,"court":3,"courtesy":5,"cousin":1,"cover":2,"coverage":4,"covered":3,"cow":1,"coward":4,"cowardly":4,"coziness":4,"cozy":4,"crab":4,"crack":4,"crack v. ,":4,"craft":4,"craftsman":4,"crash":4,"crater":4,"crawl":4,"crazy":2,"cream":1,"crease":4,"create":1,"creation":4,"creative":2,"creatively":4,"creativity":4,"creator":5,"creature":4,"credibility":5,"credible":5,"credit":2,"credit card":1,"creek":4,"creep":5,"creepy":4,"crew":4,"cricket":2,"crime":2,"criminal":2,"cripple":4,"crisis":4,"crisp":2,"criterion":4,"critic":4,"critical":4,"critically":4,"criticise":2,"criticism":4,"criticize":4,"critique":5,"crocodile":4,"crop":4,"cross":2,"cross v. ,":2,"crossing":3,"crossly":4,"crossroads":3,"crow":3,"crowd":2,"crowded":2,"crown":5,"crucial":4,"crude":5,"cruel":3,"cruelly":4,"cruelty":4,"cruise":4,"crush":5,"cry":2,"crystal":5,"crystallise":4,"crystallize":4,"cube":4,"cubism":4,"cucumber":3,"cue":4,"cuff":4,"culmination":4,"cult":5,"cultivate":5,"cultural":3,"culturally":4,"culture":1,"cup":1,"cupboard":2,"cure":3,"cure v. ,":4,"curiosity":5,"curious":4,"curiously":3,"curl":4,"curly":2,"currency":3,"current":3,"currently":3,"curriculum":4,"curry":2,"curse":2,"cursor":4,"curtain":3,"curve":4,"curved":4,"cushion":3,"custody":5,"custom":3,"customer":1,"customs":3,"cut":3,"cut v.dad":1,"cute":4,"cutting":5,"cv":3,"cyberaddict":4,"cybercafe":4,"cybercafÃ©":4,"cybercrime":4,"cyberpet":4,"cyberschool":4,"cyberspace":4,"cycle":2,"cycling":2,"cyclist":4,"cynical":5,"dad":1,"daddy":1,"daft":4,"daily":2,"dairy":4,"daisy":3,"dam":5,"damage":3,"damaged":3,"damaging":5,"damn":4,"damp":3,"dance":1,"dancer":1,"dancing":1,"dandelion":4,"danger":2,"dangerous":1,"dangerously":3,"dare":4,"dark":1,"darkness":4,"darling":4,"dash":4,"data":2,"database":4,"date":1,"dated":4,"dating":3,"daughter":1,"daughter-in-law":4,"dawn":5,"day":1,"daylight":2,"daytime":4,"daze":3,"dazzle":3,"de facto":4,"dead":2,"deadline":4,"deadly":4,"deaf":3,"deal":2,"dealer":4,"dear":1,"dearly":4,"death":2,"debate":4,"debit":4,"debit card":4,"debris":5,"debt":4,"debut":5,"decade":3,"decay":4,"deceive":4,"december":1,"decent":4,"deceptive":4,"decide":1,"decision":2,"decision-making":5,"decisive":5,"deck":4,"declaration":5,"declare":4,"decline":3,"decomposition":4,"decorate":3,"decoration":4,"decorative":4,"decrease":3,"decrease v. ,":4,"dedicate":3,"dedicated":5,"dedication":5,"deduce":4,"deduction":4,"deed":5,"deem":5,"deep":2,"deeply":4,"deer":4,"default":5,"defeat":3,"defeat v. ,":4,"defect":5,"defence":4,"defend":4,"defender":4,"defense":3,"defensive":5,"deficiency":5,"deficit":5,"define":3,"definite":3,"definite article":3,"definitely":2,"definition":3,"deforestation":4,"defy":5,"degree":2,"dehumanise":4,"dehumanize":4,"delay":2,"delay v. ,":4,"delegate":5,"delegation":5,"delete":4,"deliberate":4,"deliberately":4,"delicacy":4,"delicate":5,"delicately":4,"delicious":1,"delight":3,"delight v. ,":4,"delighted":4,"delightful":3,"deliver":3,"delivery":4,"demand":4,"demanding":4,"democracy":4,"democratic":4,"demolish":4,"demon":5,"demonstrate":4,"demonstration":4,"denial":5,"denim":4,"denounce":5,"dense":5,"densely":4,"density":5,"dental":4,"dentist":2,"deny":4,"depart":4,"department":2,"department store":2,"departure":3,"depend":2,"dependable":4,"dependence":5,"dependent":4,"depict":5,"deploy":5,"deployment":5,"deposit":4,"depressed":4,"depressing":4,"depression":4,"deprive":5,"depth":4,"deputy":5,"derive":4,"descend":5,"descent":5,"describe":1,"description":1,"descriptive":4,"desert":2,"deserve":4,"design":1,"designate":5,"designer":2,"desirable":5,"desire":4,"desk":1,"desktop":5,"desolation":4,"despair":3,"desperate":4,"desperately":4,"desperation":4,"despise":4,"despite":3,"dessert":2,"destination":3,"destiny":4,"destroy":2,"destruction":4,"destructive":5,"detach":4,"detachment":4,"detail":1,"detailed":4,"detain":5,"detect":4,"detection":5,"detective":2,"detention":5,"deteriorate":5,"determination":4,"determine":3,"determined":3,"determiner":4,"devastate":5,"devastating":3,"develop":2,"developed":2,"developing":4,"development":3,"device":2,"devil":5,"devise":5,"devote":4,"devoted":4,"devotion":3,"diagnose":5,"diagnosis":5,"diagram":3,"dial":3,"dialog":3,"dialogue":1,"diameter":3,"diamond":3,"diaper":3,"diarrhea":4,"diarrhoea":4,"diary":2,"dictate":5,"dictator":5,"dictionary":1,"did":1,"die":1,"diet":1,"differ":4,"difference":1,"different":1,"differentiate":5,"differently":2,"difficult":1,"difficulty":3,"dig":4,"digest":4,"digital":2,"digital camera":2,"dignify":4,"dignity":5,"dilemma":5,"diligence":3,"diligent":3,"dim":4,"dime":4,"dimension":5,"dining room":1,"dinner":1,"dinosaur":2,"dioxide":3,"dip":5,"diphtheria":4,"diploma":4,"diplomat":5,"diplomatic":5,"direct":2,"direction":2,"directly":3,"director":2,"directory":5,"dirt":3,"dirty":1,"disability":4,"disable":3,"disabled":4,"disadvantage":3,"disagree":2,"disagreement":4,"disappear":2,"disappearance":4,"disappoint":4,"disappointed":3,"disappointing":3,"disappointment":4,"disapproval":4,"disapprove":4,"disaster":2,"disastrous":5,"disc":4,"disc jockey":3,"discard":5,"discharge":5,"disciple":4,"discipline":4,"disclose":5,"disclosure":5,"disco":2,"discomfort":3,"disconnect":4,"discount":3,"discourage":4,"discourse":5,"discover":2,"discovery":2,"discredit":4,"discretion":5,"discriminate":4,"discrimination":5,"discuss":1,"discussion":2,"disease":2,"disgrace":4,"disguise":4,"disgusting":3,"dish":1,"dishonest":4,"dishonesty":4,"dishwasher":3,"disillusion":4,"disk":3,"disk jockey":3,"dislike":2,"dislike v. ,":3,"dismiss":4,"dismissal":5,"disorder":4,"disorderly":4,"disorganised":4,"disorganized":4,"dispensable":4,"displace":5,"display":2,"display v. ,":4,"displeasure":4,"disposal":5,"dispose":5,"disposition":4,"dispute":5,"disqualify":4,"disregard":4,"disrupt":5,"disruption":5,"dissatisfaction":4,"dissatisfied":4,"dissident":4,"dissolve":5,"distance":2,"distant":4,"distinction":5,"distinctive":5,"distinctly":3,"distinguish":4,"distinguished":4,"distort":5,"distortion":4,"distract":4,"distraction":4,"distress":5,"distressing":4,"distribute":4,"distribution":4,"distributor":4,"district":4,"disturb":4,"disturbance":3,"disturbing":5,"dive":3,"dive v. ,":4,"diver":3,"diverse":4,"diversion":4,"diversity":4,"divert":5,"divide":3,"divided":4,"divine":5,"diving":3,"division":4,"divorce":4,"divorced":2,"dizzy":2,"dj":3,"dna":4,"do":1,"do1 v.,":1,"doc":3,"dock":4,"doctor":1,"doctrine":5,"document":2,"documentary":3,"documentation":5,"does":1,"dog":1,"doing":1,"doll":1,"dollar":1,"dolphin":3,"domain":5,"domestic":4,"dominance":5,"dominant":4,"dominate":4,"donate":3,"donation":4,"done":2,"donkey":4,"donor":5,"doom":4,"door":1,"doorkeeper":4,"doorway":4,"dorm":4,"dormitory":4,"dose":5,"dot":4,"double":3,"double adj. ,":2,"doubly":4,"doubt":3,"doubtful":4,"dove":4,"down":1,"down adv. ,":1,"downfall":4,"download":2,"download v. ,":2,"downsize":4,"downstairs":1,"downtown":4,"downward":3,"downwards":4,"dowry":4,"doze":3,"dozen":3,"dozen n. ,":4,"dr":1,"draft":4,"drag":4,"drain":5,"drama":2,"dramatic":4,"dramatically":4,"drapery":4,"draught":4,"draw":1,"drawer":2,"drawing":2,"dread":4,"dreadful":4,"dream":2,"dreamy":4,"dress":1,"dressed":3,"drift":5,"drill":2,"drink":1,"drinkable":4,"drive":1,"driver":1,"driver's license":2,"driving":2,"driving licence":2,"droop":4,"drop":2,"dropout":4,"drought":4,"drown":5,"drug":2,"drugstore":2,"drum":3,"drunk":3,"dry":1,"dry adj. ,":2,"dual":5,"dub":5,"duck":2,"dude":3,"due":1,"due adj.dust":3,"duel":4,"dull":4,"dumb":5,"dump":4,"duo":5,"duplicate":4,"duplication":4,"duration":4,"during":1,"dust":2,"dustbin":3,"dusty":3,"duty":3,"duty-free":3,"duvet":3,"dvd":1,"dwarf":4,"dye":4,"dynamic":4,"dynasty":3,"e-mail":1,"each":1,"each other":1,"eager":5,"eagerly":4,"eagerness":3,"eagle":4,"ear":1,"earache":3,"early":1,"earn":2,"earnest":3,"earnings":5,"earring":2,"earth":2,"earthquake":3,"ease":5,"easily":2,"easily adv.education":2,"east":1,"eastern":3,"eastward":4,"easy":1,"easy-going":3,"easygoing":3,"eat":1,"echo v. ,":5,"eco":3,"ecological":5,"ecologically":4,"ecologist":4,"ecology":3,"economic":3,"economical":4,"economics":4,"economist":4,"economy":3,"ecosystem":3,"ecstasy":3,"ecstatic":4,"edge":3,"edit":4,"edition":4,"editor":3,"editorial":4,"educate":3,"educated":3,"education":2,"educational":3,"educator":5,"effect":2,"effective":3,"effectively":3,"effectiveness":5,"efficiency":5,"efficient":4,"efficiently":4,"effort":3,"egg":1,"ego":5,"eight":1,"eighteen":1,"eighty":1,"either":2,"elaborate":5,"elbow":4,"elderly":4,"elect":4,"election":3,"elective":4,"electoral":5,"electric":2,"electrical":2,"electrician":4,"electricity":2,"electron":3,"electronic":2,"electronically":4,"electronics":4,"elegance":4,"elegant":4,"elegantly":4,"element":3,"elemental":4,"elementary":4,"elephant":1,"elevate":5,"elevator":2,"eleven":1,"eligible":5,"eliminate":4,"elite":5,"eloquence":4,"eloquent":4,"else":1,"elsewhere":4,"email":1,"embark":5,"embarrass":3,"embarrassed":3,"embarrassing":3,"embarrassment":5,"embassy":5,"embed":5,"embody":5,"embrace":4,"emerge":4,"emergence":5,"emergency":3,"emission":4,"emotion":3,"emotional":4,"emotionally":4,"emperor":3,"emphasis":4,"emphasize":4,"emphatically":4,"empire":4,"empirical":5,"employ":2,"employee":2,"employer":2,"employment":3,"empower":5,"empty":2,"enable":4,"enact":5,"enclose":3,"encompass":5,"encounter":3,"encounter v. ,":4,"encourage":3,"encouragement":5,"encouraging":5,"encyclopaedia":3,"encyclopedia":3,"end":1,"endanger":3,"endangered":2,"endeavor":4,"endeavour":5,"ending":2,"endless":3,"endlessly":4,"endorse":5,"endorsement":5,"endurance":4,"endure":5,"enduring":4,"enemy":3,"energetic":2,"energy":2,"enforce":5,"enforcement":5,"engage":4,"engaged":3,"engagement":5,"engaging":5,"engine":2,"engineer":2,"engineering":3,"englishman":3,"engulf":4,"enhance":4,"enjoy":1,"enjoyable":4,"enjoyment":3,"enormous":2,"enough":1,"enquire":5,"enquiry":4,"enrich":5,"enrol":5,"enroll":4,"ensue":5,"ensure":4,"enter":2,"enterprise":5,"entertain":3,"entertainer":3,"entertaining":4,"entertainment":3,"enthusiasm":4,"enthusiast":5,"enthusiastic":4,"enthusiastically":4,"entire":4,"entirely":4,"entitle":5,"entity":5,"entrance":3,"entrepreneur":4,"entry":3,"envelope":4,"environment":2,"environmental":3,"environmentalist":3,"environmentally":4,"environmentally friendly":4,"envy":2,"epidemic":5,"episode":3,"equal":4,"equal adj. ,":3,"equality":5,"equally":3,"equation":5,"equip":4,"equipment":2,"equity":4,"equivalent":4,"era":4,"erect":5,"error":2,"erupt":4,"eruption":4,"escalate":5,"escalator":2,"escape":2,"escape v. ,":3,"especially":2,"essay":2,"essayist":4,"essence":5,"essential":3,"essentially":4,"establish":4,"establishment":5,"estate":4,"estimate":3,"estimate v. ,":4,"estimated":4,"eternal":5,"eternally":4,"eternity":3,"ethic":4,"ethnic":4,"euro":1,"evacuate":5,"evacuation":4,"evaluate":4,"evaluation":4,"even":4,"evening":1,"evenly":3,"event":1,"eventually":3,"ever":1,"everlasting":4,"every":1,"everybody":1,"everyday":2,"everyone":1,"everything":1,"everywhere":2,"evidence":2,"evident":4,"evidently":4,"evil":4,"evil adj. ,":4,"evoke":5,"evolution":4,"evolutionary":5,"evolve":4,"exact":2,"exactly":2,"exactness":4,"exaggerate":5,"exaggeration":4,"exalt":4,"exam":1,"examination":4,"examine":3,"examinee":4,"examiner":3,"example":1,"exceed":4,"excel":4,"excellence":5,"excellent":2,"except":2,"exception":4,"exceptional":5,"exceptionally":4,"excess":5,"excessive":4,"exchange":3,"exchange rate":3,"excited":1,"excitedly":3,"excitement":3,"exciting":1,"exclaim":4,"exclamation mark":4,"exclude":4,"exclusion":5,"exclusive":5,"exclusively":5,"excursion":4,"excuse":4,"execute":5,"execution":5,"executive":4,"exercise":1,"exert":5,"exhaust":4,"exhausted":3,"exhausting":4,"exhaustion":4,"exhibit":4,"exhibit v. ,":4,"exhibition":3,"exile":5,"exist":2,"existence":4,"existing":4,"exit":4,"exotic":4,"expand":3,"expansion":4,"expect":2,"expectation":4,"expected":3,"expedition":3,"expenditure":5,"expense":4,"expensive":1,"experience":2,"experienced":3,"experiment":2,"experimental":5,"expert":2,"expertise":4,"expire":5,"explain":1,"explanation":2,"explicit":5,"explicitly":5,"explode":3,"exploit":4,"exploitation":5,"exploration":4,"explore":3,"explorer":4,"explosion":3,"explosive":4,"explosive adj. ,":5,"export":3,"expose":4,"exposure":4,"express":2,"expression":2,"expressive":4,"exquisite":4,"extend":4,"extension":4,"extensive":4,"extensively":4,"extent":4,"external":4,"extinct":3,"extinction":3,"extra":1,"extract":5,"extraordinarily":4,"extraordinary":4,"extreme":2,"extreme sports":3,"extremely":2,"extremist":5,"exultant":4,"eye":1,"eyebrow":4,"eyelash":4,"eyelid":4,"eyesight":3,"fabric":4,"fabulous":4,"face":1,"face to face":3,"face-to-face":3,"facilitate":5,"facilities":4,"facility":4,"fact":1,"faction":5,"factor":2,"factory":2,"faculty":5,"fade":5,"fail":2,"failed":4,"failure":4,"faint":3,"fair":2,"fairly":3,"fairness":5,"fairy":1,"faith":4,"faithful":3,"fake":4,"fall":1,"fallen":3,"false":1,"falter":4,"fame":4,"familiar":3,"familiarise":4,"familiarize":4,"family":1,"famous":1,"fan":2,"fancy":3,"fantastic":1,"fantastically":4,"fantasy":4,"far":1,"faraway":3,"fare":4,"farewell":3,"farm":1,"farmer":1,"farming":2,"farmland":3,"farther":3,"farthest":3,"fascinate":3,"fascinated":4,"fascinating":3,"fascination":4,"fashion":2,"fashionable":3,"fast":1,"fast food":2,"fasten":3,"fat":1,"fatal":5,"fate":5,"father":1,"father-in-law":4,"fault":4,"faulty":4,"favor":2,"favorable":3,"favorite":1,"favour":3,"favourable":5,"favourite":1,"favourite adj. ,":1,"fax":3,"fear":2,"fearsome":4,"feast":3,"feat":5,"feather":4,"feature":2,"february":1,"fed up":4,"federal":4,"fee":4,"feed":2,"feedback":4,"feel":1,"feeling":1,"fellow":4,"female":2,"female adj. ,":2,"feminist adj. ,":5,"fence":3,"ferry":3,"ferryboat":4,"festival":1,"festive":3,"fetch":3,"fever":4,"feverishly":3,"few":1,"fiber":4,"fibre":5,"fiction":2,"fictional":4,"field":2,"fierce":5,"fifteen":1,"fifth":1,"fifty":1,"fight":1,"fight v. ,":2,"fighter":2,"fighting":3,"figurative":4,"figure":2,"file":3,"filial":4,"fill":1,"filling":3,"film":1,"film-maker":5,"filter":5,"final":1,"finally":2,"finance":4,"financial":3,"financially":4,"find":1,"finding":4,"fine":1,"finely":4,"finger":2,"fingernail":4,"finish":1,"fire":1,"fire brigade":4,"fire station":3,"firearm":5,"firefighter":4,"fireplace":4,"firework":4,"firm":4,"firmly":4,"firmness":4,"first":1,"first floor":3,"first lady":3,"first language":4,"first name":2,"first person":4,"first-floor":3,"firstly":2,"fiscal":4,"fish":1,"fisherman":2,"fishing":2,"fit":2,"fitness":3,"five":1,"fix":2,"fixed":4,"fixture":5,"flag":3,"flame":4,"flap":4,"flash":4,"flat":1,"flavor":3,"flavour":4,"flaw":5,"flawed":5,"flawless":4,"flax":4,"flea":2,"flee":5,"fleet":5,"flesh":4,"flexibility":5,"flexible":4,"flexibly":4,"flight":1,"flip":4,"float":4,"flock":3,"flood":3,"floor":1,"flour":3,"flourish":5,"flow":3,"flow v. ,":3,"flower":1,"flu":2,"fluency":4,"fluent":3,"fluently":3,"fluid":5,"flunk":3,"flute":3,"flutter":4,"fly":1,"flying":2,"focus":1,"focus v. ,":2,"fog":2,"foggy":1,"fold":3,"folder":2,"folding":4,"folk":3,"follow":1,"follower":4,"following":2,"folly":4,"fond":4,"fondly":4,"fondness":3,"food":1,"fool":4,"foolish":3,"foolishly":4,"foot":1,"footage":5,"football":1,"footballer":2,"footnote":4,"for":1,"forbid":4,"forbidden":3,"force":3,"forcefully":4,"forecast":4,"forehead":3,"foreign":2,"foreigner":5,"foreman":4,"foresee":4,"forest":2,"forestry":4,"forever":3,"forge":5,"forget":1,"forgive":4,"fork":2,"form":1,"formal":2,"formally":3,"format":4,"formation":4,"former":4,"formerly":4,"formidable":4,"formula":5,"formulate":5,"forth":5,"forthcoming":5,"fortnight":3,"fortunate":4,"fortunately":2,"fortune":4,"forty":1,"forum":4,"forward":2,"fossil":4,"foster":5,"foul":4,"found":4,"foundation":4,"founder":4,"fountain":3,"four":1,"fourteen":1,"fourth":1,"fox":4,"fraction":4,"fragile":5,"fragment":4,"fragrance":4,"frame":3,"framework":4,"franchise":5,"frank":2,"frankly":5,"frantically":4,"fraud":4,"freak":4,"free":1,"freedom":4,"freely":4,"freeze":3,"freezer":3,"freezing":3,"frequency":4,"frequent":4,"frequently":3,"fresh":2,"freshman":3,"friday":1,"fridge":2,"fried":2,"friend":1,"friendliness":3,"friendly":1,"friendship":3,"frigate":4,"fright":3,"frighten":3,"frightened":3,"frightening":3,"frog":2,"from":1,"front":1,"frontier":4,"frost":3,"frozen":3,"frugal":4,"fruit":1,"frustrated":5,"frustrating":5,"frustration":5,"fry":3,"frying pan":3,"fuel":3,"fulfil":4,"fulfill":4,"full":1,"full stop":3,"full-time":4,"fully":4,"fume":4,"fun":1,"function":3,"functional":5,"functionality":4,"fund":4,"fundamental":4,"fundamentally":4,"funding":4,"fundraising":5,"funeral":5,"funk":4,"funky":4,"funny":1,"fur":3,"furious":4,"furiously":4,"furnish":3,"furniture":2,"furor":4,"furore":4,"further":2,"furthermore":4,"furthest":3,"fuss":3,"future":1,"gaiety":4,"gain":3,"gain v. ,":4,"gall":3,"gallery":2,"gallon":5,"gambling":5,"game":1,"gaming":4,"gang":4,"gangster":4,"gaol":3,"gap":2,"garage":3,"garbage":1,"garden":1,"gardener":4,"gardening":3,"garlic":2,"garment":3,"gas":2,"gasp":4,"gate":2,"gateway":4,"gather":3,"gathering":5,"gaudy":4,"gay":4,"gaze":5,"gear":5,"gee":3,"gender":4,"gene":4,"general":2,"generalisation":4,"generalise":4,"generalization":4,"generalize":4,"generally":3,"generate":4,"generation":3,"generic":5,"generosity":4,"generous":3,"generously":4,"genetic":4,"genetically":3,"genetics":3,"genius":4,"genocide":5,"genre":4,"gentle":3,"gentleman":3,"gently":4,"genuine":4,"genuinely":4,"geographic":4,"geographical":3,"geography":1,"geology":3,"germ":4,"gesture":4,"get":1,"getaway":4,"ghetto":4,"ghost":3,"giant":3,"giant adj. ,":3,"gift":2,"gifted":3,"gig":4,"giggle":3,"ginger":3,"giraffe":3,"girl":1,"girlfriend":1,"give":1,"giveaway":4,"given":2,"glacis":4,"glad":3,"glamorous":4,"glamourous":4,"glance":5,"glare":4,"glass":1,"glasses":1,"gleam":4,"glee":4,"glide":3,"glimpse":5,"glint":3,"global":3,"global warming":4,"globalization":4,"globally":4,"globe":4,"glocal":4,"gloomy":4,"glorify":4,"glorious":5,"glory":5,"glove":3,"glow":4,"go":1,"goal":2,"goalkeeper":3,"goat":4,"god":2,"goddess":3,"godly":4,"gold":2,"golden":4,"golf":2,"golfer":3,"good":1,"good afternoon":1,"good morning":1,"good night":1,"good-looking":2,"goodbye":1,"goodness":4,"goods":3,"goodwill":4,"gook":4,"gorge":4,"gorgeous":4,"gorilla":3,"gossip":3,"govern":4,"governance":5,"government":2,"governmental":4,"governor":4,"gown":3,"grab":4,"grace":5,"graceful":3,"gracefulness":4,"grade":3,"gradual":4,"gradually":4,"graduate":3,"graduation":3,"grain":3,"gram":2,"grammar":1,"gramme":2,"grand":4,"grandchild":2,"granddad":2,"granddaughter":2,"grandfather":1,"grandma":1,"grandmother":1,"grandpa":1,"grandparent":1,"grandson":2,"granny":2,"grant":3,"grant v. ,":4,"grape":1,"graph":3,"graphic":4,"graphically":4,"graphics":4,"grasp":4,"grasp v. ,":5,"grass":2,"grateful":3,"gratitude":3,"grave":3,"grave (for dead person)":5,"grave (serious)":5,"gravestone":4,"gravitation":4,"gravity":5,"gravy":3,"gray":1,"great":1,"greatly":4,"greatness":4,"greedy":2,"green":1,"green adj. ,":1,"greenhouse":4,"greet":2,"greeting":3,"grey":1,"grey adj. ,":1,"grid":5,"grief":5,"grieve":4,"grill":3,"grilled":2,"grim":4,"grin":4,"grin v. ,":5,"grind":5,"grip":5,"grocery":4,"grocery store":2,"groom":3,"gross":5,"ground":2,"ground floor":3,"group":1,"grouping":3,"grow":1,"growing":4,"grown-up":4,"growth":3,"guarantee":3,"guarantee v. ,":4,"guard":3,"guerrilla":5,"guess":1,"guess v. ,":1,"guest":2,"guidance":5,"guide":2,"guidebook":2,"guideline":4,"guilt":5,"guilty":3,"guitar":1,"guitarist":3,"gulp":4,"gum":4,"gun":2,"gunshot":4,"gut":5,"guts":4,"guy":2,"gym":1,"gymnastic":4,"gymnastics":3,"habit":2,"habitant":4,"habitat":4,"had":1,"hail":5,"hair":1,"haircut":1,"hairdresser":3,"hairdryer":3,"hairy":4,"half":2,"half n. ,":1,"half-price":2,"halfway":5,"hall":2,"halt v. ,":5,"ham":2,"hamburger":1,"hammer":3,"hand":1,"hand-held":3,"handbag":2,"handball":3,"handful":5,"handicap":4,"handicapped":2,"handicraft":4,"handkerchief":3,"handle":2,"handle v. ,":4,"handling":5,"handout":4,"handrail":4,"handshake":3,"handsome":1,"handwriting":3,"handy":5,"hang":3,"hanging":3,"happen":1,"happily":2,"happiness":3,"happy":1,"harassment":5,"harbor":3,"harbour":4,"hard":1,"hard drive":4,"hard-working":3,"hardly":3,"hardship":3,"hardware":5,"harm":4,"harmful":2,"harmful adj.hearing":4,"harmless":4,"harmony":5,"harness":3,"harrow":4,"harsh":5,"harvest":5,"has":1,"haste":4,"hastily":4,"hasty":3,"hat":1,"hatch":3,"hatching":4,"hate":1,"hatred":5,"haunt":5,"haunting":4,"have":1,"have to":1,"haven":3,"hay":4,"hazard":5,"hazardous":4,"he":1,"head":1,"headache":2,"headline":3,"headphone":2,"headquarters":4,"headteacher":2,"heal":4,"healing":3,"health":1,"health care":4,"healthcare":4,"healthy":1,"heap":4,"hear":1,"hearing":3,"heart":2,"heart attack":3,"heart-warming":4,"heartbreaking":4,"hearted":3,"heartwarming":4,"hearty":3,"heat":2,"heater":3,"heating":3,"heaven":4,"heavenly":3,"heavily":3,"heavy":2,"hedge":4,"heel":4,"height":2,"heighten":5,"helicopter":3,"hell":4,"hello":1,"helmet":4,"help":1,"help v. ,":1,"helper":4,"helpful":2,"helpless":3,"hemp":4,"hence":4,"her":1,"her pron. ,":1,"herb":4,"herd":3,"here":1,"heritage":5,"hero":2,"hers":2,"herself":2,"hesitate":4,"hesitation":4,"hey":1,"hi":1,"hi-tech":4,"hidden":4,"hide":2,"hierarchy":5,"high":1,"high school":2,"high-profile":5,"high-tech":4,"highlight":3,"highlight v. ,":3,"highly":3,"highway":4,"hijack":4,"hike":2,"hiking":2,"hilarious":4,"hilarious adj.hip":4,"hill":2,"him":1,"himself":2,"hint":5,"hip":3,"hip hop":2,"hip-hop":2,"hiphop":2,"hire":3,"his":1,"historian":4,"historic":3,"historical":3,"history":1,"hit":2,"hit v. ,":2,"hiv":3,"hobby":1,"hockey":2,"hold":2,"holder":4,"hole":2,"holiday":1,"hollow":4,"holocaust":4,"holy":4,"home":1,"homeland":5,"homeless":4,"hometown":1,"homeward":4,"homework":1,"hone":4,"honest":3,"honestly":3,"honesty":4,"honey":2,"honeymoon":3,"honor":2,"honorable":4,"honour":4,"honourable":4,"hood":4,"hook":4,"hop":3,"hope":1,"hopeful":3,"hopeful adj.horizon":5,"hopefully":4,"hopeless":3,"horizon":3,"horn":5,"horrible":3,"horrify":3,"horror":3,"horse":1,"hospice":4,"hospitable":4,"hospital":1,"hospitalise":4,"hospitality":4,"hospitalize":4,"host":3,"hostage":5,"hostel":3,"hostile":5,"hostility":5,"hot":1,"hotel":1,"hour":1,"hourly":4,"house":1,"household":4,"housekeeper":4,"housemaster":4,"housewife":4,"housework":3,"housing":4,"hover":4,"how":1,"however":1,"hug":2,"huge":2,"hugely":4,"human":2,"human adj. ,":2,"human rights":4,"humane":4,"humanise":4,"humanist":4,"humanitarian":5,"humanity":5,"humanize":4,"humble":5,"humbug":4,"humid":3,"humiliate":4,"humiliating":4,"humiliation":4,"humor":3,"humorous":4,"humour":4,"hundred":1,"hunger":4,"hungry":1,"hunt":3,"hunter":2,"hunting":4,"hurricane":3,"hurriedly":3,"hurry":3,"hurt":2,"husband":1,"hush":4,"hut":3,"hybrid":4,"hydrogen":5,"hygiene":4,"hyperbole":4,"hyphen":4,"hypothesis":4,"i":1,"ice":1,"ice cream":1,"ice hockey":3,"ice skating":3,"iceman":4,"icon":4,"icy":4,"id":4,"id card":2,"idea":1,"ideal":2,"ideally":4,"identical":4,"identification":5,"identify":2,"identity":3,"identity card":3,"ideological":5,"ideology":5,"idiom":3,"idiot":5,"idle":4,"idol":3,"idolise":4,"idolize":4,"if":1,"ignorance":5,"ignorant":4,"ignore":3,"ill":2,"illegal":3,"illegally":3,"illness":2,"illuminate":3,"illusion":4,"illustrate":4,"illustration":4,"image":2,"imagery":5,"imaginary":3,"imagination":4,"imagine":1,"imitate":3,"imitation":4,"immediate":3,"immediately":3,"immense":5,"immerse":4,"immigrant":3,"immigrate":3,"immigration":4,"imminent":5,"immoral":4,"immortal":4,"immortality":4,"immune":4,"impact":3,"impair":3,"impartial":4,"impatient":4,"impatiently":4,"imperative":4,"impermanent":4,"implement":4,"implementation":5,"implication":4,"imply":4,"impolite":4,"impolitely":4,"import":3,"importance":3,"important":1,"importantly":2,"impose":4,"impossibility":4,"impossible":2,"impractical":4,"impress":4,"impressed":4,"impression":3,"impressionism":4,"impressionist":4,"impressive":3,"imprison":5,"imprisonment":5,"improbable":4,"improper":3,"improperly":4,"improve":1,"improved":4,"improvement":3,"impulse":4,"impulsive":4,"in":1,"inability":5,"inaccurate":4,"inadequate":5,"inanimate":4,"inappropriate":5,"inborn":4,"incense":4,"incentive":4,"inch":4,"incidence":5,"incident":4,"inclined":5,"include":1,"included":2,"including":2,"inclusion":5,"income":4,"inconvenient":3,"incorporate":4,"incorrect":4,"increase":2,"increase v. ,":2,"increasingly":4,"incredible":2,"incredibly":3,"incur":5,"incurable":4,"indebted":4,"indeed":3,"indefinite article":3,"indent":4,"independence":4,"independent":2,"independently":4,"indescribable":4,"index":4,"indicate":3,"indication":4,"indicator":5,"indictment":5,"indifferent":4,"indigenous":5,"indignity":4,"indirect":3,"indirectly":3,"indispensable":4,"individual":2,"indoor":3,"indoors":3,"induce":5,"indulge":5,"indulgent":4,"industrial":4,"industrialise":4,"industrialize":4,"industry":2,"ineffective":4,"inequality":5,"inert":4,"inevitable":4,"inevitably":4,"inexpensive":2,"inexperienced":4,"infamous":5,"infant":5,"infect":5,"infected":4,"infection":4,"infectious":4,"infer":4,"inference":4,"infinitive":3,"inflammation":4,"inflammatory":4,"inflate":4,"inflation":4,"inflict":5,"influence":3,"influential":5,"influenza":4,"info":4,"inform":4,"informal":2,"information":1,"informative":3,"infrastructure":4,"infringe":4,"infringement":4,"ingredient":3,"inhabit":4,"inhabitant":4,"inhale":3,"inherent":5,"inherit":4,"inhibit":5,"initial":4,"initially":4,"initiate":5,"initiative":4,"inject":5,"injection":5,"injure":3,"injured":3,"injury":2,"injustice":5,"ink":4,"inmate":5,"innate":4,"inner":4,"innermost":3,"innocent":3,"innocently":4,"innovation":4,"innovative":4,"innovator":3,"input":4,"inquire":4,"inquiry":3,"insane":3,"inscribe":3,"inscription":3,"insect":2,"inseparable":4,"insert":4,"insertion":5,"inside":2,"insider":5,"insight":4,"insist":4,"inspect":5,"inspection":5,"inspector":4,"inspiration":5,"inspirational":4,"inspire":4,"instal":3,"install":4,"installation":4,"instance":4,"instant":4,"instantly":4,"instead":2,"instead of":3,"instil":4,"instill":4,"instinct":5,"institute":4,"institution":4,"institutional":5,"instruct":5,"instruction":2,"instructor":2,"instrument":2,"instrumental":5,"insufficient":5,"insult":5,"insurance":4,"intact":5,"intake":5,"integral":5,"integrate":4,"integrated":5,"integration":5,"integrity":5,"intellectual":4,"intelligence":3,"intelligent":2,"intend":3,"intended":4,"intense":4,"intensify":5,"intensity":5,"intensive":5,"intent":5,"intention":3,"intentionally":3,"interact":4,"interaction":4,"interactive":5,"interest":1,"interested":1,"interesting":1,"interface":5,"interfere":5,"interim":5,"interior":4,"interior adj. ,":5,"intermediate":5,"intermission":3,"internal":4,"international":2,"internationally":3,"internet":1,"interpersonal":4,"interpret":4,"interpretation":4,"interpreter":4,"interrupt":4,"interruption":4,"intersection":4,"interval":4,"intervene":5,"intervention":5,"interview":1,"interviewee":3,"interviewer":1,"intimate":5,"into":1,"intransitive":4,"intravenous":4,"intriguing":5,"introduce":1,"introduction":2,"intrude":4,"intruder":4,"intrusion":4,"invade":4,"invariable":4,"invariably":4,"invasion":4,"invent":2,"invention":2,"inventor":4,"inverted commas":4,"invest":3,"investigate":3,"investigation":4,"investigator":5,"investment":4,"investor":4,"invisible":5,"invitation":2,"invite":2,"invitingly":4,"invoke":5,"involuntarily":3,"involve":2,"involved":3,"involvement":5,"iron":3,"ironic":5,"ironically":5,"ironing":3,"irony":5,"irrational":4,"irregular":3,"irrelevant":5,"irresistible":4,"irresistibly":4,"irresponsible":4,"irritate":3,"irritated":4,"irritating":4,"irritation":4,"is":1,"island":1,"islander":4,"isle":3,"isolate":4,"isolated":4,"isolation":5,"issue":3,"it":1,"italicise":4,"italicize":4,"itch":4,"item":2,"its":1,"itself":2,"ivory":3,"jacket":1,"jade":3,"jail":4,"jam":2,"january":1,"jar":3,"jaw":4,"jazz":2,"jealous":3,"jealously":4,"jeans":1,"jelly":2,"jeopardise":4,"jeopardize":4,"jet":4,"jewel":3,"jeweler":4,"jeweller":4,"jewellery":2,"jewelry":1,"job":1,"jog":3,"jogging":3,"join":1,"joint":3,"joint adj. ,":4,"joke":2,"journal":3,"journalism":4,"journalist":2,"journey":1,"joy":4,"judge":3,"judgement":4,"judgment":3,"judicial":5,"judo":4,"jug":3,"juice":1,"juicy":3,"july":1,"jump":1,"jump v. ,":2,"jumper":3,"junction":5,"june":1,"jungle":3,"junior":4,"junk":2,"junk food":4,"jurisdiction":5,"juror":4,"jury":4,"just":1,"justice":4,"justification":5,"justify":4,"kangaroo":4,"karaoke":4,"keen":3,"keep":1,"keeper":4,"kerosene":4,"kettle":3,"key":1,"keyboard":3,"keystroke":4,"kick":1,"kick v. ,":3,"kid":2,"kidnap":5,"kidney":5,"kill":2,"killer":2,"killing":3,"kilo":2,"kilogram":2,"kilogramme":2,"kilometer":2,"kilometre":1,"kind":1,"kind (caring)":3,"kind (type)":1,"kindly":2,"kindness":3,"king":2,"kingdom":5,"kiss":1,"kiss v. ,":3,"kit":4,"kitchen":1,"kite":1,"kitten":3,"knee":2,"kneel":4,"knife":2,"knit":3,"knock":2,"knot":4,"know":1,"knowingly":4,"knowledge":2,"known":4,"lab":2,"label":3,"labor":2,"laboratory":3,"laborer":4,"labour":4,"labourer":4,"lack":3,"lad":5,"ladder":4,"lady":2,"lake":2,"lamb":3,"lame":4,"lamp":2,"lance":4,"land":1,"landing":4,"landlady":4,"landlord":5,"landmark":5,"landscape":4,"landslide":4,"lane":4,"language":1,"lap":5,"laptop":2,"large":1,"large-scale":5,"largely":4,"lark":4,"laser":5,"last":2,"last minute":4,"last name":1,"last-minute":4,"last1 (final)":1,"last1 (final) adv. ,":2,"last1 (taking time)":2,"lasting":3,"lastly":4,"late":1,"latecomer":3,"lately":4,"later":1,"latest":3,"latter":2,"latter adj. ,":5,"laugh":1,"laugh v. ,":1,"laughter":2,"launch":3,"launch v. ,":4,"laundry":4,"lava":4,"law":2,"lawful":3,"lawmaker":4,"lawn":5,"lawsuit":5,"lawyer":2,"lay":3,"layabout":4,"layer":3,"layout":5,"laziness":2,"lazy":2,"lead 1":2,"leader":2,"leadership":4,"leading":3,"leaf":3,"leaflet":4,"league":4,"leak":4,"leak v. ,":5,"lean":4,"leap":3,"leap v. ,":5,"learn":1,"learner":2,"learning":2,"lease":4,"leash":4,"least":2,"leather":3,"leave":1,"lecture":2,"lecturer":4,"leek":4,"left":1,"left adj. , adv. ,":1,"left-hand":2,"leg":1,"legacy":5,"legal":3,"legally":3,"legend":4,"legendary":5,"legislate":4,"legislation":5,"legislative":5,"legislator":4,"legislature":5,"legitimate":5,"leisure":3,"leisurely":4,"lemon":2,"lemonade":2,"lend":2,"length":3,"lengthen":4,"lengthy":5,"lens":4,"leopard":4,"lesbian":5,"less":2,"lessen":3,"lesser":5,"lesson":1,"lest":4,"let":1,"lethal":5,"letter":1,"lettuce":3,"level":2,"liable":5,"liar":3,"liberal":4,"liberal adj. ,":5,"liberate":3,"liberation":5,"liberty":5,"librarian":3,"library":1,"licence":4,"license":5,"lick":4,"lid":4,"lie":2,"lie1":1,"lie2 (tell a lie) v. ,":3,"life":1,"lifeguard":3,"lifeless":4,"lifelong":5,"lifestyle":2,"lifetime":4,"lift":3,"lift v. ,":2,"light":1,"light (from the sun/a lamp)":1,"light (not heavy)":2,"lighten":4,"lighter":3,"lighting":4,"lightly":3,"lightning":3,"like":1,"like (find sb/sth pleasant)":1,"like (similar)":1,"likelihood":5,"likely":2,"likeness":3,"likewise":4,"lily":1,"limb":5,"limit":3,"limitation":4,"limited":4,"limp":3,"line":1,"line-up":5,"linear":5,"linen":4,"liner":4,"ling":4,"linger":5,"link":2,"lion":1,"lip":3,"liquid":3,"list":1,"listen":1,"listener":2,"listing":5,"liter":2,"literacy":5,"literal":4,"literally":4,"literary":4,"literature":3,"litre":4,"litter":4,"little":2,"little adj. ,":1,"live":1,"live1":1,"live2":3,"lively":4,"liver":5,"living":1,"living adj. ,":3,"living room":1,"load":4,"loaf":3,"loan":4,"lobby":5,"local":1,"locate":3,"located":3,"location":3,"lock":2,"lodge":3,"log":5,"logic":5,"logical":4,"logo":4,"loneliness":4,"lonely":3,"long 1":1,"long-distance":4,"long-standing":5,"long-term":4,"long-time":5,"look":1,"loom":5,"loop":5,"loose":4,"loosely":4,"lord":4,"lorry":2,"lose":1,"loss":3,"lost":2,"lot":1,"lot pron. ,":1,"lottery":4,"loud":2,"loudly":2,"loudspeaker":3,"lousy":4,"love":1,"lovely":2,"lover":2,"lovingly":3,"low":2,"lower":4,"lowland":4,"loyal":4,"loyalty":5,"luck":2,"luckily":2,"lucky":2,"lucrative":4,"luggage":3,"lunch":1,"lunchtime":2,"lung":4,"lush":4,"luxurious":4,"luxury":3,"lyric":4,"lyrics":4,"machine":1,"machinery":5,"mad":3,"madam":4,"madame":4,"madness":4,"maestro":4,"magazine":1,"magic":3,"magical":3,"magician":3,"magistrate":5,"magnetic":5,"magnificent":4,"magnify":4,"magnitude":5,"mail":2,"mailbox":3,"main":1,"main course":2,"mainland":5,"mainly":3,"mainstream":5,"maintain":4,"maintenance":5,"major":2,"majority":4,"make":1,"make-up":4,"maker":2,"making":4,"malady":4,"malaria":4,"male":2,"male adj. ,":2,"mall":2,"mama":4,"mamma":4,"man":1,"manage":2,"management":3,"manager":2,"mandate":5,"mandatory":5,"mango":4,"manifest":5,"manipulate":5,"manipulation":5,"mankind":3,"manner":2,"mansion":4,"manual":4,"manufacture":4,"manufacturer":4,"manufacturing":4,"manuscript":5,"many":1,"map":1,"maple":3,"marathon":4,"marble":3,"march":1,"margin":4,"marginal":5,"marine":5,"mark":2,"mark v. ,":2,"marked":3,"marker":4,"market":1,"marketing":3,"marketplace":5,"marriage":3,"married":1,"marry":2,"martial":4,"martial art":4,"marvellous":2,"marvelous":2,"mash":3,"mask":5,"mass":4,"massacre":5,"massage":4,"masseur":4,"massive":4,"master":4,"masterpiece":4,"mastery":4,"match":1,"match (contest/correspond)":1,"matching":4,"mate":4,"material":2,"math":1,"mathematical":5,"mathematician":3,"mathematics":2,"maths":2,"matter":2,"mature":4,"mature adj. ,":5,"mausoleum":4,"max":2,"maximize":5,"maximum":3,"maximum adj. ,":4,"may":1,"maybe":1,"mayor":4,"me":1,"meal":1,"mean":1,"meaning":1,"meaningful":5,"means":4,"meantime":5,"meanwhile":3,"measure":3,"measure v. ,":3,"measurement":4,"meat":1,"mechanic":4,"mechanical":4,"mechanise":4,"mechanism":4,"mechanize":4,"medal":4,"media":2,"mediaeval":4,"medical":2,"medication":4,"medicine":2,"medieval":5,"mediocre":4,"meditate":3,"meditation":5,"mediterranean":3,"medium":3,"meet":1,"meeting":1,"melody":5,"melon":2,"melt":4,"member":1,"membership":4,"memo":5,"memoir":5,"memorable":4,"memorial":5,"memorise":3,"memorize":3,"memory":2,"mend":3,"mental":3,"mentally":3,"mention":2,"mentor":5,"menu":1,"merchandise":4,"merchant":5,"mercy":5,"mere":5,"merely":5,"merge":5,"merger":5,"merit":5,"merry":1,"mess":3,"message":1,"message board":3,"messenger":4,"messy":3,"metal":2,"metaphor":4,"meter":2,"method":2,"methodology":5,"metre":1,"metric":4,"micro":4,"microbe":4,"microcomputer":4,"micrometer":4,"micrometre":4,"microorganism":4,"microphone":4,"microscope":4,"microscopic":4,"microscopy":4,"microwave":4,"midday":2,"middle":2,"middle-aged":3,"midnight":1,"midst":5,"might":2,"mighty":4,"migration":5,"mild":3,"mile":1,"militant":5,"military":2,"military adj. ,":4,"militia":5,"milk":1,"mill":5,"millimeter":4,"millimetre":4,"million":1,"millionaire":4,"mimic":4,"mind":2,"mine":1,"mine (belongs to me)":2,"mine (hole in the ground)":3,"miner":4,"mineral":4,"mineral water":2,"miniature":4,"minimal":5,"minimise":3,"minimize":5,"minimum":3,"minimum adj. ,":4,"mining":5,"minister":4,"ministry":5,"minor":4,"minority":4,"mint":4,"minus":3,"minute 1":1,"miracle":5,"mirror":2,"mischief":3,"misconception":4,"miserable":4,"misery":5,"misfortune":4,"mislead":3,"misleading":5,"miss":1,"missile":5,"missing":2,"mission":4,"mist":4,"mistake":1,"mistreat":4,"mistrustful":4,"misty":3,"misunderstand":4,"misunderstanding":3,"mix":2,"mix v. ,":3,"mixed":4,"mixing bowl":3,"mixture":3,"mob":5,"mobile":1,"mobile adj. ,":2,"mobile phone":1,"mobility":5,"mobilize":5,"mock":4,"modal":3,"modal verb":3,"mode":4,"model":1,"modem":3,"moderate":5,"modern":1,"modernisation":4,"modernise":4,"modernization":4,"modernize":4,"modest":4,"modification":5,"modify":4,"mogul":4,"moisture":3,"mold":4,"molecule":3,"mom":1,"moment":1,"momentarily":4,"momentary":4,"momentum":5,"mommie":1,"mommy":1,"monastery":4,"monday":1,"money":1,"monitor":4,"monk":5,"monkey":2,"monopoly":5,"monster":4,"month":1,"monthly":4,"monument":4,"mood":3,"moody":4,"moon":2,"moonlight":4,"moonscape":4,"moral":3,"moral adj. ,":4,"morality":5,"morally":4,"more":1,"moreover":4,"morning":1,"mortal":4,"mortar":4,"mortgage":4,"mortify":4,"mosque":4,"mosquito":3,"moss":3,"most":1,"mostly":2,"mother":1,"mother-in-law":4,"motherland":3,"motion":4,"motionless":3,"motivate":4,"motivated":4,"motivation":4,"motive":5,"motor":4,"motorbike":4,"motorcycle":2,"motorist":5,"motorway":2,"motto":3,"mould":4,"mount":4,"mountain":1,"mountaintop":3,"mourn":3,"mournful":4,"mouse":1,"moustache":4,"mouth":1,"move":1,"movement":2,"mover":4,"movie":1,"moving":4,"mp3 player":2,"mr":1,"mrs":1,"ms":2,"much":1,"mud":3,"muddy":4,"mug":2,"mule":3,"multiple":4,"multiply":4,"mum":1,"mumble":4,"municipal":5,"murder":3,"murderer":3,"murmur":4,"muscle":3,"muse":4,"museum":1,"mushroom":2,"music":1,"musical":2,"musician":2,"must":1,"mustache":4,"mustard":3,"mutability":4,"mutable":4,"mutter":4,"mutton":4,"mutual":5,"my":1,"myself":2,"mysterious":4,"mystery":3,"mystify":4,"myth":4,"nail":3,"naked":4,"name":1,"namely":5,"nano":4,"nap":3,"napkin":2,"narcissistic":4,"narrate":3,"narrative":3,"narrator":4,"narrow":2,"narrowly":4,"nasty":4,"nation":3,"national":2,"nationalist":3,"nationality":1,"nationwide":5,"native":2,"native adj. ,":3,"native speaker":4,"natural":1,"naturally":3,"nature":2,"naughty":4,"naval":5,"navigate":4,"navigation":4,"navy":4,"navy blue":3,"near":1,"nearby":4,"nearly":2,"neat":4,"necessarily":3,"necessary":2,"necessity":4,"neck":2,"necklace":3,"nectar":3,"need":1,"needle":3,"needless":4,"needy":4,"negative":1,"negatively":4,"neglect":4,"neglect v. ,":5,"negotiate":4,"negotiation":4,"neighbor":1,"neighborhood":3,"neighboring":4,"neighbour":1,"neighbourhood":3,"neighbouring":4,"neither":2,"nephew":3,"nerve":4,"nerves":4,"nervous":2,"nervously":4,"nervousness":3,"ness":3,"nest":5,"net":3,"net surfer":4,"netsurfer":4,"network":2,"neurosis":4,"neutral":4,"never":1,"nevertheless":4,"new":1,"newborn":3,"newcomer":3,"newly":4,"news":1,"newscaster":4,"newsletter":5,"newspaper":1,"newsworthy":4,"next":1,"next door":3,"next to":1,"next-door":3,"nice":1,"nicely":4,"niche":5,"nickname":3,"niece":3,"night":1,"nightclub":4,"nightlife":3,"nightmare":4,"nine":1,"nineteen":1,"ninety":1,"no":1,"no exclam. ,":1,"no one":2,"nobility":4,"noble":5,"nobleman":4,"nobody":1,"nod":5,"noise":2,"noisily":3,"noisy":2,"nomad":4,"nominate":5,"nomination":5,"nominee":5,"non-profit":5,"non-smoking":4,"none":2,"nonetheless":5,"nonprofessional":4,"nonsense":5,"noon":5,"nor":3,"norm":4,"normal":2,"normally":2,"north":1,"northeast":3,"northeastern":3,"northern":3,"northward":4,"northwest":3,"northwestern":3,"nose":1,"nostril":4,"not":1,"notable":5,"notably":5,"note":1,"notebook":4,"nothing":1,"notice":2,"notice v. ,":2,"noticeable":3,"noticeboard":3,"notify":5,"notion":4,"notorious":5,"nought":4,"noun":2,"nourish":4,"nourishment":4,"novel":2,"novelist":4,"novelty":4,"november":1,"now":1,"nowadays":4,"nowhere":2,"nuclear":3,"nucleus":3,"nuisance":4,"number":1,"numerical":4,"numerous":4,"nurse":1,"nursery":5,"nursing":4,"nut":2,"nutrient":3,"nutrition":4,"nutritious":3,"nutshell":4,"o'clock":1,"oak":2,"oath":4,"obedience":4,"obedient":4,"obesity":4,"obey":4,"obituary":4,"object":1,"objection":5,"objective":4,"obligation":4,"oblige":5,"observation":4,"observe":4,"observer":4,"obsess":5,"obsession":5,"obsessive":4,"obstacle":4,"obtain":4,"obvious":3,"obviously":3,"occasion":3,"occasional":5,"occasionally":4,"occupation":4,"occupy":4,"occur":3,"occurrence":5,"ocean":2,"october":1,"odd":3,"odds":5,"of":1,"off":1,"off adv. ,":1,"offence":4,"offend":4,"offender":4,"offense":4,"offensive":4,"offer":2,"offer v. ,":2,"offering":5,"offhand":4,"office":1,"officer":2,"official":3,"officially":3,"offshore":4,"offspring":5,"often":1,"oh":1,"oil":2,"oily":3,"ointment":4,"ok":1,"okay":1,"old":1,"old-fashioned":3,"olive":4,"olive oil":2,"olympia":4,"olympiad":4,"olympic":2,"olympics":1,"omelet":2,"omelette":2,"on":1,"on to":3,"once":1,"one":1,"one number/det. ,":1,"oneself":3,"ongoing":4,"onion":1,"online":1,"only":1,"onstage":3,"onto":2,"open":1,"open adj. ,":1,"opening":4,"openly":4,"opera":4,"operate":4,"operation":3,"operational":5,"operator":4,"opinion":1,"opponent":4,"opportunity":2,"oppose":2,"opposed":4,"opposite":2,"opposite adj. , n.,":1,"opposition":4,"oppress":3,"oppression":3,"opt":5,"optical":5,"optimism":5,"optimist":4,"optimistic":4,"option":2,"optional":4,"or":1,"oral":5,"orange":1,"orator":4,"orbit":3,"orchestra":4,"orchestral":4,"orchid":4,"order":1,"orderly":3,"ordinary":2,"organ":4,"organic":4,"organisation":3,"organise":2,"organised":2,"organiser":4,"organism":3,"organization":2,"organizational":5,"organize":2,"organized":3,"organizer":3,"orientation":5,"origin":4,"original":2,"originality":4,"originally":3,"originate":5,"ornament":4,"orphan":2,"other":1,"otherwise":4,"ought":3,"ought to":3,"ounce":4,"our":1,"ours":3,"ourselves":2,"out":1,"out of":2,"out-of-date":3,"outback":4,"outbreak":5,"outcome":4,"outdistance":4,"outdo":4,"outdoor":3,"outdoors":3,"outer":4,"outfit":4,"outgrow":4,"outing":5,"outlaw":3,"outlet":5,"outline":4,"outlive":4,"outlook":5,"outpatient":4,"output":4,"outrage":5,"outrageous":4,"outshine":4,"outside":1,"outsider":5,"outskirts":4,"outstanding":3,"outstanding adj.overcome":4,"outward":3,"outwardly":4,"outweigh":3,"oval":4,"oven":2,"over":1,"overall":4,"overboard":4,"overbook":4,"overcoat":4,"overcome":3,"overemphasise":4,"overemphasize":4,"overestimate":4,"overhear":4,"overjoyed":3,"overlap":4,"overlook":5,"overly":5,"overnight":4,"overseas":2,"overseas adv. ,":4,"oversee":5,"overshadow":4,"oversize":4,"overstep":4,"overtake":4,"overthrow":4,"overtime":4,"overturn":5,"overweight":2,"overwhelm":5,"overwhelming":5,"overwork":3,"ow":4,"owe":4,"owing":3,"owing to":4,"owl":4,"own":1,"owner":2,"ownership":4,"ox":4,"oxygen":4,"ozone":4,"oâ€™clock":1,"p.m.":1,"pa":4,"pace":4,"pacific":2,"pack":2,"package":3,"packed":4,"packet":4,"packing":3,"pad":5,"paddle":3,"page":1,"paid":3,"pain":2,"painful":3,"paint":1,"paint v. ,":1,"paintbrush":4,"painter":2,"painting":1,"pair":1,"pajamas":4,"pal":2,"palace":2,"pale":3,"pallet":4,"palm":4,"pan":3,"pancake":4,"pandemic":4,"panel":4,"panic":4,"pants":2,"papaya":4,"paper":1,"paperless":4,"paperwork":4,"parachute":3,"parade":4,"paradise":3,"paradox":4,"paragraph":1,"parallel adj. ,":4,"paralyse":3,"paralysis":4,"paralyze":3,"paramedic":4,"parameter":5,"paratrooper":4,"parcel":3,"pardon":1,"parent":1,"parental":5,"parish":5,"park":1,"parking":2,"parliament":4,"parliamentary":5,"parrot":3,"part":1,"part-time":4,"partial":5,"partially":5,"participant":4,"participate":3,"participation":4,"participle":3,"particle":4,"particular":2,"particularly":3,"partisan":4,"partly":4,"partner":1,"partnership":4,"party":1,"pass":2,"passage":4,"passenger":2,"passing":5,"passion":3,"passionate":4,"passionately":4,"passive":5,"passport":1,"password":4,"past":2,"past adj. , n.,":1,"pasta":2,"pastor":5,"pastoral":4,"patch":5,"patent":5,"path":3,"pathway":5,"patience":4,"patient":2,"patiently":4,"patriot":4,"patriotic":4,"patriotism":4,"patrol":5,"patron":5,"pattern":2,"pause":3,"pause v. ,":4,"pave":4,"pavement":4,"paw":4,"pawnbroker":4,"pawnshop":4,"pay":1,"payment":3,"pc":2,"pea":2,"peace":2,"peaceful":3,"peacefully":4,"peach":4,"peak":5,"peanut":3,"pear":2,"pearl":4,"peasant":5,"pebble":4,"peculiar":5,"pedal":4,"pedantic":4,"pedestrian":4,"pee":4,"peel":4,"peep":4,"peer":4,"peg":4,"pen":1,"pen friend":2,"penalise":4,"penalize":4,"penalty":4,"pence":2,"pencil":1,"penetrate":4,"penfriend":2,"penguin":4,"penicillin":4,"penniless":3,"penny":2,"pension 1":4,"pentagon":4,"people":1,"pepper":1,"per":2,"per cent":2,"perceive":4,"percent":3,"percentage":3,"perception":4,"perfect":1,"perfectly":2,"perform":2,"performance":3,"performer":3,"perfume":2,"perhaps":2,"period":1,"permanence":4,"permanent":4,"permanently":4,"permeate":4,"permission":2,"permit":3,"permit v. ,":4,"perseverance":4,"persist":5,"persistence":4,"persistent":5,"person":1,"personal":1,"personality":2,"personally":3,"personification":4,"personify":4,"personnel":5,"perspective":4,"perspiration":4,"persuade":3,"persuasion":4,"persuasive":3,"pessimist":4,"pessimistic":4,"pet":2,"petrified":4,"petrol":2,"petrol station":2,"petty":4,"ph":4,"phantom":3,"pharmacist":4,"pharmacy":3,"phase":4,"phenomenon":4,"philosopher":5,"philosophical":5,"philosophy":4,"phoenix":3,"phone":1,"photo":1,"photocopy":3,"photograph":1,"photographer":3,"photography":3,"phrasal verb":3,"phrase":1,"physical":2,"physically":2,"physician":5,"physics":2,"pi":4,"piano":1,"pick":2,"pickle":4,"picky":4,"picnic":1,"picture":1,"picturesque":4,"pie":3,"piece":1,"piety":3,"pig":1,"pile":4,"pilgrim":2,"pill":4,"pillow":3,"pillowcase":4,"pilot":2,"pin":3,"pine":4,"pineapple":3,"pink":1,"pink adj. ,":1,"pint":4,"pioneer":5,"pipe":3,"pipeline":5,"piracy":4,"pirate":5,"pit":5,"pitch":4,"pity":4,"pizza":1,"place":3,"placement":4,"plague":4,"plain":4,"plan":1,"plane":1,"planet":2,"planning":3,"plant":1,"plastic":2,"plate":2,"platform":2,"play":1,"play v. ,":1,"player":1,"playful":2,"playground":2,"playmate":4,"playwright":4,"plea":5,"plead":5,"pleasant":3,"pleasantly":3,"please":1,"pleased":2,"pleasing":2,"pleasure":3,"pledge v. ,":5,"plenty":3,"plot":3,"pluck":4,"plug":3,"plug v. ,":5,"plum":4,"plumber":4,"plunge":5,"plural":2,"plus 1":3,"plus 1 adj. , n.,":4,"pm":1,"pneumonia":4,"pocket":2,"pocket money":3,"poem":3,"poet":3,"poetry":3,"point":1,"point of view":4,"pointed":4,"pointless":4,"poison":3,"poisonous":3,"polar bear":4,"pole":5,"police":1,"police officer":2,"police station":2,"policeman":1,"policewoman":2,"policy":3,"polio":4,"polish":4,"polite":2,"politely":3,"politeness":4,"political":3,"politically":4,"politician":3,"politics":3,"polity":4,"poll":5,"pollutant":3,"pollute":2,"pollution":2,"polo":4,"pond":5,"ponder":4,"pool":1,"poor":1,"pop":2,"popcorn":3,"popular":1,"popularise":4,"popularity":4,"popularize":4,"population":2,"porch":4,"pork":3,"port":3,"portfolio":5,"portion":4,"portrait":3,"portray":5,"pose":4,"posh":4,"position":2,"positive":1,"positively":3,"possess":4,"possessed":4,"possession":2,"possessive":3,"possibility":2,"possible":1,"possibly":3,"post":1,"post office":2,"post-war":5,"postal":4,"postcard":3,"poster":2,"postman":3,"postpone":5,"pot":3,"potato":1,"potent":4,"potential":3,"potential adj. ,":4,"potentially":4,"pottery":3,"pound":1,"pour":3,"poverty":3,"powder":3,"power":2,"powerful":3,"powerfully":4,"practical":3,"practicality":4,"practically":4,"practice":1,"practise":1,"practitioner":5,"praise":4,"prance":4,"prawn":4,"pray":3,"prayer":3,"preach":5,"precede":4,"precedent":5,"precious":4,"precise":4,"precisely":4,"precision":5,"predator":5,"predecessor":5,"predicament":4,"predicate":4,"predicative":4,"predict":2,"predictable":4,"prediction":3,"predictive":4,"predictor":4,"predominantly":5,"prefect":4,"prefer":1,"preferable":4,"preferably":4,"preference":4,"prefix":3,"pregnancy":5,"pregnant":4,"prehistoric":4,"prehuman":4,"preindustrial":4,"prejudge":4,"prejudice":5,"preliminary":5,"premier":5,"premise":5,"premium":5,"preoccupy":4,"preparation":4,"prepare":1,"prepared":3,"preposition":3,"preschool":3,"prescribe":5,"prescription":5,"presence":4,"present":2,"present adj. ,":1,"presentation":3,"presenter":4,"presently":5,"preservation":5,"preserve":4,"preside":5,"presidency":5,"president":2,"presidential":5,"press":3,"pressure":3,"prestige":4,"prestigious":5,"presumably":5,"presume":5,"pretend":3,"pretty":1,"prevail":5,"prevalence":5,"prevent":2,"prevention":5,"preventive":4,"previous":3,"previously":3,"prey":5,"price":1,"priceless":4,"prick":4,"pride":4,"priest":3,"primarily":4,"primary":3,"primary school":3,"prime":4,"prime minister":4,"primitive":3,"prince":3,"princess":3,"principal":4,"principle":4,"print":2,"printer":2,"printing":3,"prior":4,"priority":4,"prison":2,"prisoner":3,"privacy":4,"private":3,"privately":4,"privatization":5,"privilege":5,"prize":2,"pro":2,"probability":4,"probable":4,"probably":1,"probe":5,"problem":1,"problematic":5,"procedure":4,"proceed":4,"proceedings":5,"proceeds":5,"process":2,"processing":5,"processor":5,"proclaim":5,"procrastination":3,"produce":2,"producer":3,"product":1,"production":3,"productive":5,"productivity":5,"profession":3,"professional":2,"professor":2,"profile":2,"profit":3,"profitable":5,"profound":5,"program":2,"programme":1,"programmer":4,"programming":4,"progress":4,"progressive":4,"prohibit":4,"prohibition":3,"project":1,"projection":5,"prom":4,"prominence":4,"prominent":5,"promise":2,"promise v. ,":2,"promising":4,"promote":3,"promotion":4,"prompt":4,"promptly":4,"pronoun":3,"pronounce":2,"pronounced":5,"pronunciation":2,"proof":4,"propaganda":5,"proper":3,"properly":3,"property":3,"proponent":4,"proportion":4,"proposal":4,"propose":4,"proposed":4,"proposition":5,"prose":4,"prosecute":5,"prosecution":5,"prosecutor":5,"prospect":4,"prosper":4,"prosperity":5,"prosperous":3,"protect":2,"protection":4,"protective":3,"protein":4,"protest":3,"protester":4,"proud":3,"proudly":4,"prove":3,"proven":4,"proverb":3,"provide":2,"provided":3,"province":4,"provision":4,"proximity":4,"psychological":4,"psychologically":4,"psychologist":4,"psychology":4,"pub":2,"public":2,"public adj. ,":2,"public transport":3,"publication":4,"publicise":4,"publicity":4,"publicize":4,"publicly":3,"publish":2,"publisher":3,"publishing":4,"pudding":4,"pull":2,"pullover":3,"pulse":4,"pump":3,"pumpkin":4,"punch":5,"punctual":4,"punctuality":4,"punctuation":2,"punish":3,"punishment":3,"punk":4,"pupil":4,"puppy":3,"purchase":4,"pure":4,"purely":4,"purify":3,"purple":1,"purple adj. ,":1,"purpose":2,"purposeful":4,"purse":3,"pursue":4,"pursuit":4,"push":2,"put":1,"puzzle":4,"puzzled":4,"pyjamas":4,"quake":3,"qualification":3,"qualified":3,"qualify":3,"qualify v.queue":3,"quality":2,"quantify":4,"quantity":2,"quarantine":4,"quarrel":4,"quarrelsome":4,"quarter":1,"queen":2,"queer":4,"query":5,"question":1,"question mark":3,"questionnaire":4,"queue":3,"quick":1,"quickly":1,"quiet":1,"quietly":2,"quit":3,"quite":1,"quiz":2,"quotable":4,"quotation":3,"quote":4,"quote v. ,":3,"rabbit":1,"race":3,"race (competition)":2,"race (people)":3,"racial":4,"racing":3,"racism":4,"racist":4,"racist adj. ,":4,"rack":4,"racket":2,"radar":4,"radiate":4,"radiation":4,"radical":4,"radically":4,"radio":1,"radium":4,"rafter":4,"rag":4,"rage":3,"rail":4,"railroad":3,"railway":2,"rain":1,"rainbow":4,"raincoat":2,"rainfall":3,"rainforest":3,"rainstorm":4,"rainy":1,"raise":2,"rally":5,"ram":4,"ramp":4,"random":4,"range":3,"ranger":4,"rank":4,"ranking":5,"rap":2,"rape":4,"rapid":4,"rapidly":4,"rare":3,"rarely":3,"rash":4,"raspberry":3,"rat":4,"rate":2,"rather":2,"rating":4,"ratio":5,"ration":3,"rational":3,"rattle":4,"ravage":4,"raw":4,"ray":2,"razor":3,"reach":2,"react":2,"reaction":3,"read":1,"reader":1,"readily":4,"reading":1,"ready":1,"real":1,"real estate":4,"realisation":4,"realise":2,"realistic":4,"reality":3,"realization":4,"realize":2,"really":1,"rear":4,"rearrange":3,"reason":1,"reasonable":4,"reasonably":4,"reasoning":5,"rebel":4,"rebellious":4,"rebuild":4,"recall":4,"receipt":3,"receive":2,"receiver":4,"recent":2,"recently":2,"reception":2,"receptionist":2,"recession":4,"recipe":2,"recite":3,"reckon":4,"reclaim":3,"recognise":3,"recognition":4,"recognize":2,"recollect":4,"recollection":4,"recommend":2,"recommendable":4,"recommendation":3,"reconsider":4,"record":2,"recording":2,"recover":4,"recovery":4,"recreation":4,"recruit":4,"recruit v. ,":4,"recruitment":4,"rectangular":4,"recycle":2,"recycled":3,"recycling":3,"red":1,"red adj. ,":1,"redo":4,"reduce":2,"reduction":4,"redundant":4,"reed":4,"reef":3,"refer":2,"referee":4,"reference":3,"referendum":5,"referent":4,"refinery":4,"reflect":3,"reflection":3,"reflective":4,"reform":4,"refrain":4,"refresh":4,"refreshments":3,"refrigerator":2,"refuge":5,"refugee":4,"refund":3,"refusal":3,"refuse 1":2,"refute":4,"regain":3,"regard":3,"regard v. ,":4,"regarding":3,"regardless":4,"reggae":4,"regime":4,"region":2,"regional":4,"register":3,"register v. ,":4,"registration":4,"regret":2,"regret v. ,":4,"regrettably":4,"regular":2,"regularly":3,"regulate":4,"regulation":4,"rehearsal":4,"reinforce":4,"reinforcement":4,"reject":3,"rejection":5,"rejoin":4,"relate":3,"related":3,"relation":3,"relationship":2,"relative":3,"relative adj. ,":3,"relatively":4,"relativity":4,"relax":1,"relaxation":4,"relaxed":3,"relaxing":3,"relay":4,"release":2,"release v. ,":3,"relevant":4,"reliable":3,"relic":4,"relief":4,"relieve":4,"relieved":4,"religion":3,"religious":3,"reluctant":4,"rely":4,"remain":3,"remainder":3,"remaining":4,"remains":4,"remark":4,"remarkable":4,"remarkably":4,"remedy":3,"remember":1,"remembrance":3,"remind":3,"reminder":4,"remote":3,"remote control":3,"remove":2,"renew":3,"rent":3,"rental":4,"reorganise":4,"reorganize":4,"repaint":4,"repair":2,"repay":3,"repeat":1,"repeated":3,"repeatedly":3,"repertoire":4,"repetition":4,"replace":2,"replacement":4,"replica":4,"reply":2,"reply v. ,":2,"report":1,"reporter":2,"reporting":4,"represent":3,"representative":4,"repress":4,"repression":4,"reprint":4,"reproduce":3,"reprove":4,"republic":3,"reputation":4,"request":2,"require":3,"requirement":4,"rescue":3,"rescue v. ,":4,"research":2,"researcher":2,"resemble":3,"reservation":3,"reserve":4,"residence":4,"resident":4,"residential":3,"residue":5,"resign":4,"resignation":5,"resist":4,"resistance":5,"resolution":4,"resolve":4,"resonant":4,"resort":4,"resource":3,"respect":3,"respectable":3,"respectably":4,"respected":4,"respective":5,"respectively":5,"respiration":4,"respiratory":4,"respond":2,"response":2,"responsibility":3,"responsible":3,"rest":3,"rest (remaining part)":2,"rest (sleep/relax)":2,"restaurant":1,"restoration":5,"restore":4,"restraint":5,"restrict":4,"restriction":4,"result":1,"resume":5,"retail":4,"retailer":4,"retain":4,"retard":4,"retell":3,"retina":4,"retire":3,"retired":3,"retirement":4,"retreat":5,"retrieve":5,"retrospect":3,"return":2,"return v. ,":1,"reunification":3,"reunify":3,"reunion":2,"reveal":4,"revelation":5,"reven ge":5,"revenge":4,"revenue":4,"reverence":4,"reverse":4,"reverse v. ,":5,"review":2,"revise":3,"revision":4,"revival":5,"revive":5,"revolution":4,"revolutionary":5,"revolutionise":4,"revolutionize":4,"revolve":4,"reward":4,"rewrite":3,"rhetoric":5,"rhinoceros":4,"rhyme":4,"rhythm":4,"rhythmic":4,"rib":4,"ribbon":1,"rice":1,"rich":1,"rid":4,"riddle":3,"ride":1,"rider":4,"ridge":4,"ridiculous":4,"rifle":5,"right":1,"right adj. , adv. ,":1,"right-hand":2,"righteousness":4,"rightly":4,"rim":4,"ring 1":2,"riot":5,"rip":5,"ripe":3,"rise":2,"risk":3,"risky":4,"rite":4,"ritual":5,"rival":4,"river":1,"road":1,"roadside":3,"roam":4,"roar":4,"roast":2,"rob":4,"robbery":4,"robin":2,"robot":3,"robust":5,"rock":5,"rock (music)":2,"rock (stone)":2,"rocket":4,"rocky":4,"rod":5,"role":2,"roll":2,"roll v. ,":3,"rolling":3,"romance":4,"romantic":3,"roof":2,"room":1,"roommate":4,"root":4,"rope":3,"rose":4,"rosy":4,"rotate":5,"rotation":5,"rotten":3,"rough":3,"roughly":4,"round":4,"round adj. , adv. ,":2,"roundabout":2,"route":2,"routine":1,"row 1":3,"royal":3,"royalty":4,"rub":4,"rubber":4,"rubbish":2,"rubble":4,"rude":2,"rudely":3,"rug":4,"rugby":3,"ruin":2,"ruin v. ,":4,"ruinous":4,"rule":1,"ruler":1,"ruling":5,"rumor":2,"rumour":5,"run":1,"runaway":3,"runner":2,"running":2,"runway":3,"rural":4,"rush":2,"rush hour":4,"rush v. ,":4,"rusty":4,"sack":5,"sacred":5,"sacrifice":5,"sad":1,"sadly":2,"sadly adv.safe":2,"sadness":3,"safari":3,"safe":2,"safeguard":3,"safely":3,"safety":3,"sag":4,"sage":4,"sail":2,"sailing":2,"sailor":3,"saint":5,"sake":5,"salad":1,"salary":2,"sale":2,"salesman":3,"salesmanship":4,"salesperson":4,"saleswoman":4,"salmon":3,"salon":4,"salsa":4,"salt":1,"salty":4,"same":1,"same adj. ,":1,"sample":3,"sanction":5,"sand":3,"sandal":3,"sandstone":4,"sandwich":1,"sandy":2,"sanitary":4,"sanitation":4,"satellite":4,"satisfaction":4,"satisfactory":4,"satisfied":4,"satisfy":4,"saturday":1,"sauce":2,"saucepan":3,"saucer":3,"sausage":2,"save":2,"saving":4,"savings":4,"saw":1,"say":1,"scale":4,"scan":3,"scandal":4,"scar":4,"scarcely":4,"scare":3,"scare v. ,":4,"scared":2,"scarf":2,"scarlet":4,"scary":2,"scatter":3,"scattered":5,"scenario":4,"scene":2,"scenery":2,"scenic":3,"scent":4,"sceptical":5,"schedule":2,"scheduled":4,"scheme":4,"scholar":4,"scholarship":4,"scholasticism":4,"school":1,"schoolchild":2,"schoolgirl":4,"schoolmate":3,"schoolteacher":3,"schoolwork":2,"science":1,"science fiction":3,"scientific":3,"scientifically":4,"scientist":1,"scissors":2,"scold":3,"scooter":4,"scope":5,"score":3,"score v. ,":2,"scramble":4,"scratch":3,"scratch v. ,":4,"scream":2,"scream v. ,":4,"screen":2,"screening":4,"screw":2,"screw v.,":5,"scribble":4,"script":3,"scrooge":4,"scrutiny":5,"scuba":4,"sculpture":3,"scythe":4,"sea":1,"seafood":2,"seal":4,"seal v.,":5,"search":2,"seaside":2,"season":2,"seasonal":4,"seat":2,"seawater":3,"seaweed":3,"second":1,"second 1 (next after the first)":1,"second 1 (unit of time)":1,"second person":4,"second-hand":3,"secondary":3,"secondary school":3,"secondly":2,"secret":2,"secret adj. ,":2,"secretary":2,"secretly":3,"section":1,"sector":4,"secular":5,"secure":4,"security":3,"see":1,"seed":3,"seek":4,"seeker":4,"seem":2,"seemingly":5,"seesaw":4,"segment":5,"seize":5,"seldom":5,"select":4,"selection":4,"selective":5,"self":4,"self-confidence":4,"self-confident":4,"self-service":3,"selfish":3,"selfless":4,"sell":1,"seller":4,"semester":2,"semi-final":4,"semicolon":4,"seminar":4,"senator":5,"send":1,"senior":4,"sensation":5,"sense":2,"sensible":4,"sensitive":4,"sensitivity":5,"sentence":1,"sentiment":5,"separate":2,"separately":4,"separation":5,"september":1,"sequence":4,"serene":4,"serial":5,"series":2,"serious":2,"seriously":3,"servant":3,"serve":2,"server":3,"service":2,"session":4,"set":1,"set (group)":3,"set (put)":3,"set-up":5,"setback":4,"setting":3,"settle":4,"settlement":5,"settler":4,"seven":1,"seventeen":1,"seventy":1,"several":2,"severe":4,"severely":4,"sew":2,"sex":3,"sexism":4,"sexual":3,"sexuality":5,"sexy":4,"shabby":4,"shade":4,"shadow":2,"shadowy":3,"shake":2,"shaken":4,"shakespearean":4,"shaky":4,"shall":2,"shallow":4,"shame":4,"shameful":3,"shampoo":2,"shape":2,"shaped":4,"share":1,"shareholder":5,"sharp":3,"sharply":4,"shatter":5,"shave":3,"she":1,"shed":5,"sheep":1,"sheer":5,"sheet":2,"shelf":3,"shell":3,"shelter":4,"sheriff":3,"shield":4,"shift":3,"shine":3,"shiny":3,"ship":2,"shipping":5,"shipwreck":4,"shirt":1,"shiver":3,"shock":4,"shocked":4,"shocking":4,"shoe":1,"shoot":3,"shooting":4,"shop":1,"shop assistant":2,"shopkeeper":4,"shoplift":4,"shoplifter":4,"shoplifting":4,"shopper":3,"shopping":1,"shore":4,"short":1,"short-term":4,"shortage":4,"shortly":4,"shortness":4,"shorts":2,"shot":4,"should":1,"shoulder":2,"shout":2,"shout v. ,":2,"show":1,"show v. ,":1,"showbiz":4,"showcase":4,"shower":1,"shrimp":3,"shrink":5,"shrug":5,"shut":2,"shy":3,"sibling":4,"sick":1,"sickness":3,"side":2,"sidewalk":3,"sigh":3,"sigh v .,":5,"sight":3,"sightseeing":2,"sign":2,"signal":3,"signature":4,"significance":4,"significant":4,"significantly":4,"signify":4,"signpost":3,"silence":4,"silent":3,"silently":2,"silk":4,"silly":3,"silver":2,"silverware":4,"similar":1,"similarity":3,"similarly":3,"simple":2,"simplification":4,"simplify":3,"simply":3,"simulate":5,"simulation":5,"simultaneous":4,"simultaneously":5,"sin":5,"since":2,"sincere":4,"sincerity":4,"sing":1,"singer":1,"singing":2,"single":2,"single adj. ,":2,"singular":2,"sink":3,"sir":2,"sister":1,"sister-in-law":4,"sit":1,"site":2,"sitting room":2,"situation":1,"six":1,"sixteen":1,"sixty":1,"size":2,"skate":2,"skateboard":4,"skateboarder":4,"skateboarding":2,"skating":2,"skeleton":3,"sketch":5,"ski":2,"ski v. , adj. ,":2,"skiing":2,"skilful":4,"skilfully":4,"skill":1,"skilled":4,"skillful":4,"skillfully":4,"skim":4,"skin":2,"skip":4,"skirt":1,"skull":4,"sky":2,"skylark":4,"skyscraper":3,"skyward":4,"slam":4,"slang":4,"slap":4,"slash":4,"slaughter":4,"slave":4,"slavery":3,"sleep":1,"sleepless":2,"sleepy":2,"sleeve":3,"slice":3,"slide":2,"slide v. ,":4,"slight":4,"slightly":3,"slim":2,"slip":4,"sliver":4,"slogan":4,"slope":4,"sloppy":4,"slot":3,"slow":1,"slowly":2,"small":1,"smart":3,"smartphone":2,"smash":4,"smell":1,"smell v. ,":2,"smile":1,"smile v. ,":2,"smith":1,"smoke":2,"smoker":3,"smokestack":4,"smoking":2,"smooth":3,"smoothly":2,"snack":2,"snake":1,"snap":4,"sneak":4,"sneer":4,"sneeze":3,"sniff":4,"snore":4,"snow":1,"snowball":4,"snowboard":3,"snowboarding":2,"snowstorm":3,"snowy":1,"so":1,"so adv. ,":1,"so-called":4,"soak":4,"soaked":4,"soaking":4,"soap":2,"soap opera":3,"soar":4,"sob":4,"soccer":2,"sociable":4,"social":2,"social networking":3,"socialise":4,"socialize":4,"socially":3,"society":2,"sock":2,"soda":2,"sofa":1,"soft":2,"soft drink":2,"softly":2,"softness":4,"software":3,"soil":3,"solar":4,"soldier":2,"solid":3,"solid adj. ,":3,"solidity":4,"soliloquy":4,"solo":4,"solution":2,"solve":2,"solvent":4,"some":1,"somebody":1,"someday":2,"somehow":4,"someone":1,"someplace":3,"something":1,"sometime":4,"sometimes":1,"somewhat":4,"somewhere":2,"somewhere adv. ,":2,"son":1,"son-in-law":4,"song":1,"sonnet":4,"soon":1,"soothe":3,"sophisticated":4,"sophomore":3,"sore":3,"sorrow":3,"sorry":1,"sorry adj. ,":1,"sort":2,"soul":4,"sound":1,"sound adj.sovereignty":5,"soundtrack":4,"soup":1,"sour":3,"source":2,"south":1,"southeast":3,"southern":3,"southward":4,"southwest":3,"souvenir":3,"soviet":4,"soybean":4,"spa":4,"space":1,"spaceship":2,"spaghetti":2,"span":4,"spare":4,"spare v.spark v.specialized adj.specification":5,"sparerib":4,"spark":4,"sparkle":3,"sparkling":4,"sparrow":4,"speak":1,"speaker":2,"special":1,"specialise":3,"specialist":4,"specialize":4,"specially":3,"specialty":4,"species":4,"specific":2,"specifically":3,"specify":4,"spectacle":4,"spectacular":4,"spectator":4,"speculate":4,"speculation":4,"speech":2,"speed":2,"speeder":4,"spell":1,"spellbound":4,"spelling":1,"spend":1,"spending":3,"sphere":3,"spice":4,"spicy":3,"spider":2,"spill":2,"spin":4,"spinach":3,"spine":5,"spiral":3,"spirit":3,"spiritual":4,"spite":4,"splash":2,"splatter":4,"split":2,"split v. ,":4,"spoil":4,"spoken":3,"spokesman":4,"spokesperson":4,"spokeswoman":4,"sponge":3,"sponsor":3,"sponsor v. ,":4,"sponsorship":4,"spoon":2,"sport":1,"sporting":4,"sports":3,"sports center":2,"sports centre":2,"sportsmanship":3,"spot":3,"spray":4,"spread":3,"spreadsheet":4,"spring":1,"sprint":4,"spur":4,"spy":1,"squad":5,"square":2,"square adj. ,":2,"squash":4,"squeeze":4,"stab":4,"stability":5,"stable":4,"stack":4,"stadium":3,"staff":3,"stage":2,"stagger":4,"stain":4,"stair":2,"stake":4,"stall":4,"stammer":4,"stamp":2,"stance":4,"stand":1,"standard":3,"standby":4,"standstill":4,"stanza":4,"star":1,"stare":4,"start":2,"start v.statement":1,"startle":4,"starvation":4,"starve":4,"starving":4,"state":2,"state adj. ,":3,"statement":2,"statesman":4,"statewide":4,"station":1,"statistic":3,"statistics":4,"statue":3,"status":4,"stay":1,"steadily":4,"steady":4,"steak":2,"steal":2,"steam":4,"steel":4,"steely":4,"steep":4,"steer":4,"steering wheel":4,"stem":3,"step":2,"stepfather":4,"stepmother":4,"stereotype":5,"stern":4,"stew":4,"stick":3,"stick (piece of wood)":3,"stick (push into/attach)":3,"sticker":3,"sticky":4,"stiff":4,"still":1,"stimulant":4,"stimulate":4,"stimulation":4,"stingy":4,"stink":4,"stir":3,"stitch":4,"stock":4,"stock market":4,"stockpile":4,"stomach":2,"stomachache":2,"stone":2,"stonework":4,"stool":4,"stop":1,"stop v. ,":1,"stopover":4,"stopwatch":4,"storage":3,"store":2,"storm":2,"stormy":3,"story":1,"storyteller":3,"stove":2,"straight":1,"straight adv. ,":2,"straighten":4,"straightforward":4,"strain":3,"strait":4,"strand":4,"strange":2,"strangely":3,"stranger":3,"strangle":4,"strategic":3,"strategy":2,"straw":3,"strawberry":3,"stream":4,"street":1,"strength":3,"strengthen":4,"stress":2,"stressed":3,"stressful":3,"stretch":3,"stretch v. ,":4,"stricken":3,"strict":4,"strictly":4,"stride":4,"strike":2,"strike v. ,":4,"striking":4,"string":3,"strip":3,"stripe":3,"strive":4,"stroke":4,"strong":1,"strongly":3,"structure":2,"struggle":3,"struggle v. ,":4,"stubborn":3,"stubbornly":4,"stuck":3,"student":1,"studio":3,"study":1,"stuff":3,"stuffed":3,"stumble":3,"stun":3,"stunning":4,"stupid":2,"style":1,"stylish":3,"stylist":4,"subconscious":3,"subcontinent":4,"subculture":4,"subdivision":4,"subject":1,"subjunctive":4,"submarine":3,"submit":4,"subplot":4,"subsequent":4,"subsequently":4,"subside":4,"substance":3,"substantial":3,"substitute":3,"substitution":5,"subtitle":4,"subtle":4,"subtract":4,"suburb":4,"subway":1,"succeed":2,"success":1,"successful":2,"successfully":3,"successive":4,"such":2,"suck":4,"sudden":3,"suddenly":2,"sue":4,"suffer":3,"suffering":4,"sufficient":4,"sufficiently":4,"suffix":3,"sugar":1,"suggest":2,"suggestion":2,"suicide":3,"suit":2,"suitable":3,"suitably":4,"suitcase":2,"sulfur":4,"sulphur":4,"sum":4,"summarise":3,"summarize":3,"summary":3,"summer":1,"summit":3,"sun":1,"sunbathe":3,"sunbeam":4,"sunday":1,"sundial":3,"sunflower":2,"sunglasses":2,"sunlight":2,"sunny":1,"sunrise":3,"sunset":3,"sunshine":1,"super":4,"superb":4,"superintendent":4,"superior":3,"superlative":2,"supermarket":1,"supernatural":4,"superstar":2,"superstition":3,"supervise":4,"supervision":4,"supervisor":4,"supper":2,"supplement":4,"supplier":4,"supply":3,"support":2,"support v. ,":2,"supporter":3,"supportive":3,"supportive adj.supposedly adv.suppress v.supreme adj.surge":5,"suppose":2,"supposedly":3,"suppress":4,"sure":1,"surely":3,"surf":1,"surface":3,"surfing":2,"surge":4,"surgeon":4,"surgery":4,"surgical adj.surplus":5,"surname":2,"surprise":2,"surprised":2,"surprising":2,"surprisingly":3,"surrender":4,"surround":4,"surrounding":4,"surroundings":4,"surveillance":4,"survey":2,"survival":4,"survive":3,"survivor":4,"suspect":3,"suspect v. ,":4,"suspend":4,"suspicion":3,"suspicious":4,"suspiciously":4,"sustain":4,"sustainable":4,"swallow":4,"swan":4,"swarm":3,"swear":4,"sweat":2,"sweater":1,"sweatshirt":3,"sweep":4,"sweet":1,"sweet adj. ,":2,"sweetheart":2,"swell":3,"swift":4,"swim":1,"swimmer":3,"swimming":1,"swimming costume":2,"swimming pool":1,"swimsuit":2,"swing":4,"switch":3,"swollen":3,"sword":5,"syllable":4,"symbol":2,"symbolic":4,"sympathetic":4,"sympathise":4,"sympathize":4,"sympathy":4,"symphony":2,"symptom":3,"syndrome":3,"synonym":4,"system":2,"systematic":3,"t-shirt":1,"table":1,"table tennis":2,"tablecloth":4,"tablespoon":2,"tablet":2,"tabloid":4,"tack":4,"tackle":4,"tactile":4,"tag":4,"tail":3,"take":1,"take-off":3,"takeaway":3,"takeoff":3,"tale":4,"talent":3,"talented":3,"talk":1,"talkative":3,"tall":1,"tame":4,"tan":4,"tank":4,"tanned":4,"tap":2,"tap v. ,":4,"tape":3,"target":2,"task":2,"taste":2,"tasteless":3,"tasty":3,"tatter":4,"tattoo":4,"taunt":4,"tax":3,"taxi":1,"tea":1,"teach":1,"teacher":1,"teaching":2,"team":1,"teammate":3,"teamwork":3,"tear 1 v.,":4,"tear 2":4,"tease":3,"teaspoon":4,"technical":3,"technically":4,"technique":3,"technological":4,"technology":2,"tee-shirt":1,"teen":3,"teenage":2,"teenager":1,"teens":4,"telecommunications":3,"telegram":3,"telephone":1,"telescope":4,"television":1,"tell":1,"teller":3,"temper":3,"temperate":4,"temperature":2,"temple":4,"temporarily":4,"temporary":4,"tempt":3,"temptation":4,"ten":1,"tend":3,"tendency":4,"tender":4,"tenderly":4,"tenderness":4,"tennis":1,"tense":3,"tension":4,"tent":3,"term":2,"term v.therapy":4,"terminal":4,"terms":4,"terrace":4,"terrible":1,"terribly":4,"terrific":3,"terrified":3,"terrify":4,"terrifying":4,"territory":4,"terror":4,"terrorism":4,"terrorist":4,"test":1,"testify":4,"testimony":4,"testing":4,"text":1,"text message":2,"textbook":4,"than":1,"thank":1,"thankful":3,"thanks":1,"that":1,"the":1,"theater":1,"theatre":1,"theft":4,"their":1,"theirs":3,"them":1,"theme":3,"themselves":2,"then":1,"theorist":4,"theory":3,"therapist":4,"therapy":4,"there":1,"thereafter":4,"therefore":3,"thermometer":4,"these":1,"thesis":4,"they":1,"thick":2,"thickly":4,"thickness":4,"thief":2,"thigh":4,"thin":2,"thing":1,"think":1,"thinker":4,"thinking":2,"third":1,"third person":4,"thirdly":4,"thirst":3,"thirsty":1,"thirteen":1,"thirty":1,"this":1,"thorough":4,"thoroughly":4,"those":1,"though":3,"thought":2,"thoughtful":4,"thoughtless":4,"thousand":1,"thread":4,"threat":4,"threaten":4,"threatening":3,"three":1,"thrill":4,"thrilled":4,"thriller":3,"thrilling":4,"throat":3,"through":1,"throughout":3,"throw":2,"thumb":4,"thump":3,"thunder":3,"thunderous":3,"thunderstorm":2,"thursday":1,"thus":4,"tick":3,"ticket":1,"tickle":4,"tide":3,"tidy":2,"tidy adj. ,":2,"tie":2,"tie v. ,":2,"tiger":1,"tight":3,"tighten":3,"tightly":3,"tightrope":4,"tights":2,"tile":3,"till":3,"time":1,"timeless":4,"timeliness":4,"timely":3,"times":4,"timetable":2,"timing":4,"tin":3,"tiny":3,"tip":2,"tiptoe":4,"tire":3,"tired":1,"tiredness":4,"tiresome":4,"tiring":3,"tissue":4,"title":1,"to":1,"toast":2,"tobacco":3,"today":1,"today adv. ,":1,"toe":3,"toenail":4,"together":1,"toil":4,"toilet":1,"tolerant":4,"tolerate":4,"toll":4,"tomato":1,"tomb":4,"tomorrow":1,"tomorrow adv. ,":1,"ton":4,"tone":4,"tongue":3,"tonight":1,"tonight adv. ,":1,"tonne":4,"too":1,"tool":2,"tooth":1,"toothache":2,"toothbrush":2,"toothpaste":3,"top":2,"topic":1,"torch":4,"tornado":3,"tortoiseshell":4,"torture":5,"toss":5,"total":5,"total adj. ,":3,"totally":3,"touch":2,"tough":4,"tour":2,"tour guide":2,"tourism":2,"tourist":1,"tournament":4,"toward":2,"towards":2,"towel":1,"tower":2,"town":1,"toxic":5,"toy":2,"trace":4,"track":2,"tracksuit":3,"trade":3,"trademark":5,"trader":4,"trading":4,"tradition":2,"traditional":2,"traditionally":3,"traffic":1,"traffic jam":3,"traffic light":2,"tragedy":4,"tragic":4,"trail":5,"trailer":5,"train":1,"trainee":4,"trainer":2,"training":2,"trait":4,"traitor":4,"tram":2,"tramp":4,"trample":4,"transaction":5,"transcript":5,"transfer":3,"transfer v. ,":4,"transform":4,"transformation":5,"transfusion":4,"transient":4,"transistor":4,"transit":5,"transition":4,"transitional":3,"transitive":4,"translate":3,"translation":3,"translator":4,"transmission":5,"transmit":4,"transparency":5,"transparent":5,"transport":2,"transportation":4,"trap":2,"trap v. ,":4,"trash":3,"trauma":5,"travel":1,"travel agent":3,"travel v. ,":1,"traveler":2,"traveller":2,"traverse":4,"tray":4,"tread":4,"treasure":2,"treat":3,"treatment":3,"treaty":5,"tree":1,"trek":4,"tremble":3,"tremendous":5,"tremendously":4,"tremor":4,"trend":3,"trial":4,"triangle":4,"tribal":5,"tribe":4,"tribunal":5,"tribute":5,"trick":3,"tricky":4,"trigger":4,"trillion":4,"trim":3,"trio":5,"trip":1,"triumph":5,"trivial":4,"trolley":4,"troop":4,"trophy":5,"tropic":4,"tropical":4,"trouble":2,"troublesome":4,"trousers":1,"truck":2,"true":1,"truly":4,"trumpet":3,"trunk":4,"trust":4,"trustee":5,"trustworthy":3,"trusty":4,"truth":3,"truthful":4,"truthfulness":4,"try":1,"tsunami":4,"tub":4,"tube":3,"tuberculosis":4,"tuesday":1,"tug":4,"tuition":5,"tulip":4,"tumble":3,"tumor":4,"tumour":4,"tuna":3,"tune":4,"tunnel":4,"turbulence":3,"turbulent":4,"turkey":1,"turn":1,"turn v. ,":1,"turning":3,"turnout":5,"turnover":5,"turtle":3,"tutor":4,"tv":1,"twelve":1,"twenty":1,"twice":1,"twin":2,"twinkle":4,"twist":3,"twist v. ,":5,"twisted":4,"two":1,"type":1,"typhoid":4,"typical":2,"typically":3,"tyranny":4,"tyrant":4,"tyre":3,"ugly":3,"ultimate":4,"ultimately":4,"umbrella":1,"unable":3,"unacceptable":4,"unafraid":3,"unashamedly":4,"unattractive":4,"unauthorised":4,"unauthorized":4,"unavailable":4,"unaware":4,"unbearable":4,"unbeatable":4,"unbelievable":3,"uncertain":2,"uncertainty":4,"unchanged":4,"uncharacteristic":4,"uncle":1,"unclear":3,"unclearly":4,"uncomfortable":3,"uncomfortably":4,"uncommon":4,"unconcerned":4,"unconscious":4,"uncontrollable":3,"uncover":3,"under":1,"underage":3,"underestimate":4,"undergo":4,"undergraduate":5,"underground":2,"underline":1,"underlying":5,"undermine":5,"underneath":3,"underpants":3,"undersea":4,"understand":1,"understandable":4,"understanding":2,"undertake":4,"underwater":2,"underwear":3,"undo":3,"undoubtedly":5,"undreamed":4,"undress":3,"undressed":4,"unease":4,"uneasily":4,"uneasy":2,"unemployed":3,"unemployment":3,"unenthusiastic":4,"uneven":4,"unexpected":4,"unexpectedly":3,"unfair":3,"unfairly":3,"unfamiliar":4,"unfashionable":4,"unfit":3,"unfold":4,"unforeseen":4,"unforgettable":2,"unfortunate":4,"unfortunately":2,"unfriendly":3,"ungodly":4,"unhappiness":4,"unhappy":2,"unhealthy":2,"unheard":3,"unhelpful":4,"uniform":2,"unify":5,"unimaginable":4,"unimaginably":4,"unimportant":2,"uninterested":3,"uninteresting":3,"union":3,"unique":4,"unit":2,"unite":4,"united":2,"unity":4,"universal":4,"universe":4,"university":1,"unjustly":4,"unkind":4,"unknown":4,"unless":3,"unlike":3,"unlikely":3,"unlimited":4,"unload":4,"unlock":4,"unlucky":3,"unmistakable":4,"unmistakably":4,"unnatural":4,"unnecessary":3,"unofficial":4,"unpack":3,"unpleasant":3,"unpopular":4,"unprecedented":5,"unpredictable":3,"unrealistic":4,"unreasonable":4,"unrelated":3,"unreliable":4,"unrest":4,"unsafe":4,"unsatisfactory":4,"unselfish":4,"unstoppable":4,"unsuccessful":4,"unsuitable":4,"unsure":4,"untalented":4,"unthinkably":4,"untidy":3,"untie":4,"until":1,"unto":4,"untreated":4,"untrimmed":4,"unusual":2,"unusually":3,"unusualness":4,"unveil":5,"unwanted":3,"unwell":3,"unwilling":4,"unwise":4,"unworldly":4,"up":1,"up adv. ,":1,"up-to-date":3,"upbringing":4,"upcoming":5,"update":3,"update v. ,":3,"upgrade":4,"upgrade v. ,":5,"uphold":5,"uplifted":3,"upload":3,"upon":3,"upper":4,"upright":4,"upset":2,"upset adj. ,":3,"upside down":4,"upstairs":1,"upward":3,"upwards":4,"urban":4,"urge":4,"urgent":4,"urgently":4,"us":1,"usage":4,"use":1,"used 1":3,"used to":2,"useful":1,"useless":4,"user":2,"usher":4,"usual":2,"usually":1,"utilise":4,"utility":5,"utilize":5,"utter":4,"utterly":5,"vacancy":3,"vacant":4,"vacation":1,"vaccine":4,"vacuum":5,"vague":5,"vain":3,"valentine":4,"valid":4,"validity":5,"valley":2,"valuable":3,"value":3,"van":2,"vanish":5,"vanity":4,"variable":5,"variation":4,"varied":5,"variety":2,"various":3,"vary":4,"vase":1,"vast":4,"vegetable":1,"vegetarian":3,"vehicle":2,"vein":5,"venture":4,"venue":4,"verb":2,"verbal":5,"verbally":4,"verdict":5,"verify":5,"verse":5,"version":3,"versus":5,"vertical":4,"very":1,"vessel":5,"vet":3,"veteran":5,"via":4,"viable":5,"vibrant":5,"vibrate":4,"vibration":4,"vice":5,"vice president":3,"vicious":5,"victim":3,"victory":4,"video":1,"video clip":3,"video game":2,"view":2,"viewer":3,"viewpoint":4,"vigor":4,"vigorous":4,"vigorously":4,"vigour":4,"villa":4,"village":1,"villager":5,"vinegar":4,"violate":5,"violation":5,"violence":4,"violent":3,"violently":3,"violin":2,"virtual":4,"virtual reality":4,"virtually":4,"virtue":5,"virus":2,"visa":4,"visible":4,"visibly":4,"vision":4,"visit":1,"visit v. ,":1,"visitor":1,"visual":4,"visually":3,"vital":4,"vitamin":4,"vivid":3,"vividly":3,"vocabulary":2,"vocal":5,"vocalist":4,"voice":2,"volcano":3,"volleyball":1,"volume":4,"voluntary":4,"volunteer":3,"vomit":4,"vote":3,"voter":4,"voting":4,"vow":5,"vowel":3,"voyage":3,"vulnerability":5,"vulnerable":5,"wage":4,"wagon":3,"waist":4,"waistcoat":4,"wait":1,"waiter":1,"waitress":1,"wake":1,"walk":1,"walk v. ,":1,"walkabout":4,"walker":4,"walking":2,"wall":1,"wallboard":4,"wallet":2,"walnut":4,"wander":4,"want":1,"war":2,"ward":5,"wardrobe":3,"warehouse":5,"warfare":5,"warm":1,"warming":4,"warmly":3,"warmth":3,"warn":3,"warning":3,"warrant":5,"warranty":3,"warrior":5,"warship":4,"wartime":4,"was":1,"wash":1,"washbowl":3,"washing":2,"washing machine":2,"washing-up":2,"wasp":4,"waste":3,"wasteful":3,"watch":1,"watch v. ,":1,"water":1,"waterfall":3,"waterproof":4,"wave":2,"wax":3,"way":1,"we":1,"weak":2,"weaken":5,"weakly":4,"weakness":4,"wealth":4,"wealthy":4,"weapon":3,"wear":1,"wearisome":4,"weary":4,"weather":1,"weather forecast":3,"weave":4,"web":2,"web page":2,"webcam":3,"website":1,"wed":4,"wedding":2,"wednesday":1,"weed":5,"week":1,"weekday":2,"weekend":1,"weekly":4,"weep":2,"weigh":3,"weight":2,"weird":4,"welcome":1,"welfare":4,"well":5,"well adv. , adj. ,":1,"well-balanced":4,"well-being":5,"well-built":4,"well-dressed":3,"well-known":2,"well-organised":4,"well-organized":4,"well-paid":4,"were":1,"west":1,"western":3,"westward":3,"wet":2,"wetland":3,"whale":3,"what":1,"whatever":3,"whatsoever":5,"wheat":4,"wheel":2,"wheelchair":2,"when":1,"when adv. ,":1,"whenever":3,"where":1,"where adv. ,":1,"whereas":4,"whereby":5,"wherever":4,"whether":3,"which":1,"whichever":3,"while":2,"whilst":5,"whip":5,"whiskey":4,"whisky":4,"whisper":3,"whisper v. ,":4,"whistle":3,"white":1,"white adj. , n.who":1,"who":1,"whoever":4,"whole":2,"wholly":5,"whom":4,"whose":2,"why":1,"wide":2,"widely":4,"widen":5,"widespread":4,"widow":5,"width":5,"wife":1,"wild":2,"wilderness":4,"wildlife":4,"wildly":3,"will":1,"willing":4,"willingly":4,"willingness":5,"win":1,"wind 1":2,"winding":4,"window":1,"windscreen":3,"windshield":4,"windsurfing":3,"windy":2,"wine":1,"wing":3,"wink":4,"winner":2,"winter":1,"wipe":5,"wire":4,"wisdom":4,"wise":4,"wish":1,"wish v. ,":2,"wit":5,"with":1,"withdraw":4,"withdrawal":5,"wither":3,"within":3,"without":1,"witness":4,"witty":4,"wizard":3,"wolf":4,"woman":1,"wonder":2,"wonder v. ,":3,"wonderful":1,"wondrous":4,"wood":2,"woodcarving":4,"wooden":2,"wool":3,"word":1,"wordlessly":4,"work":1,"work v. ,":1,"workaholic":4,"workbench":4,"worker":1,"workforce":4,"working":2,"workman":4,"workout":5,"workplace":4,"workshop":4,"worktable":4,"world":1,"worldly":4,"worldview":4,"worldwide":3,"worm":4,"worn":3,"worn out":4,"worn-out":4,"wornout":4,"worried":2,"worry":2,"worrying":4,"worse":2,"worsen":4,"worship":5,"worst":2,"worth":3,"worthless":4,"worthwhile":5,"worthy":5,"would":1,"wound":4,"wow":2,"wrap":4,"wrapping":3,"wreck":4,"wrist":4,"wristwatch":3,"write":1,"writer":1,"writing":1,"written":3,"wrong":1,"wrongly":4,"x-ray":4,"yacht":4,"yard":3,"yawn":4,"yeah":1,"year":1,"yearn":4,"yell":5,"yellow":1,"yellow adj. ,":1,"yes":1,"yesterday":1,"yesterday adv. ,":1,"yet":2,"yield":5,"yoga":3,"yoghurt":1,"yogurt":1,"you":1,"young":1,"youngster":5,"your":1,"yours":2,"yourself":1,"youth":3,"youthful":4,"yummy":4,"zebra":4,"zero":2,"zip":4,"zone":4,"zoo":1,"zoom":4};


  function suggestLevelFromOxford(word){
    const k = __normWord(word);
    return __OXFORD_LV[k] || null;
  }

  function __lvToCEFR(n){
    n = Number(n);
    if(n===1) return "A1";
    if(n===2) return "A2";
    if(n===3) return "B1";
    if(n===4) return "B2";
    if(n===5) return "C1";
    return "";
  }

  function __getCefrTag(en, lv){
    const s = String((lv ?? "")).trim();
    if(!s) return "";
    const k = __normWord(en);
    const ox = __OXFORD_LV[k];
    if(ox && Number(ox)===Number(s)){
      return __lvToCEFR(Number(s)) || "";
    }
    return "";
  }

  function __formatLvLabel(en, lv){
    const s = String((lv ?? "")).trim();
    if(!s) return "";
    // è¡¨ç¤ºã¯æ•°å­—ã ã‘ã€‚CEFRæƒ…å ±ã¯ __getCefrTag(en, lv) ã§å†…éƒ¨çš„ã«å–å¾—ã§ãã¾ã™ã€‚
    return s;
  }

  function suggestLevelAuto(word){
    const o = suggestLevelFromOxford(word);
    if(o) return { lv:o, src:__OXFORD_DICT_NAME };
    const c = suggestLevelFromCEFRJ(word);
    if(c) return { lv:c, src:__CEFRJ_DICT_NAME };
    return { lv:null, src:null };
  }


  function __normWord(s){
    return (s||"").toString().trim().toLowerCase().replace(/\s+/g," ");
  }
  function suggestLevelFromCEFRJ(word){
    const k = __normWord(word);
    return __CEFRJ_LV[k] || null;
  }
  function updateCdAutoLvHint(forceFill){
    const chk = document.getElementById("cd_autoLevel");
    const elEn = document.getElementById("cd_en");
    const elLv = document.getElementById("cd_level");
    const hint = document.getElementById("cd_lvHint");
    if(!chk || !elEn || !elLv || !hint) return;
    if(!chk.checked){ hint.textContent=""; return; }

    const r = suggestLevelAuto(elEn.value);
    const lv = r.lv;
    const src = r.src;

    if(lv){
      // While autoLv is ON, always follow dictionaries (Oxford first).
      elLv.value = String(lv);
      elLv.dataset.autoFilled = "1";
      const lvLabel = __formatLvLabel(elEn.value, lv) || String(lv);
      hint.textContent = `è‡ªå‹•Lv: ${lvLabel}ï¼ˆ${src}ï¼‰`;
    }else{
      // Not in Oxford/CEFR-J: app guesses Lv3 (only if empty)
      if(String(elLv.value||"").trim()===""){
        elLv.value = "3";
        elLv.dataset.autoFilled = "1";
      }
      hint.textContent = `è‡ªå‹•Lv: Lv3ï¼ˆæ¨å®š: è¾æ›¸ã«ãªã—ï¼‰`;
    }
  }
  function installCustomDeckAutoLv(){
    const elEn = document.getElementById("cd_en");
    const elLv = document.getElementById("cd_level");
    const chk = document.getElementById("cd_autoLevel");
    if(elEn) elEn.addEventListener("input", ()=> updateCdAutoLvHint(false));
    if(elLv) elLv.addEventListener("input", ()=>{
      elLv.dataset.autoFilled="0";
      // If the user types Lv manually, switch to manual mode.
      if(chk && chk.checked){
        chk.checked = false;
        updateCdAutoLvHint(false);
      }
    });
    if(chk) chk.addEventListener("change", ()=> updateCdAutoLvHint(true));
  }


  // =========================
  // Debug helper (custom deck)
  // =========================
  function cdDebug(msg){
    try{
      const el = document.getElementById("cd_debug");
      if(el) el.textContent = msg;
    }catch(e){}
  }
  window.addEventListener("error", (ev)=>{
    try{
      const m = (ev && (ev.message || ev.error?.message)) || "unknown error";
      cdDebug("JSã‚¨ãƒ©ãƒ¼: " + m);
    }catch(e){}
  });

// ===== TTS LOCK (stale-safe) =====
// éŸ³å£°ã¯ã€ŒåŒã˜ãƒ–ãƒ©ã‚¦ã‚¶å†…ã®åˆ¥ã‚¿ãƒ–ã€ã¨ç«¶åˆã—ã‚„ã™ã„ã®ã§ã€localStorageã§ç°¡æ˜“ãƒ­ãƒƒã‚¯ã—ã¾ã™ã€‚
// ãŸã ã—ã€ã‚¿ãƒ–ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥/å¼·åˆ¶çµ‚äº†ã™ã‚‹ã¨è§£æ”¾ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ãŸã‚ã€TTLï¼ˆæœŸé™ï¼‰ã¨å¿ƒæ‹ã§è‡ªå‹•å¾©æ—§ã—ã¾ã™ã€‚
const TTS_LOCK_KEY = "hamaru_tts_lock";
const TAB_ID = Math.random().toString(36).slice(2);
const LOCK_TTL_MS = 12000;     // 12ç§’ã§æœŸé™åˆ‡ã‚Œæ‰±ã„
const HEARTBEAT_MS = 3000;     // æ‰€æœ‰ä¸­ã¯3ç§’ã”ã¨ã«æ›´æ–°

function _now(){ return Date.now(); }

function _readLock(){
  try{
    const raw = localStorage.getItem(TTS_LOCK_KEY);
    if(!raw) return null;
    // æ—§å½¢å¼ï¼ˆæ–‡å­—åˆ—ã®ã¿ï¼‰ã‚‚æ•‘æ¸ˆ
    if(raw && raw[0] !== "{"){
      return { id: raw, ts: _now() };
    }
    const obj = JSON.parse(raw);
    if(!obj || !obj.id) return null;
    // ts ãŒç„¡ã„/å£Šã‚Œã¦ã‚‹å ´åˆã¯å³æœŸé™åˆ‡ã‚Œæ‰±ã„
    if(!obj.ts || (_now() - obj.ts) > LOCK_TTL_MS) return null;
    return obj;
  }catch(e){
    return null;
  }
}

function _writeLock(){
  try{
    localStorage.setItem(TTS_LOCK_KEY, JSON.stringify({ id: TAB_ID, ts: _now() }));
  }catch(e){}
}

let __ttsHeartbeat = null;
function _startHeartbeat(){
  try{ if(__ttsHeartbeat) return; }catch(e){}
  __ttsHeartbeat = setInterval(()=>{
    try{
      const lock = _readLock();
      if(lock && lock.id === TAB_ID){
        _writeLock(); // æ›´æ–°
      }else{
        // ã‚‚ã†æ‰€æœ‰ã—ã¦ãªã„ãªã‚‰åœæ­¢
        try{ clearInterval(__ttsHeartbeat); }catch(e){}
        __ttsHeartbeat = null;
      }
    }catch(e){}
  }, HEARTBEAT_MS);
}

function acquireTtsLock(){
  const lock = _readLock();
  if(!lock || lock.id === TAB_ID){
    _writeLock();
    _startHeartbeat();
    return true;
  }
  // æœŸé™åˆ‡ã‚Œã¯ _readLock ãŒ null ã‚’è¿”ã™ã®ã§ã€ã“ã“ã«æ¥ã‚‹ã®ã¯ã€Œä»–ã‚¿ãƒ–ãŒç”Ÿãã¦ã‚‹ã€æ™‚
  return false;
}

function releaseTtsLock(){
  try{
    const raw = localStorage.getItem(TTS_LOCK_KEY);
    if(!raw) return;
    if(raw && raw[0] !== "{"){
      // æ—§å½¢å¼
      if(raw === TAB_ID) localStorage.removeItem(TTS_LOCK_KEY);
    }else{
      const obj = JSON.parse(raw);
      if(obj && obj.id === TAB_ID) localStorage.removeItem(TTS_LOCK_KEY);
    }
  }catch(e){}
  try{ if(__ttsHeartbeat) clearInterval(__ttsHeartbeat); }catch(e){}
  __ttsHeartbeat = null;
}

// ã‚¿ãƒ–ã‚’é–‰ã˜ã‚‹/ç§»å‹•ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è§£æ”¾
window.addEventListener("beforeunload", () => {
  try{ releaseTtsLock(); }catch(e){}
});

// ã‚¹ãƒãƒ›å¯¾ç­–ï¼šãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã¸è¡Œãã¨ beforeunload ãŒèµ°ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹
document.addEventListener("visibilitychange", () => {
  if(document.hidden){
    // hiddenæ™‚ã¯åœæ­¢ãƒœã‚¿ãƒ³ç›¸å½“ï¼ˆèª­ã¿ä¸Šã’ã‚‚æ­¢ã‚ã‚‹ï¼‰
    try{ window.speechSynthesis && window.speechSynthesis.cancel(); }catch(e){}
    try{ releaseTtsLock(); }catch(e){}
  }
});

// =========================
  // åˆæœŸå˜èªï¼ˆè‹±èªï¼‰
  // en = è‹±èª, ja = æ—¥æœ¬èª
  // =========================
  let WORDS_ALL = [
    { en:"hello", ja:"ã“ã‚“ã«ã¡ã¯", level:1 },
    { en:"hi", ja:"ã‚„ã‚ï¼ã“ã‚“ã«ã¡ã¯", level:1 },
    { en:"good morning", ja:"ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™", level:1 },
    { en:"goodbye", ja:"ã•ã‚ˆã†ãªã‚‰", level:1 },
    { en:"please", ja:"ãŠé¡˜ã„ã—ã¾ã™", level:1 },
    { en:"thank you", ja:"ã‚ã‚ŠãŒã¨ã†", level:1 },
    { en:"you're welcome", ja:"ã©ã†ã„ãŸã—ã¾ã—ã¦", level:2 },
    { en:"sorry", ja:"ã”ã‚ã‚“ãªã•ã„", level:1 },
    { en:"excuse me", ja:"ã™ã¿ã¾ã›ã‚“ï¼ˆå‘¼ã³ã‹ã‘ï¼‰", level:1 },
    { en:"yes", ja:"ã¯ã„", level:1 },
    { en:"no", ja:"ã„ã„ãˆ", level:1 },
    { en:"help", ja:"åŠ©ã‘ã¦", level:1 },
    { en:"stop", ja:"æ­¢ã¾ã£ã¦", level:1 },
    { en:"wait a second", ja:"ã¡ã‚‡ã£ã¨å¾…ã£ã¦", level:2 },
    { en:"again", ja:"ã‚‚ã†ä¸€åº¦", level:1 },
    { en:"slowly", ja:"ã‚†ã£ãã‚Š", level:2 },
    { en:"I don't understand", ja:"ã‚ã‹ã‚Šã¾ã›ã‚“", level:2 },
    { en:"where", ja:"ã©ã“", level:1 },
    { en:"what", ja:"ãªã«", level:1 },
    { en:"how", ja:"ã©ã†", level:1 },
    { en:"why", ja:"ãªãœ", level:2 },
    { en:"here", ja:"ã“ã“", level:1 },
    { en:"left", ja:"å·¦", level:1 },
    { en:"right", ja:"å³", level:1 },
    { en:"straight", ja:"ã¾ã£ã™ã", level:1 },
    { en:"near", ja:"è¿‘ã", level:1 },
    { en:"map", ja:"åœ°å›³", level:1 },
    { en:"address", ja:"ä½æ‰€", level:2 },
    { en:"airport", ja:"ç©ºæ¸¯", level:1 },
    { en:"station", ja:"é§…", level:1 },
    { en:"bus", ja:"ãƒã‚¹", level:1 },
    { en:"train", ja:"é›»è»Š", level:1 },
    { en:"taxi", ja:"ã‚¿ã‚¯ã‚·ãƒ¼", level:1 },
    { en:"ticket", ja:"åˆ‡ç¬¦ï¼ãƒã‚±ãƒƒãƒˆ", level:1 },
    { en:"platform", ja:"ãƒ›ãƒ¼ãƒ ï¼ˆä¹—ã‚Šå ´ï¼‰", level:2 },
    { en:"gate", ja:"ã‚²ãƒ¼ãƒˆ", level:2 },
    { en:"departure", ja:"å‡ºç™º", level:2 },
    { en:"arrival", ja:"åˆ°ç€", level:2 },
    { en:"entrance", ja:"å…¥å£", level:2 },
    { en:"exit", ja:"å‡ºå£", level:2 },
    { en:"hotel", ja:"ãƒ›ãƒ†ãƒ«", level:1 },
    { en:"room", ja:"éƒ¨å±‹", level:1 },
    { en:"key", ja:"éµï¼ã‚­ãƒ¼", level:1 },
    { en:"reservation", ja:"äºˆç´„", level:2 },
    { en:"check in", ja:"ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã™ã‚‹", level:2 },
    { en:"check out", ja:"ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã™ã‚‹", level:2 },
    { en:"luggage", ja:"è·ç‰©", level:2 },
    { en:"passport", ja:"ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ", level:2 },
    { en:"money", ja:"ãŠé‡‘", level:1 },
    { en:"cash", ja:"ç¾é‡‘", level:2 },
    { en:"card", ja:"ã‚«ãƒ¼ãƒ‰", level:1 },
    { en:"price", ja:"å€¤æ®µ", level:1 },
    { en:"how much", ja:"ã„ãã‚‰ã§ã™ã‹", level:2 },
    { en:"buy", ja:"è²·ã†", level:1 },
    { en:"pay", ja:"æ‰•ã†", level:1 },
    { en:"open", ja:"é–‹ã„ã¦ã„ã‚‹ï¼é–‹ã‘ã‚‹", level:1 },
    { en:"toilet", ja:"ãƒˆã‚¤ãƒ¬", level:1 },
    { en:"water", ja:"æ°´", level:1 },
    { en:"restaurant", ja:"ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³", level:1 },
    { en:"menu", ja:"ãƒ¡ãƒ‹ãƒ¥ãƒ¼", level:1 },
    { en:"order", ja:"æ³¨æ–‡ã™ã‚‹", level:2 },
    { en:"recommend", ja:"ãŠã™ã™ã‚ã™ã‚‹ï¼ãŠã™ã™ã‚ã¯ï¼Ÿ", level:2 },
    { en:"delicious", ja:"ãŠã„ã—ã„", level:2 },
    { en:"spicy", ja:"è¾›ã„", level:2 },
    { en:"sweet", ja:"ç”˜ã„", level:2 },
    { en:"salty", ja:"ã—ã‚‡ã£ã±ã„", level:2 },
    { en:"allergy", ja:"ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼", level:2 },
    { en:"vegetarian", ja:"èœé£Ÿä¸»ç¾©ã®", level:3 },
    { en:"breakfast", ja:"æœã”ã¯ã‚“", level:1 },
    { en:"lunch", ja:"æ˜¼ã”ã¯ã‚“", level:1 },
    { en:"dinner", ja:"å¤•é£Ÿ", level:1 },
    { en:"bill", ja:"ãŠä¼šè¨ˆ", level:2 },
    { en:"receipt", ja:"ãƒ¬ã‚·ãƒ¼ãƒˆ", level:2 },
    { en:"takeout", ja:"æŒã¡å¸°ã‚Š", level:2 },
    { en:"shop", ja:"åº—ï¼è²·ã„ç‰©ã™ã‚‹", level:1 },
    { en:"sale", ja:"ã‚»ãƒ¼ãƒ«", level:2 },
    { en:"size", ja:"ã‚µã‚¤ã‚º", level:2 },
    { en:"color", ja:"è‰²", level:1 },
    { en:"try on", ja:"è©¦ç€ã™ã‚‹", level:2 },
    { en:"fitting room", ja:"è©¦ç€å®¤", level:2 },
    { en:"too big", ja:"å¤§ãã™ãã‚‹", level:2 },
    { en:"too small", ja:"å°ã•ã™ãã‚‹", level:2 },
    { en:"exchange", ja:"äº¤æ›ã™ã‚‹", level:2 },
    { en:"return", ja:"è¿”å“ã™ã‚‹ï¼æˆ»ã‚‹", level:2 },
    { en:"pharmacy", ja:"è–¬å±€", level:3 },
    { en:"hospital", ja:"ç—…é™¢", level:2 },
    { en:"emergency", ja:"ç·Šæ€¥äº‹æ…‹", level:3 },
    { en:"police", ja:"è­¦å¯Ÿ", level:2 },
    { en:"lost", ja:"é“ã«è¿·ã£ãŸ", level:2 },
    { en:"today", ja:"ä»Šæ—¥", level:1 },
    { en:"tomorrow", ja:"æ˜æ—¥", level:1 },
    { en:"yesterday", ja:"æ˜¨æ—¥", level:1 },
    { en:"now", ja:"ä»Š", level:1 },
    { en:"Wi-Fi", ja:"Wi-Fi", level:2 },
    { en:"password", ja:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", level:2 },
    { en:"elevator", ja:"ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼", level:2 },
    { en:"shower", ja:"ã‚·ãƒ£ãƒ¯ãƒ¼", level:1 },
    { en:"towel", ja:"ã‚¿ã‚ªãƒ«", level:2 },
    { en:"problem", ja:"å•é¡Œ", level:2 },
    { en:"quiet", ja:"é™ã‹ãª", level:2 }
  ];
  const BUILTIN_WORDS_ALL = JSON.parse(JSON.stringify(WORDS_ALL)); // å†…è”µãƒ‡ãƒ¼ã‚¿ã®é€€é¿


  WORDS_ALL = WORDS_ALL.map(w => ({...w, lang: w.lang || w.en_lang || 'en-US'}));
  let WORDS = WORDS_ALL.slice();
  let CURRENT_CSV_NAME = "å†…è”µãƒ‡ãƒ¼ã‚¿";
  let CURRENT_CSV_HASH = "builtin";

  // =========================
  // Last CSV persistence (v75)
  // =========================
  const LAST_CSV_NAME_KEY = "hamaru_last_csv_name_v1";
  const LAST_CSV_HASH_KEY = "hamaru_last_csv_hash_v1";
  const LAST_CSV_ITEMS_KEY = "hamaru_last_csv_items_v1";

  function restoreAllFromLastCsvIfNeeded(){
    try{
      const name = localStorage.getItem(LAST_CSV_NAME_KEY);
      const hash = localStorage.getItem(LAST_CSV_HASH_KEY);
      const raw  = localStorage.getItem(LAST_CSV_ITEMS_KEY);
      if(!name || !hash || !raw) return false;

      // ã™ã§ã«åŒã˜ãªã‚‰ä½•ã‚‚ã—ãªã„
      if(hash === CURRENT_CSV_HASH && name === CURRENT_CSV_NAME) return false;

      const items = JSON.parse(raw);
      if(!Array.isArray(items) || items.length < 4) return false;

      const norm = items.map(it=>({
        en: (it?.en ?? "").toString().trim(),
        ja: (it?.ja ?? "").toString().trim(),
        level: clamp(Number(it?.level ?? 1) || 1, 1, 99),
        lang: (it?.lang ?? it?.en_lang ?? "").toString().trim(),
        en_lang: (it?.en_lang ?? "").toString().trim(),
        ja_lang: (it?.ja_lang ?? "").toString().trim(),
        tts: (it?.tts ?? "").toString().trim()
      })).filter(it=>it.en && it.ja);

      if(norm.length < 4) return false;

      CURRENT_CSV_NAME = name;
      CURRENT_CSV_HASH = hash;
      WORDS_ALL = norm;
      WORDS = WORDS_ALL.slice();

      try{ applyDeckFilter(); }catch(e){}
      try{ renderHud(); }catch(e){}
      try{
        const el = document.getElementById("lastCsvStatus");
        if(el) el.textContent = `âœ… å‰å›CSVã‚’å¾©å…ƒ: ${name}`;
      }catch(e){}
      try{
        const el = document.getElementById("csvStatus");
        if(el) el.textContent = `âœ… å‰å›CSVã‚’å¾©å…ƒ: ${name}ï¼ˆ${norm.length}èªï¼‰`;
      }catch(e){}
      return true;
    }catch(e){
      return false;
    }
  }

  function forgetLastCsv(){
    try{
      localStorage.removeItem(LAST_CSV_NAME_KEY);
      localStorage.removeItem(LAST_CSV_HASH_KEY);
      localStorage.removeItem(LAST_CSV_ITEMS_KEY);
    }catch(e){}

    // å†…è”µãƒ‡ãƒ¼ã‚¿ã¸æˆ»ã™
    try{
      WORDS_ALL = JSON.parse(JSON.stringify(BUILTIN_WORDS_ALL))
        .map(w => ({...w, lang: w.lang || w.en_lang || "en-US"}));
      WORDS = WORDS_ALL.slice();
      CURRENT_CSV_NAME = "å†…è”µãƒ‡ãƒ¼ã‚¿";
      CURRENT_CSV_HASH = "builtin";

      // å¾©ç¿’ã®æ®‹éª¸ã‚’æ¶ˆã™ï¼ˆå‡ºé¡Œ0å¯¾ç­–ï¼‰
      try{ if (elReviewMode) elReviewMode.value = "off"; }catch(e){}
      try{ REVIEW_SET = []; }catch(e){}

      try{ applyDeckFilter(); }catch(e){}
      try{ renderHud(); }catch(e){}
      try{ resetGame(); }catch(e){}

      try{
        const el = document.getElementById("lastCsvStatus");
        if(el) el.textContent = "ï¼ˆå‰å›CSVãªã—ï¼‰";
      }catch(e){}
      try{
        const el = document.getElementById("csvStatus");
        if(el) el.textContent = "ğŸ§¹ å‰å›CSVã‚’å¿˜ã‚Œã¾ã—ãŸï¼ˆå†…è”µãƒ‡ãƒ¼ã‚¿ã«æˆ»ã—ã¾ã—ãŸï¼‰";
      }catch(e){}
    }catch(e){}
  }
  // =========================
  // Quiz Mode: single / mix
  // =========================
  const QUIZ_MODE_KEY = "hamaru_quiz_mode_v1";
  function loadQuizMode(){
    try{ return localStorage.getItem(QUIZ_MODE_KEY) || "single"; }catch(e){ return "single"; }
  }
  function saveQuizMode(v){
    try{ localStorage.setItem(QUIZ_MODE_KEY, v); }catch(e){}
  }
  let QUIZ_MODE = loadQuizMode();

  function keyForWord(w){
    const en = (w.en||"").toString().trim();
    const ja = (w.ja||"").toString().trim();
    const lang = (w.lang||w.en_lang||"").toString().trim();
    return (en+"||"+ja+"||"+lang).toLowerCase();
  }
  function mergeUnique(a,b){
    const seen = new Set();
    const out = [];
    for(const src of [a,b]){
      for(const w of (src||[])){
        const k = keyForWord(w);
        if(seen.has(k)) continue;
        seen.add(k);
        out.push(w);
      }
    }
    return out;
  }
  function getWordsAllForQuiz(){
    if(QUIZ_MODE === "mix"){
      // å†…è”µ + ç¾åœ¨ã®å˜èªå¸³ï¼ˆã©ã¡ã‚‰ãŒå…ˆã§ã‚‚OKã ãŒã€ã„ã¾ã®å˜èªå¸³å„ªå…ˆã§ä¸¦ã¹ã‚‹ï¼‰
      return mergeUnique(WORDS_ALL, BUILTIN_WORDS_ALL);
    }
    return WORDS_ALL;
  }

 // CSVå†…å®¹ãƒ™ãƒ¼ã‚¹ã®æŒ‡ç´‹ï¼ˆSHA-256ï¼‰

  // =========================
  // Daily learning log (per CSV hash) âœ… ä»Šæ—¥ / å±¥æ­´ / é€£ç¶š
  // =========================
  const DAILY_PREFIX = "hamaru_daily_v68::";           // per day + csvhash
  const DAILY_HISTORY_PREFIX = "hamaru_daily_hist_v68::"; // per csvhash list
  let DAILY = { date:"", seen:0, correct:0, wrong:0, skip:0, updatedAt:0 };

  function jstDateKey(d=new Date()){
    try{
      // "sv-SE" -> YYYY-MM-DD
      return new Intl.DateTimeFormat("sv-SE",{ timeZone:"Asia/Tokyo", year:"numeric", month:"2-digit", day:"2-digit" }).format(d);
    }catch(e){
      // fallback (local)
      return d.toISOString().slice(0,10);
    }
  }
  function dailyKeyFor(hash, date){ return `${DAILY_PREFIX}${hash}::${date}`; }
  function dailyHistoryKeyFor(hash){ return `${DAILY_HISTORY_PREFIX}${hash}`; }

  function loadDailyForCurrent(){
    const date = jstDateKey();
    DAILY.date = date;
    try{
      const raw = localStorage.getItem(dailyKeyFor(CURRENT_CSV_HASH, date));
      if(raw){
        const obj = JSON.parse(raw);
        DAILY = { date, seen: Number(obj.seen||0), correct:Number(obj.correct||0), wrong:Number(obj.wrong||0), skip:Number(obj.skip||0), updatedAt:Number(obj.updatedAt||0) };
      }else{
        DAILY = { date, seen:0, correct:0, wrong:0, skip:0, updatedAt:0 };
      }
    }catch(e){
      DAILY = { date, seen:0, correct:0, wrong:0, skip:0, updatedAt:0 };
    }
    renderDailyUI();
  }

  function saveDaily(){
    try{
      DAILY.updatedAt = Date.now();
      localStorage.setItem(dailyKeyFor(CURRENT_CSV_HASH, DAILY.date), JSON.stringify(DAILY));
    }catch(e){}
  }

  function loadDailyHistory(){
    try{
      const raw = localStorage.getItem(dailyHistoryKeyFor(CURRENT_CSV_HASH));
      const arr = raw ? JSON.parse(raw) : [];
      return Array.isArray(arr) ? arr : [];
    }catch(e){
      return [];
    }
  }

  function saveDailyHistory(arr){
    try{ localStorage.setItem(dailyHistoryKeyFor(CURRENT_CSV_HASH), JSON.stringify(arr||[])); }catch(e){}
  }

  function upsertTodayInHistory(){
    const arr = loadDailyHistory();
    const date = DAILY.date;
    const rec = {
      date,
      csvName: CURRENT_CSV_NAME || "ï¼ˆä¸æ˜ï¼‰",
      seen: DAILY.seen, correct: DAILY.correct, wrong: DAILY.wrong, skip: DAILY.skip
    };
    const out = [rec, ...arr.filter(x => x && x.date !== date)];
    saveDailyHistory(out.slice(0, 30));
  }

  function calcStreak(){
    const arr = loadDailyHistory().slice().sort((a,b)=> String(b.date).localeCompare(String(a.date)));
    if(!arr.length) return 0;

    // index by date for fast lookup
    const map = new Map();
    for(const r of arr){
      if(r && r.date) map.set(String(r.date), r);
    }

    let streak = 0;
    let d = new Date();
    for(let i=0; i<366; i++){
      const key = jstDateKey(d);
      const r = map.get(key);
      if(r && Number(r.seen||0) > 0){
        streak++;
        d.setDate(d.getDate()-1);
      }else{
        break;
      }
    }
    return streak;
  }

  let __dailySaveTimer = null;
  function dailyInc(kind, n=1){
    if(!DAILY || DAILY.date !== jstDateKey()) loadDailyForCurrent();
    if(kind === "seen") DAILY.seen += n;
    if(kind === "correct") DAILY.correct += n;
    if(kind === "wrong") DAILY.wrong += n;
    if(kind === "skip") DAILY.skip += n;

    try{ if(__dailySaveTimer) clearTimeout(__dailySaveTimer); }catch(e){}
    __dailySaveTimer = setTimeout(()=>{
      saveDaily();
      upsertTodayInHistory();
      renderDailyUI();
    }, 80);
  }

  function renderDailyUI(){
    const acc = DAILY.seen ? Math.round((DAILY.correct/DAILY.seen)*100) : 0;
    const streak = calcStreak();

    const elDailyHud = document.getElementById("dailyHud");
    const elStreakHud = document.getElementById("streakHud");
    const elDailySummaryLine = document.getElementById("dailySummaryLine");
    const elStreakLine = document.getElementById("streakLine");
    const elDailyHistory = document.getElementById("dailyHistory");

    if(elDailyHud) elDailyHud.textContent = `${DAILY.seen}å• ${acc}%`;
    if(elStreakHud) elStreakHud.textContent = `ğŸ”¥${streak}`;

    if(elDailySummaryLine){
      elDailySummaryLine.textContent = `ä»Šæ—¥: å‡ºé¡Œ${DAILY.seen} / æ­£è§£${DAILY.correct} / ä¸æ­£è§£${DAILY.wrong} / ã‚¹ã‚­ãƒƒãƒ—${DAILY.skip} / æ­£è§£ç‡${acc}%`;
    }
    if(elStreakLine){
      elStreakLine.textContent = `é€£ç¶š: ${streak}æ—¥`;
    }

    if(elDailyHistory){
      const arr = loadDailyHistory();
      if(!arr.length){
        elDailyHistory.innerHTML = `<div class="small">ã¾ã å±¥æ­´ãŒãªã„ã‚ˆã€‚ã¾ãšã¯ä½•å•ã‹è§£ã„ã¦ã­ã€‚</div>`;
      }else{
        elDailyHistory.innerHTML = arr.map(r=>{
          const seen = Number(r.seen||0);
          const correct = Number(r.correct||0);
          const a = seen ? Math.round((correct/seen)*100) : 0;
          return `<div style="padding:6px 0;border-bottom:1px solid rgba(255,255,255,.08);">
            <b>${escapeHtml(r.date || "")}</b> <span class="small">(${escapeHtml(r.csvName||"")})</span><br/>
            <span class="small">å‡ºé¡Œ${seen} / æ­£è§£ç‡${a}%ï¼ˆæ­£è§£${correct}ãƒ»ä¸æ­£è§£${Number(r.wrong||0)}ãƒ»ã‚¹ã‚­ãƒƒãƒ—${Number(r.skip||0)}ï¼‰</span>
          </div>`;
        }).join("");
      }
    }
  }


  
  // =========================
  // DOM
  // =========================
  const elScore = document.getElementById("score");
  const elCombo = document.getElementById("combo");
  const elAcc = document.getElementById("acc");
  const elRemaining = document.getElementById("remaining");
  const elCsvHud = document.getElementById("csvHud");
  const elPrompt = document.getElementById("prompt");
  const elTime = document.getElementById("time");
  const elBar = document.getElementById("bar");
  const elChoices = document.getElementById("choices");
  const elFlash = document.getElementById("flash");
  const elModeLabel = document.getElementById("modeLabel");

  const elSkip = document.getElementById("skip");
  const elRestart = document.getElementById("restart");
  const elShowResultsBtn = document.getElementById("showResultsBtn");
  const elPauseBtn = document.getElementById("pauseBtn");

const elDirection = document.getElementById("direction");
  const elSecondsPerQ = document.getElementById("secondsPerQ");
  const elReviewWeight = document.getElementById("reviewWeight");
  const elRounds = document.getElementById("rounds");

  const elQuizMode = document.getElementById("quizMode");
  const elDeckSelect = document.getElementById("deckSelect");
  const elDeckStatus = document.getElementById("deckStatus");

  const elCsvFile = document.getElementById("csvFile");
  const elCsvStatus = document.getElementById("csvStatus");

  // CSV overwrite choice panel
  const elOverwritePanel = document.getElementById("overwritePanel");
  const elOverwriteInfo  = document.getElementById("overwriteInfo");
  const elBtnInheritAll  = document.getElementById("btnInheritAll");
  const elBtnMergeCommon = document.getElementById("btnMergeCommon");
  const elBtnResetNew    = document.getElementById("btnResetNew");
  const elBtnCancelLoad  = document.getElementById("btnCancelLoad");

  const elReviewMode = document.getElementById("reviewMode");
  const elReviewCount = document.getElementById("reviewCount");
  const elPickReview = document.getElementById("pickReview");
  const elClearReview = document.getElementById("clearReview");


  const elResetStats = document.getElementById("resetStats");
const elAutoPickWeak = document.getElementById("autoPickWeak");
const elWeakThreshold = document.getElementById("weakThreshold");

const elAutoPickWeakGlobal = document.getElementById("autoPickWeakGlobal");
const elOpenGlobalWeak = document.getElementById("openGlobalWeak");

const elGlobalWeakPanel = document.getElementById("globalWeakPanel");
const elCloseGlobalWeak = document.getElementById("closeGlobalWeak");
const elRefreshGlobalWeak = document.getElementById("refreshGlobalWeak");
const elApplyGlobalWeakToReview = document.getElementById("applyGlobalWeakToReview");
const elLoadGlobalReview = document.getElementById("loadGlobalReview");
const elGlobalWeakList = document.getElementById("globalWeakList");
const elGlobalWeakInfo = document.getElementById("globalWeakInfo");
const elGlobalMinSeen = document.getElementById("globalMinSeen");
const elGlobalWeakThreshold = document.getElementById("globalWeakThreshold");



  const elReviewStatus = document.getElementById("reviewStatus");
  const elReviewPanel = document.getElementById("reviewPanel");
  const elReviewList = document.getElementById("reviewList");
  const elSaveReview = document.getElementById("saveReview");
  const elReviewMax = document.getElementById("reviewMax");

  const elResultPanel = document.getElementById("resultPanel");
  const elResultMinSeen = document.getElementById("resultMinSeen");
  const elAutoPickWeakFromResults = document.getElementById("autoPickWeakFromResults");
  const elResultSummary = document.getElementById("resultSummary");
  const elResultTable = document.getElementById("resultTable");
  const elCloseResult = document.getElementById("closeResult");

    const elCloseResultTop = document.getElementById("closeResultTop");
// çµæœè¡¨ç¤ºãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
  elResultMinSeen?.addEventListener("change", () => {
    // ã™ã§ã«çµæœãƒ‘ãƒãƒ«ãŒé–‹ã„ã¦ã„ã‚‹ã¨ãã¯å³åæ˜ 
    if (elResultPanel && elResultPanel.style.display !== "none") showResults();
  });

  // TTS
  const elSpeak = document.getElementById("speak");
    const elAutoSpeak = document.getElementById("autoSpeak");
  const elVoiceSelect = document.getElementById("voiceSelect");
  const elRate = document.getElementById("rate");
  const elRateLabel = document.getElementById("rateLabel");
  const elVolume = document.getElementById("volume");
  const elVolLabel = document.getElementById("volLabel");
  const elTtsHint = document.getElementById("ttsHint");

  const elVoiceMode = document.getElementById("voiceMode");
  let VOICE_MODE = localStorage.getItem("VOICE_MODE") || "auto"; // auto | local | online

  if (elVoiceMode) {
    elVoiceMode.value = VOICE_MODE;
    elVoiceMode.addEventListener("change", () => {
      VOICE_MODE = elVoiceMode.value;
      localStorage.setItem("VOICE_MODE", VOICE_MODE);
      showFlash("good", "éŸ³å£°ãƒ¢ãƒ¼ãƒ‰: " + (VOICE_MODE === "auto" ? "è‡ªå‹•" : (VOICE_MODE === "local" ? "ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿" : "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ã¿")));
    });
  }

  // ã‚ªãƒ³ãƒ©ã‚¤ãƒ³èª­ã¿ä¸Šã’ï¼ˆç°¡æ˜“TTSï¼‰: è¨€èªã‚³ãƒ¼ãƒ‰ã¯ primaryï¼ˆä¾‹: fr, it, jaï¼‰
  // æ³¨æ„: ã‚µãƒ¼ãƒ“ã‚¹å´ã®åˆ¶é™ã§å‹•ã‹ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®æ™‚ã¯ãƒ­ãƒ¼ã‚«ãƒ«/è‡ªå‹•ã«æˆ»ã—ã¦ãã ã•ã„ã€‚
  let __onlineAudio = null;
  function speakOnline(text, langPrimary, isAuto=false){
    try{
      const lp = String(langPrimary || "en").toLowerCase();
      // translate_tts ã¯çŸ­æ–‡å‘ã‘ã€‚é•·æ–‡ã¯é€”åˆ‡ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
      const url = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(text)}&tl=${lp}&client=tw-ob`;
      if (!__onlineAudio) __onlineAudio = new Audio();
      if (!isAuto) { try{ __onlineAudio.pause(); }catch(e){} }
      __onlineAudio.src = url;
      __onlineAudio.play().catch(()=>{ /* blocked */ });
      updateVoiceLine(current, { mode:"online", name:"Online TTS", lang: lp });
    }catch(e){}
  }


  // =========================
  // æˆç¸¾ï¼ˆå˜èªã”ã¨ï¼‰
  // =========================
  let STATS = new Map();
  function wordKey(w){ return `${w.en}||${w.ja}||${w.level}`; }
  function ensureStat(w){
    const k = wordKey(w);
    if (!STATS.has(k)) {
      STATS.set(k, {
        en: w.en, ja: w.ja, level: w.level,
        seen: 0, correct: 0, wrong: 0, skip: 0,
        wrongChoices: new Set(),
        langs: new Set(),
      });
    }
    const st = STATS.get(k);
    try { const l = normLang(w.lang || w.en_lang || ''); if (l) st.langs.add(l); } catch {}
    return st;
  }

  
  // =========================
  // Language filter (lang column)
  // =========================
  const elLangFilter = document.getElementById("langFilter");
  const elLangChips = document.getElementById("langChips");
  const elLangAll = document.getElementById("langAll");
  const elLangClear = document.getElementById("langClear");
  const elLangFilterStatus = document.getElementById("langFilterStatus");

  let SELECTED_LANGS = new Set(); // empty = all (no filter)

  function normLang(x){
    const s = (x || "").toString().trim();
    if (!s) return "";
    const t = s.replace("_","-");
    const low = t.toLowerCase();
    // tolerant mapping (CSV may use short tags)
    if (low === "en") return "en-US";
    if (low === "ja") return "ja-JP";
    if (low === "ko") return "ko-KR";
    if (low === "zh-tw" || low === "zh-hant" || low === "tw") return "zh-TW";
    if (low === "zh-cn" || low === "zh-hans" || low === "cn") return "zh-CN";
    if (low === "fr") return "fr-FR";
    if (low === "de") return "de-DE";
    if (low === "es") return "es-ES";
    if (low === "it") return "it-IT";
    if (low === "pt" || low === "pt-br") return "pt-BR";
    // normalize casing like en-us -> en-US
    const parts = t.split("-");
    if (parts.length === 1) return parts[0];
    return parts[0].toLowerCase() + "-" + parts[1].toUpperCase();
  }

  function getKnownLangs() {
    const s = new Set();
    // current words
    try { (WORDS || []).forEach(w => { const l = normLang(w.lang || w.en_lang); if (l) s.add(l); }); } catch {}
    // review set
    try { (REVIEW_SET || []).forEach(w => { const l = normLang(w.lang || w.en_lang); if (l) s.add(l); }); } catch {}
    // stats (across this CSV) if langs stored
    try {
      (STATS || new Map()).forEach(v => {
        if (v && v.langs) for (const l of v.langs) if (l) s.add(l);
      });
    } catch {}
    // nice defaults
    if (s.size === 0) { ["en-US","ja-JP","ko-KR","zh-TW","zh-CN","fr-FR","de-DE","es-ES","it-IT","pt-BR"].forEach(x=>s.add(x)); }
    return Array.from(s).sort();
  }

  
  function renderLangFilterOptions() {
    const langs = getKnownLangs();
    const prev = new Set(Array.from(SELECTED_LANGS));

    // hidden select (for compatibility / debugging)
    if (elLangFilter) {
      elLangFilter.innerHTML = "";
      for (const l of langs) {
        const opt = document.createElement("option");
        opt.value = l;
        opt.textContent = l;
        elLangFilter.appendChild(opt);
      }
    }

    // chips UI (mobile-friendly)
    if (elLangChips) {
      elLangChips.innerHTML = "";
      for (const l of langs) {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "langchip";
        b.textContent = l;

        const isOn = prev.has(l);
        if (isOn) b.classList.add("on");

        b.addEventListener("click", () => {
          // Toggle selection
          if (SELECTED_LANGS.size === 0) {
            // ç›´å‰ãŒã€Œå…¨è§£é™¤(ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç„¡ã—)ã€= ç©ºã‚»ãƒƒãƒˆã®å ´åˆ
            // æœ€åˆã®1ã‚¯ãƒªãƒƒã‚¯ã¯ã€Œãã®è¨€èªã ã‘é¸ã¶ï¼ˆå˜ç‹¬é¸æŠï¼‰ã€ã«ã™ã‚‹
            SELECTED_LANGS = new Set([l]);
          } else {
            // é€šå¸¸ãƒˆã‚°ãƒ«
            if (SELECTED_LANGS.has(l)) SELECTED_LANGS.delete(l);
            else SELECTED_LANGS.add(l);

            // ã‚‚ã—å…¨éƒ¨ONã«ãªã£ãŸã‚‰ã€Œãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç„¡ã—ï¼ˆå…¨éƒ¨å¯¾è±¡ï¼‰ã€ã«ç•³ã‚€
            if (SELECTED_LANGS.size === langs.length) {
              SELECTED_LANGS = new Set(); // all
            }
          }

          // Re-render chips + status
          renderLangFilterOptions();
          updateLangFilterStatus();
        });

        elLangChips.appendChild(b);
      }
    }

    updateLangFilterStatus();
  }


  function updateSelectedLangsFromUI() {
    // ãƒãƒƒãƒ—UIã‚’ä½¿ã†ã®ã§ã€selectå¤‰æ›´ã¯åŸºæœ¬ä½¿ã‚ãªã„ï¼ˆäº’æ›ç”¨ï¼‰
    if (!elLangFilter) return;
    const selected = Array.from(elLangFilter.selectedOptions).map(o => o.value);
    const all = Array.from(elLangFilter.options).map(o => o.value);
    // If everything selected => treat as "all" (empty set) to keep simple
    if (selected.length === 0 || selected.length === all.length) {
      SELECTED_LANGS = new Set(); // all
    } else {
      SELECTED_LANGS = new Set(selected);
    }
    updateLangFilterStatus();
  }

  function updateLangFilterStatus() {
    if (!elLangFilterStatus) return;
    if (SELECTED_LANGS.size === 0) {
      elLangFilterStatus.textContent = "è¨€èª: ã™ã¹ã¦";
    } else {
      elLangFilterStatus.textContent = "è¨€èª: " + Array.from(SELECTED_LANGS).join(", ");
    }
  }

  function langPass(w) {
    const raw = (w?.lang || w?.en_lang || "").toString();
    const primary = raw.split(/[\/\,\s]+/)[0];
    const l = normLang(primary);
    if (SELECTED_LANGS.size === 0) return true; // all
    return SELECTED_LANGS.has(l);
  }

  function filterByLang(list) {
    const arr = Array.isArray(list) ? list : [];
    // é¸æŠãŒç©ºï¼ˆ=ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç„¡ã—ï¼‰ã®ã¨ãã¯ã€ãã®ã¾ã¾å…¨éƒ¨OK
    if (SELECTED_LANGS.size === 0) return arr;
    // ãã‚Œä»¥å¤–ã¯å³å¯†ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã™ã‚‹ï¼ˆ0ä»¶ãªã‚‰0ä»¶ã§è¿”ã™ï¼‰
    return arr.filter(w => langPass(w));
  }


  function debugActiveStatus(activeList){
    try{
      const deckv = elDeckSelect ? elDeckSelect.value : "all";
      const langtxt = (SELECTED_LANGS.size === 0) ? "ã™ã¹ã¦" : Array.from(SELECTED_LANGS).join(", ");
      const rev = elReviewMode ? elReviewMode.value : "off";
      const revn = (REVIEW_SET && REVIEW_SET.length) ? REVIEW_SET.length : 0;
      if (elCsvStatus){
        elCsvStatus.textContent =
          `ç¾åœ¨ã®CSV: ${CURRENT_CSV_NAME}ï¼ˆç·${(WORDS_ALL||[]).length}èªï¼‰ / æœ‰åŠ¹:${(activeList||[]).length}èª / ãƒ‡ãƒƒã‚­:${deckv} / è¨€èª:${langtxt} / å¾©ç¿’:${rev}(${revn})`;
      }
    }catch(e){}
  }


  // =========================
  // State
  // =========================
  let deck = [];
  let current = null;
  let locked = false;

  let isPaused = false;


// ===== Auto Pause on Tab Hidden (prevents ranking drift while left open) =====
let __lastHiddenAt = 0;
document.addEventListener("visibilitychange", () => {
  if (document.hidden) {
    __lastHiddenAt = Date.now();
    // stop timer/game progress
    isPaused = true;
    try { showFlash("bad", "â¸ ç”»é¢ãŒéè¡¨ç¤ºã®ãŸã‚è‡ªå‹•åœæ­¢ä¸­"); } catch(e) {}
  
    try{ if (elPauseBtn) elPauseBtn.textContent = "â–¶ å†é–‹"; }catch(e){}
} else {
    // Do NOT auto-resume to avoid accidental progress.
    // User can resume via the existing pause/resume control.
    try { showFlash("good", "â–¶ æˆ»ã‚Šã¾ã—ãŸã€‚å†é–‹ã™ã‚‹ã«ã¯ã€Œâ–¶ å†é–‹ã€ã‚’æŠ¼ã—ã¦ã­"); } catch(e) {}
  }
});

// ===== Idle Auto Pause (even while visible) =====
// If no user input for this long, the game pauses to prevent ranking drift while left open.
// Change the number to your liking (milliseconds). Example: 300000 = 5 minutes.
let IDLE_LIMIT_MS = 30000; // 30ç§’
let __lastActiveAt = Date.now();
let __idlePaused = false;

function __markActive(){
  __lastActiveAt = Date.now();
  // If it was paused by idle, resume on next user action
  if(__idlePaused){
    __idlePaused = false;
    // resume only if user is actually back
    isPaused = false;
    try {
      if (typeof scheduleTimer === "function") scheduleTimer(pausedRemain ?? secondsPerQ);
      try { showFlash("good", "â–¶ æ“ä½œã‚’æ¤œçŸ¥ã—ãŸã®ã§å†é–‹ã—ãŸã‚ˆ"); } catch(e) {}
    } catch(e) {}
  }
}

["mousemove","mousedown","keydown","touchstart","pointerdown","wheel","click"].forEach(ev=>{
  window.addEventListener(ev, __markActive, {passive:true});
});

setInterval(()=>{
  try{
    if (document.hidden) return;         // handled by visibility pause
    if (__idlePaused) return;
    if (isPaused) return;               // already paused by user/overlay
    const idleMs = Date.now() - __lastActiveAt;
    if (idleMs >= IDLE_LIMIT_MS){
      isPaused = true;
      __idlePaused = true;
      
      try{ if (elPauseBtn) elPauseBtn.textContent = "â–¶ å†é–‹"; }catch(e){}
const sec = Math.round(IDLE_LIMIT_MS/1000);
      try { showFlash("bad", `â¸ ${sec}ç§’æ“ä½œãŒãªã„ã®ã§è‡ªå‹•åœæ­¢ï¼ˆã‚¯ãƒªãƒƒã‚¯/ã‚­ãƒ¼ã§å†é–‹ï¼‰`); } catch(e) {}
    }
  }catch(e){}
}, 1000);

  let pausedRemain = null;

  // =========================
  // Overlay pause control
  // ç”»é¢ã«ã€Œãƒ©ãƒ³ã‚­ãƒ³ã‚°/è‹¦æ‰‹ã‚»ãƒƒãƒˆã€ãªã©ã®ãƒ‘ãƒãƒ«ã‚’å‡ºã—ã¦ã„ã‚‹é–“ã«
  // ã‚¿ã‚¤ãƒãƒ¼ãŒè£ã§é€²ã‚“ã§å‹æ‰‹ã«å•é¡ŒãŒé€²ã‚€ã®ã‚’é˜²ã
  // =========================
  let overlayDepth = 0;
  let wasRunningBeforeOverlay = false;
  let overlayRequireManualResume = false;
  let needsResetAfterOverlayAction = false; // ãƒ‘ãƒãƒ«å†…æ“ä½œå¾Œã€æ‰‹å‹•å†é–‹æ™‚ã«resetGameã™ã‚‹
  function openOverlay(panelEl){
    if (!panelEl) return;
    if (overlayDepth === 0){
      wasRunningBeforeOverlay = !isPaused;
      overlayRequireManualResume = false;
    }
    overlayDepth++;
    // ä¸€æ™‚åœæ­¢ï¼ˆã‚¿ã‚¤ãƒãƒ¼tickã¯ isPaused ã‚’è¦‹ã¦æ­¢ã¾ã‚‹ï¼‰
    isPaused = true;
    
    try{ if (elPauseBtn) elPauseBtn.textContent = "â–¶ å†é–‹"; }catch(e){}
panelEl.style.display = "block";
  }

  function closeOverlay(panelEl){
    if (!panelEl) return;
    panelEl.style.display = "none";
    overlayDepth = Math.max(0, overlayDepth - 1);
    // ãƒ‘ãƒãƒ«ã‚’å…¨éƒ¨é–‰ã˜ãŸã‚‰ã€é–‹ãå‰ã«å‹•ã„ã¦ã„ãŸæ™‚ã ã‘å†é–‹
    if (overlayDepth === 0 && wasRunningBeforeOverlay && !overlayRequireManualResume){
      isPaused = false;
      scheduleTimer(pausedRemain ?? secondsPerQ);
    
      try{ if (elPauseBtn) elPauseBtn.textContent = "â¸ ä¸€æ™‚åœæ­¢"; }catch(e){}
} else if (overlayDepth === 0) {
      // ãƒ‘ãƒãƒ«å†…ã§ã‚»ãƒƒãƒˆæ“ä½œãªã©ã‚’ã—ãŸå ´åˆã¯ã€é–‰ã˜ã¦ã‚‚è‡ªå‹•å†é–‹ã—ãªã„
      // å†é–‹ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œçµæœã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã§è¡Œã†
      wasRunningBeforeOverlay = false;
    }
  }

  let score = 0;
  let combo = 0;
  let correct = 0;
  let answered = 0;

  let secondsPerQ = 6;
  let reviewWeight = 5;

  let rafId = null;

  // å‘¨å›
  let roundsMode = 1;     // 1..10 or Infinity
  let totalPlanned = 0;   // æœ‰é™: ç·å•é¡Œæ•° / Infinity
  let askedCount = 0;     // å‡ºé¡Œæ•°

  // å¾©ç¿’ã‚»ãƒƒãƒˆ
  let REVIEW_SET = [];

  // â‘¢ æ–¹å‘
  function getDirection(){ return elDirection?.value || "ja2en"; } // ja2en | en2ja

  // =========================
  // Utils
  // =========================
  function shuffle(arr) {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }
  function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }
  function pickN(arr, n, avoidValue) {
    const pool = arr.filter(x => x !== avoidValue);
    return shuffle(pool).slice(0, n);
  }
  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, (c)=>({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
    }[c]));
  }

  // =========================
  // Review persistence (per CSV hash)
  // =========================
  function normalizeCsvText(text) {
  // CSVå†…å®¹ã®æŒ‡ç´‹ï¼ˆãƒãƒƒã‚·ãƒ¥ï¼‰ã‚’å®‰å®šã•ã›ã‚‹ãŸã‚ã®æ­£è¦åŒ–
  // - æ”¹è¡Œã‚³ãƒ¼ãƒ‰å·®ï¼ˆCRLF/LF/CRï¼‰ã‚’çµ±ä¸€
  // - æœ«å°¾ã®ç©ºç™½ã‚„ä½™åˆ†ãªç©ºè¡Œã®æºã‚Œã‚’å¸å
  return (text || "")
    .replace(/\r\n/g, "\n")
    .replace(/\r/g, "\n")
    .trim();
}

async function sha256Hex(text) {
    const enc = new TextEncoder();
    const buf = enc.encode(text);
    const digest = await crypto.subtle.digest("SHA-256", buf);
    const bytes = Array.from(new Uint8Array(digest));
    return bytes.map(b => b.toString(16).padStart(2, "0")).join("");
  }

  function reviewStorageKeyFor(hash){ return `hamaru_review_set::${hash || "builtin"}`; }
function reviewStorageKey(){ return reviewStorageKeyFor(CURRENT_CSV_HASH); }

  function saveReviewToStorage() {
    try {
      const data = (REVIEW_SET || []).map(w => ({
        en: w.en, ja: w.ja, level: Number(w.level ?? 1),
        en_lang: w.en_lang || "", ja_lang: w.ja_lang || ""
      }));
      localStorage.setItem(reviewStorageKey(), JSON.stringify(data));
    } catch {}
  }

  function loadReviewFromStorage() {
    try {
      const raw = localStorage.getItem(reviewStorageKey());
      if (!raw) return;
      const arr = JSON.parse(raw);
      if (!Array.isArray(arr)) return;
      REVIEW_SET = arr;
    } catch {}
  }

  function clearReviewFromStorage() {
    try { localStorage.removeItem(reviewStorageKey()); } catch {}
  }


  // =========================
  // Stats persistence (per CSV hash)
  // =========================
  const STATS_PREFIX = "hamaru_stats::";
  function statsStorageKeyFor(hash){ return `${STATS_PREFIX}${hash || "builtin"}`; }
  function statsStorageKey(){ return statsStorageKeyFor(CURRENT_CSV_HASH); }

  function serializeStatsMap(map){
    const out = [];
    map.forEach((v) => {
      out.push({
        en: v.en, ja: v.ja, level: Number(v.level ?? 1),
        seen: Number(v.seen||0), correct: Number(v.correct||0), wrong: Number(v.wrong||0), skip: Number(v.skip||0),
        wrongChoices: Array.from(v.wrongChoices || []),
        langs: Array.from(v.langs || [])
      });
    });
    return out;
  }

  function loadStatsFromStorage(hash = CURRENT_CSV_HASH){
    try {
      const raw = localStorage.getItem(statsStorageKeyFor(hash));
      if (!raw) { STATS = new Map(); return; }
      const arr = JSON.parse(raw);
      if (!Array.isArray(arr)) { STATS = new Map(); return; }
      STATS = new Map();
      for (const r of arr) {
        const w = { en: r.en, ja: r.ja, level: Number(r.level ?? 1) };
        const st = ensureStat(w);
        st.seen = Number(r.seen||0);
        st.correct = Number(r.correct||0);
        st.wrong = Number(r.wrong||0);
        st.skip = Number(r.skip||0);
        st.wrongChoices = new Set(Array.isArray(r.wrongChoices) ? r.wrongChoices : []);
        st.langs = new Set(Array.isArray(r.langs) ? r.langs : []);
      }
    } catch {
      STATS = new Map();
    }
  }

  let _statsSaveTimer = null;
  function scheduleSaveStats(){
    try { if (_statsSaveTimer) clearTimeout(_statsSaveTimer); } catch {}
    _statsSaveTimer = setTimeout(() => {
      try {
        const data = serializeStatsMap(STATS);
        localStorage.setItem(statsStorageKey(), JSON.stringify(data));
      } catch {}
    }, 250);
  }

  // =========================
  // CSV index (filename -> hashes) for overwrite detection
  // =========================
  const CSV_INDEX_KEY = "hamaru_csv_index_v68";
  function loadCsvIndex(){
    try {
      const raw = localStorage.getItem(CSV_INDEX_KEY);
      const obj = raw ? JSON.parse(raw) : null;
      if (obj && typeof obj === "object") return obj;
    } catch {}
    return { files: {} };
  }
  function saveCsvIndex(idx){
    try { localStorage.setItem(CSV_INDEX_KEY, JSON.stringify(idx)); } catch {}
  }
  function getLastHashForFilename(filename){
    const idx = loadCsvIndex();
    const rec = idx.files?.[filename];
    return rec?.lastHash || "";
  }
  function recordFilenameHash(filename, hash, wordCount){
    const idx = loadCsvIndex();
    if (!idx.files) idx.files = {};
    if (!idx.files[filename]) idx.files[filename] = { lastHash:"", entries:[] };
    const rec = idx.files[filename];
    rec.lastHash = hash;
    const now = Date.now();
    // keep unique
    rec.entries = (rec.entries || []).filter(e => e.hash !== hash);
    rec.entries.unshift({ hash, savedAt: now, wordCount: Number(wordCount||0) });
    // trim
    rec.entries = rec.entries.slice(0, 20);
    saveCsvIndex(idx);
  }

  function reviewDataForHash(hash){
    try {
      const raw = localStorage.getItem(reviewStorageKeyFor(hash));
      const arr = raw ? JSON.parse(raw) : [];
      return Array.isArray(arr) ? arr : [];
    } catch { return []; }
  }
  function statsDataForHash(hash){
    try {
      const raw = localStorage.getItem(statsStorageKeyFor(hash));
      const arr = raw ? JSON.parse(raw) : [];
      return Array.isArray(arr) ? arr : [];
    } catch { return []; }
  }
  function writeReviewDataForHash(hash, arr){
    try { localStorage.setItem(reviewStorageKeyFor(hash), JSON.stringify(arr || [])); } catch {}
  }
  function writeStatsDataForHash(hash, arr){
    try { localStorage.setItem(statsStorageKeyFor(hash), JSON.stringify(arr || [])); } catch {}
  }

  function mergeStatsCommon(oldStatsArr, newWords){
    const allowed = new Set(newWords.map(w => wordKey(w)));
    return (oldStatsArr || []).filter(r => {
      const k = `${r.en}||${r.ja}||${Number(r.level ?? 1)}`;
      return allowed.has(k);
    });
  }
  function mergeReviewCommon(oldReviewArr, newWords){
    const allowed = new Set(newWords.map(w => wordKey(w)));
    return (oldReviewArr || []).filter(r => {
      const k = `${r.en}||${r.ja}||${Number(r.level ?? 1)}`;
      return allowed.has(k);
    });
  }

  // =========================
  // Global weak ranking (across all CSV hashes)
  // =========================
  const GLOBAL_REVIEW_KEY = "hamaru_review_set::GLOBAL";

  function saveGlobalReview(arr){
    try { localStorage.setItem(GLOBAL_REVIEW_KEY, JSON.stringify(arr || [])); } catch {}
  }
  function loadGlobalReviewFromStorage(){
    try {
      const raw = localStorage.getItem(GLOBAL_REVIEW_KEY);
      const arr = raw ? JSON.parse(raw) : [];
      return Array.isArray(arr) ? arr : [];
    } catch { return []; }
  }

  function listAllStatsHashes(){
    const hashes = [];
    try {
      for (let i=0; i<localStorage.length; i++){
        const k = localStorage.key(i);
        if (k && k.startsWith(STATS_PREFIX)){
          hashes.push(k.slice(STATS_PREFIX.length));
        }
      }
    } catch {}
    hashes.sort();
    return hashes;
  }

  function buildHashToFilenameMap(){
    const idx = loadCsvIndex();
    const map = new Map(); // hash -> filename (latest-ish)
    try {
      const files = idx?.files || {};
      for (const filename of Object.keys(files)){
        const rec = files[filename];
        const entries = rec?.entries || [];
        for (const e of entries){
          if (e && e.hash && !map.has(e.hash)) map.set(e.hash, filename);
        }
        if (rec?.lastHash && !map.has(rec.lastHash)) map.set(rec.lastHash, filename);
      }
    } catch {}
    return map;
  }

  function wordKeyFromRow(r){
    return `${r.en}||${r.ja}||${Number(r.level ?? 1)}`;
  }

  function computeGlobalWeakRanking(minSeen, threshold01){
    const hashToFile = buildHashToFilenameMap();
    const hashes = listAllStatsHashes();

    // key -> aggregate
    const agg = new Map();
    for (const h of hashes){
      const arr = statsDataForHash(h);
      const srcName = hashToFile.get(h) || `hash:${h.slice(0,8)}`;
      for (const r of (arr || [])){
        const k = wordKeyFromRow(r);
        const seen = Number(r.seen||0);
        const correct = Number(r.correct||0);
        const wrong = Number(r.wrong||0);
        const skip = Number(r.skip||0);
        if (!agg.has(k)){
          agg.set(k, {
            en: r.en, ja: r.ja, level: Number(r.level ?? 1),
            seen: 0, correct: 0, wrong: 0, skip: 0,
            sources: [] // {hash, filename, seen, correct, wrong, acc}
          });
        }
        const a = agg.get(k);
        a.seen += seen; a.correct += correct; a.wrong += wrong; a.skip += skip;
        if (seen > 0){
          a.sources.push({
            hash: h,
            filename: srcName,
            seen, correct, wrong,
            acc: seen ? (correct/seen) : 1
          });
        }
      }
    }

    const list = Array.from(agg.values())
      .map(a => ({...a, acc: a.seen ? (a.correct/a.seen) : 1}))
      .filter(a => a.seen >= minSeen)
      .filter(a => a.acc < threshold01)
      .sort((x, y) => {
        // lower accuracy first
        if (x.acc !== y.acc) return x.acc - y.acc;
        // more evidence first
        if (x.seen !== y.seen) return y.seen - x.seen;
        // then more wrong
        return y.wrong - x.wrong;
      });

    return { list, hashesCount: hashes.length };
  }

  function renderGlobalWeak(){
    if (!elGlobalWeakList) return;

    const minSeen = clamp(parseInt(elGlobalMinSeen?.value || "5", 10), 1, 9999);
    const th01 = clamp(parseInt(elGlobalWeakThreshold?.value || "30", 10), 0, 100) / 100;

    const { list, hashesCount } = computeGlobalWeakRanking(minSeen, th01);

    if (elGlobalWeakInfo){
      elGlobalWeakInfo.textContent = `ä¿å­˜ã•ã‚ŒãŸæˆç¸¾ã‚»ãƒƒãƒˆ: ${hashesCount}ä»¶ / æ¡ä»¶ã«å½“ã¦ã¯ã¾ã‚‹è‹¦æ‰‹å˜èª: ${list.length}èª`;
    }

    if (list.length === 0){
      elGlobalWeakList.innerHTML = `<div class="small">ã¾ã è‹¦æ‰‹ãƒ‡ãƒ¼ã‚¿ãŒãªã„ã‹ã€æ¡ä»¶ãŒå³ã—ã™ãã‚‹ã‹ã‚‚ã€‚<br/>ã¾ãšä½•å•ã‹è§£ã„ã¦ã‹ã‚‰ã€Œæ›´æ–°ã€ã—ã¦ã­ã€‚</div>`;
      return;
    }

    // show top 200
    const top = list.slice(0, 200);

    let html = `
<table style="width:100%;border-collapse:collapse;">
<tbody>
`;
    for (const a of top){
      const accPct = a.seen ? Math.round((a.correct/a.seen)*100) : 0;

      // sources: show worst 3 by acc, then by seen desc
      const src = (a.sources || []).slice().sort((u,v)=>{
        if (u.acc !== v.acc) return u.acc - v.acc;
        return (v.seen||0) - (u.seen||0);
      }).slice(0, 3).map(s=>{
        const p = s.seen ? Math.round((s.correct/s.seen)*100) : 0;
        return `${escapeHtml(s.filename)} ${p}%ï¼ˆ${s.seen}ï¼‰`;
      }).join("<br/>");

      html += `
    <tr>
      <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,.06);">
        <b>${escapeHtml(a.ja)}</b>
        <span class="small">â†” ${escapeHtml(a.en)}ï¼ˆLv${(__formatLvLabel(a.en, a.level) || a.level)}ï¼‰</span>
      </td>
      <td style="padding:6px;text-align:right;border-bottom:1px solid rgba(255,255,255,.06);">${accPct}%</td>
      <td style="padding:6px;text-align:right;border-bottom:1px solid rgba(255,255,255,.06);">${a.seen}</td>
      <td style="padding:6px;text-align:right;border-bottom:1px solid rgba(255,255,255,.06);">${a.wrong}</td>
      <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,.06);"><span class="small">${src || ""}</span></td>
    </tr>
`;
    }
    html += `</tbody></table>`;
    elGlobalWeakList.innerHTML = html;
  }

  function applyGlobalWeakToReview(){
    const max = clamp(parseInt(elReviewCount?.value || "10", 10), 4, 50);
    const minSeen = clamp(parseInt(elGlobalMinSeen?.value || "5", 10), 1, 9999);
    const th01 = clamp(parseInt(elGlobalWeakThreshold?.value || "30", 10), 0, 100) / 100;

    const { list } = computeGlobalWeakRanking(minSeen, th01);
    const picked = list.slice(0, max).map(a => ({ en:a.en, ja:a.ja, level:a.level }));

    if (picked.length < 4){
      showFlash("bad", "4æŠãªã®ã§ã€è‹¦æ‰‹å˜èªãŒ4èªä»¥ä¸Šå¿…è¦ã ã‚ˆï¼ˆæ¡ä»¶ã‚’ç·©ã‚ã¦ã­ï¼‰");
      try{ showGlobalFlash("bad", "è‹¦æ‰‹å˜èªãŒ4èªæœªæº€ã§ã™ï¼ˆæ¡ä»¶ã‚’ã‚†ã‚‹ã‚ã¦ã­ï¼‰"); }catch{}
      try{ if(elGlobalWeakInfo) elGlobalWeakInfo.textContent = "âš ï¸ è‹¦æ‰‹å˜èªãŒ4èªæœªæº€ã§ã™ï¼ˆé›†è¨ˆæ¡ä»¶ã‚’ã‚†ã‚‹ã‚ã¦ã­ï¼‰"; }catch{}
      return;
    }

    REVIEW_SET = picked.map(w => ({...w}));

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ä¿å­˜ï¼ˆCSVç„¡ã—ã§ã‚‚å¾©ç¿’ã§ãã‚‹ï¼‰
    saveGlobalReview(REVIEW_SET);

    // ç¾åœ¨ã®CSVå´ã«ã‚‚ä¿å­˜ã—ã¦ãŠãï¼ˆä¾¿åˆ©ï¼‰
    try { saveReviewToStorage(); } catch {}

    // å¾©ç¿’ONã«ã—ã¦å³ã‚¹ã‚¿ãƒ¼ãƒˆ
    if (elReviewMode) elReviewMode.value = "on";
    updateReviewStatus();
    needsResetAfterOverlayAction = true;
    overlayRequireManualResume = true;
    wasRunningBeforeOverlay = false;
    // â€»ã“ã“ã§ã¯è‡ªå‹•ã‚¹ã‚¿ãƒ¼ãƒˆã—ãªã„ï¼ˆå†é–‹ã¯ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³ã§ï¼‰
// â˜…é‡è¦ï¼šãƒ‘ãƒãƒ«ã¯é–‰ã˜ãªã„ï¼ˆå³ä¸Šã€Œé–‰ã˜ã‚‹ã€ã§ã®ã¿é–‰ã˜ã‚‹ï¼‰
    try{ if (elGlobalWeakPanel) elGlobalWeakPanel.style.display = "block"; }catch{}
    try{ if (elGlobalWeakBackdrop) elGlobalWeakBackdrop.style.display = "block"; }catch{}

    showFlash("good", `å…¨CSVã®è‹¦æ‰‹ã‹ã‚‰ ${REVIEW_SET.length}èªã‚’å¾©ç¿’ã‚»ãƒƒãƒˆã«ã—ãŸã‚ˆï¼ˆå†é–‹ã¯ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³ï¼‰`);
    try{ showGlobalFlash("good", `å¾©ç¿’ã‚»ãƒƒãƒˆæ›´æ–°: ${REVIEW_SET.length}èªï¼ˆå¾©ç¿’ONï¼‰`); }catch{}
    try{ if(elGlobalWeakInfo) elGlobalWeakInfo.textContent = `âœ… å¾©ç¿’ã‚»ãƒƒãƒˆæ›´æ–°: ${REVIEW_SET.length}èªï¼ˆå¾©ç¿’ONï¼‰`; }catch{}
  }

  function loadGlobalReviewIntoCurrent(){
    const arr = loadGlobalReviewFromStorage();
    if (!Array.isArray(arr) || arr.length < 4){
      showFlash("bad", "ä¿å­˜ã•ã‚ŒãŸç·åˆå¾©ç¿’ãŒãªã„ã‚ˆï¼ˆã¾ãšã€ã“ã®æ¡ä»¶ã§å…¨CSVè‹¦æ‰‹ã‚’å¾©ç¿’ã‚»ãƒƒãƒˆã«ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ã­ï¼‰");
      try{ showGlobalFlash("bad", "ä¿å­˜ã•ã‚ŒãŸç·åˆå¾©ç¿’ãŒã‚ã‚Šã¾ã›ã‚“"); }catch{}
      return;
    }

    REVIEW_SET = arr.map(w => ({...w}));
    if (elReviewMode) elReviewMode.value = "on";
    updateReviewStatus();
    needsResetAfterOverlayAction = true;
    overlayRequireManualResume = true;
    wasRunningBeforeOverlay = false;
    // â€»ã“ã“ã§ã¯è‡ªå‹•ã‚¹ã‚¿ãƒ¼ãƒˆã—ãªã„ï¼ˆå†é–‹ã¯ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³ã§ï¼‰
// â˜…ã“ã“é‡è¦ï¼šãƒ‘ãƒãƒ«ã¯é–‰ã˜ãªã„ï¼ˆå³ä¸Šã€Œé–‰ã˜ã‚‹ã€ã§ã®ã¿é–‰ã˜ã‚‹ï¼‰
    try{ if (elGlobalWeakPanel) elGlobalWeakPanel.style.display = "block"; }catch{}

    // ãƒ‘ãƒãƒ«å†…ã«ç¢ºå®Ÿã«é€šçŸ¥ï¼ˆè¦‹å¤±ã‚ãªã„ï¼‰
    try{ showGlobalFlash("good", `ç·åˆå¾©ç¿’ã‚’èª­ã¿è¾¼ã‚“ã ã‚ˆï¼ˆ${REVIEW_SET.length}èªï¼‰`); }catch{}

    // ã‚²ãƒ¼ãƒ å´ã«ã‚‚é€šçŸ¥
    showFlash("good", `ç·åˆå¾©ç¿’ã‚’èª­ã¿è¾¼ã‚“ã ã‚ˆï¼ˆ${REVIEW_SET.length}èªï¼‰ï¼ˆå†é–‹ã¯ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³ï¼‰`);
  }

  function beep(type) {
    try {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = "sine";
      o.frequency.value = (type === "good") ? 880 : 220;
      g.gain.value = 0.0001;
      o.connect(g); g.connect(ctx.destination);
      o.start();
      const now = ctx.currentTime;
      g.gain.exponentialRampToValueAtTime(0.12, now + 0.01);
      g.gain.exponentialRampToValueAtTime(0.0001, now + 0.16);
      o.stop(now + 0.18);
      setTimeout(() => ctx.close(), 250);
    } catch {}
  }

  function showFlash(kind, text) {
    // ç·åˆè‹¦æ‰‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãŒé–‹ã„ã¦ã„ã‚‹æ™‚ã¯ã€ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã«ã‚‚è¡¨ç¤ºï¼ˆã¯ã¿å‡ºã—é˜²æ­¢ï¼‰
    try {
      const p = document.getElementById("globalWeakPanel");
      const gf = document.getElementById("globalFlash");
      if (p && p.style.display !== "none" && gf) {
        gf.style.display = "block";
        gf.className = `flash ${kind}`;
        gf.textContent = text;
        // è¦‹ãˆã‚‹ä½ç½®ã¸
        gf.scrollIntoView({ block: "nearest", behavior: "smooth" });
        return;
      }
    } catch {}

    // é€šå¸¸ï¼ˆã‚²ãƒ¼ãƒ ç”»é¢ï¼‰
    elFlash.style.display = "block";
    elFlash.className = `flash ${kind}`;
    elFlash.textContent = text;
  }
  function clearChoices() { elChoices.innerHTML = ""; }
  function setLocked(v) {
    locked = v;
    [...elChoices.querySelectorAll("button")].forEach(b => b.disabled = v);
  }

  function renderHud() {
    elScore.textContent = String(score);
    elCombo.textContent = String(combo);
    const acc = answered === 0 ? 0 : Math.round((correct / answered) * 100);
    elAcc.textContent = `${acc}%`;

    const remain = (totalPlanned === Infinity)
      ? deck.length
      : Math.max(0, totalPlanned - askedCount);
    elRemaining.textContent = String(remain);
    if (elCsvHud) elCsvHud.textContent = CURRENT_CSV_NAME || "å†…è”µãƒ‡ãƒ¼ã‚¿";
  }

  // â‘¡ é•·æ–‡ã®ã¨ãè‡ªå‹•ã§å°‘ã—ç¸®ã‚ã‚‹ï¼ˆpromptã«fitã‚¯ãƒ©ã‚¹ä»˜ä¸ï¼‰
  function applyPromptFit(text) {
    const t = String(text || "");
    // ã–ã£ãã‚Šï¼šé•·ã„ã»ã©ç¸®å°ãŒåŠ¹ãï¼ˆCSS clampã§è‡ªç„¶ã«ï¼‰
    if (t.length >= 18) elPrompt.classList.add("fit");
    else elPrompt.classList.add("fit"); // å¸¸ã«fitã§OKï¼ˆçŸ­æ–‡ã§ã‚‚è‡ªç„¶ï¼‰
  }

  // =========================
  // Deck filter
  // =========================
  function applyDeckFilter() {
    const v = elDeckSelect ? elDeckSelect.value : "all";

    // â˜…é‡è¦: ã€Œå…¨éƒ¨ã€ã¯ level ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã—ãªã„ï¼ˆCSVãŒLv1ã‚„Lv2ã§ã‚‚å‹•ãã‚ˆã†ã«ï¼‰
    let allowed = null; // null = allow all levels
    if (v === "1") allowed = new Set([1]);
    if (v === "2") allowed = new Set([2]);
    if (v === "3") allowed = new Set([3]);
    if (v === "12") allowed = new Set([1,2]);
    if (v === "23") allowed = new Set([2,3]);

    const BASE_ALL = getWordsAllForQuiz();

    WORDS = BASE_ALL
      .filter(w => !allowed || allowed.has(Number(w.level ?? 0)))
      .map(w => ({
        en: w.en, ja: w.ja,
        level: Number(w.level ?? 1),
        lang: (w.lang || ""), en_lang: (w.en_lang || ""), ja_lang: (w.ja_lang || ""), tts: (w.tts || "")
      }));

    const name = (v === "all") ? "å…¨éƒ¨" : v;
    const modeLabel = (QUIZ_MODE === "mix") ? "ãƒŸãƒƒã‚¯ã‚¹" : "å˜ç‹¬";
    elDeckStatus.textContent = `ãƒ‡ãƒƒã‚­: ${name} / ãƒ¢ãƒ¼ãƒ‰: ${modeLabel}ï¼ˆ${WORDS.length}èªï¼‰`;
  }

  // =========================
  // CSV parse (en,ja,level)
  // =========================
  function parseCSV(text) {
    // Robust CSV parser: supports quotes, commas inside quotes, and Excel BOM
    const raw = (text || "").replace(/\r/g, "");
    let lines = raw.split("\n");

    // drop leading/trailing empty lines
    while (lines.length && lines[0].trim() === "") lines.shift();
    while (lines.length && lines[lines.length-1].trim() === "") lines.pop();
    if (lines.length < 2) return [];

    // â˜…BOMé™¤å»ï¼ˆExcelç­‰ã®UTF-8 BOMä»˜ãCSVã§ã‚‚OKï¼‰
    lines[0] = lines[0].replace(/^\uFEFF/, "");

    function parseCSVLine(line){
      const out = [];
      let cur = "";
      let inQ = false;
      for (let i=0;i<line.length;i++){
        const ch = line[i];
        if (inQ){
          if (ch === '"'){
            // escaped quote
            if (i+1 < line.length && line[i+1] === '"'){ cur += '"'; i++; }
            else { inQ = false; }
          } else {
            cur += ch;
          }
        } else {
          if (ch === '"'){ inQ = true; }
          else if (ch === ','){ out.push(cur); cur=""; }
          else { cur += ch; }
        }
      }
      out.push(cur);
      return out.map(s => (s ?? "").trim());
    }

    const header = parseCSVLine(lines[0]).map(s => s.trim().toLowerCase());
    const enIdx = header.indexOf("en");
    const jaIdx = header.indexOf("ja");
    const lvIdx = header.indexOf("level");
    const langIdx = header.indexOf("lang"); // â˜…æ¨å¥¨ï¼ˆè¨€èªã‚¿ã‚°ï¼‰
    const enLangIdx = header.indexOf("en_lang"); // ä»»æ„
    const jaLangIdx = header.indexOf("ja_lang"); // ä»»æ„ï¼ˆå°†æ¥ç”¨ï¼‰
    const ttsIdx = header.indexOf("tts"); // ä»»æ„

    if (enIdx === -1 || jaIdx === -1) {
      throw new Error("CSVã®1è¡Œç›®ã¯ en,ja,levelï¼ˆlevelã¯ä»»æ„ï¼‰ã«ã—ã¦ã­");
    }

    const items = [];
    for (let i = 1; i < lines.length; i++) {
      const line = lines[i];
      if (!line || line.trim().length === 0) continue;
      const cols = parseCSVLine(line);

      const en = (cols[enIdx] ?? "").trim().replace(/^"(.*)"$/,"$1");
      const ja = (cols[jaIdx] ?? "").trim().replace(/^"(.*)"$/,"$1");

      let level = 3;
      let rawLv = "";
      if (lvIdx !== -1) {
        rawLv = (cols[lvIdx] ?? "").trim().replace(/^"(.*)"$/,"$1");
      }
      if (rawLv){
        const n = Number(rawLv);
        level = Number.isFinite(n) && n >= 1 && n <= 99 ? n : 1;
      }else{
        // levelåˆ—ãŒãªã„/ç©ºãªã‚‰ã€å†…è”µè¾æ›¸ã§è‡ªå‹•æ¨å®šï¼ˆOxfordå„ªå…ˆ â†’ CEFR-Jï¼‰
        const r = suggestLevelAuto(en);
        if(r && r.lv) level = Number(r.lv);
      }

      const lang = ((langIdx !== -1 ? (cols[langIdx] ?? "").trim() : "") ||
                    (enLangIdx !== -1 ? (cols[enLangIdx] ?? "").trim() : "") || "")
                    .replace(/^"(.*)"$/,"$1");
      const en_lang = ((enLangIdx !== -1 ? (cols[enLangIdx] ?? "").trim() : "") || "").replace(/^"(.*)"$/,"$1");
      const ja_lang = ((jaLangIdx !== -1 ? (cols[jaLangIdx] ?? "").trim() : "") || "").replace(/^"(.*)"$/,"$1");
      const tts = ((ttsIdx !== -1 ? (cols[ttsIdx] ?? "").trim() : "") || "").replace(/^"(.*)"$/,"$1");

      if (!en || !ja) continue;
      items.push({ en, ja, level, levelLabel: __formatLvLabel(en, level), lang, en_lang, ja_lang, tts });
    }
    return items;
  }

  // =========================
  // Review mode
  // =========================
  function updateReviewStatus() {
    const mode = elReviewMode?.value ?? "off";
    const n = REVIEW_SET.length;
    elReviewStatus.textContent =
      mode === "on" ? `å¾©ç¿’ON: ${n}èªã‚’ä½¿ã†` : `å¾©ç¿’OFF: é¸æŠæ¸ˆã¿ ${n}èª`;
  }

  function openReviewPicker() {
    const max = clamp(parseInt(elReviewCount?.value || "10", 10), 4, 50);
    elReviewMax.textContent = String(max);

    elReviewList.innerHTML = "";
    const selected = new Set(REVIEW_SET.map(w => w.en + "||" + w.ja + "||" + w.level));

    WORDS.forEach((w) => {
      const key = w.en + "||" + w.ja + "||" + w.level;

      const row = document.createElement("label");
      row.style.display = "flex";
      row.style.gap = "10px";
      row.style.alignItems = "center";
      row.style.padding = "6px 4px";
      row.style.borderBottom = "1px solid rgba(255,255,255,.08)";
      row.style.cursor = "pointer";

      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.checked = selected.has(key);

      cb.addEventListener("change", () => {
        const checked = elReviewList.querySelectorAll("input[type=checkbox]:checked").length;
        if (checked > max) {
          cb.checked = false;
          showFlash("bad", `æœ€å¤§${max}èªã¾ã§ã ã‚ˆ`);
        }
      });

      const txt = document.createElement("div");
      txt.innerHTML = `<b>${escapeHtml(w.ja)}</b> <span class="small">â†” ${escapeHtml(w.en)}ï¼ˆLv${(__formatLvLabel(w.en, w.level) || w.level)}ï¼‰</span>`;

      row.appendChild(cb);
      row.appendChild(txt);
      elReviewList.appendChild(row);
    });

    elReviewPanel.style.display = "block";
  }

  function saveReviewPicker() {
    const max = clamp(parseInt(elReviewCount?.value || "10", 10), 4, 50);
    const picked = [];

    const rows = elReviewList.querySelectorAll("label");
    rows.forEach((row, idx) => {
      const cb = row.querySelector("input[type=checkbox]");
      if (!cb || !cb.checked) return;
      if (picked.length >= max) return;
      picked.push(WORDS[idx]);
    });

    REVIEW_SET = picked.map(w => ({ ...w }));
    saveReviewToStorage();
    elReviewPanel.style.display = "none";
    updateReviewStatus();
    
    const _wasPaused = isPaused;
    if (_wasPaused) {
      // ä¸€æ™‚åœæ­¢ä¸­ã«å¾©ç¿’ã‚»ãƒƒãƒˆã‚’ä¿å­˜ã—ãŸå ´åˆã¯ã€å‹æ‰‹ã«å†é–‹ã—ãªã„
      needsResetAfterOverlayAction = true; // å†é–‹æ™‚ã«åæ˜ ã™ã‚‹
      showFlash("good", "å¾©ç¿’ã‚»ãƒƒãƒˆã‚’ä¿å­˜ã—ãŸã‚ˆï¼ˆä¸­æ–­ã®ã¾ã¾ï¼‰ã€‚å†é–‹ã™ã‚‹ã¨ãã¯ã€Œçµæœã‚’è¦‹ã‚‹ã€ã‚’æŠ¼ã—ã¦ã­");
      return;
    }
    resetGame();
  }

  function clearReviewSet() {
    REVIEW_SET = [];
    clearReviewFromStorage();
    updateReviewStatus();
    
    const _wasPaused = isPaused;
    if (_wasPaused) {
      needsResetAfterOverlayAction = true;
      showFlash("good", "å¾©ç¿’ã‚’ã‚¯ãƒªã‚¢ã—ãŸã‚ˆï¼ˆä¸­æ–­ã®ã¾ã¾ï¼‰ã€‚å†é–‹ã™ã‚‹ã¨ãã¯ã€Œçµæœã‚’è¦‹ã‚‹ã€ã‚’æŠ¼ã—ã¦ã­");
      return;
    }
    resetGame();
  }

  // =========================
  // Weak auto-pick (uses result filter)
  // =========================
  function autoPickWeakWords() {
    const MIN_SEEN = clamp(parseInt(elResultMinSeen?.value || "5", 10), 1, 9999);
    const th = clamp(parseInt(elWeakThreshold?.value || "30", 10), 0, 100) / 100;

    const candidates = Array.from(STATS.values())
      .filter(r => (r.seen || 0) >= MIN_SEEN)
      .map(r => ({ r, acc: r.seen ? (r.correct / r.seen) : 1 }))
      .filter(x => x.acc < th)
      .sort((a, b) => {
        if (a.acc !== b.acc) return a.acc - b.acc; // lower acc first
        if ((a.r.seen || 0) !== (b.r.seen || 0)) return (b.r.seen || 0) - (a.r.seen || 0); // more data first
        return (b.r.wrong || 0) - (a.r.wrong || 0); // then more wrong
      });

    const max = clamp(parseInt(elReviewCount?.value || "10", 10), 4, 50);

    const picked = [];
    for (const x of candidates) {
      if (picked.length >= max) break;
      const found = WORDS_ALL.find(w =>
        w.en === x.r.en && w.ja === x.r.ja && Number(w.level) === Number(x.r.level)
      );
      if (found) picked.push({ ...found });
    }

    REVIEW_SET = picked;
    saveReviewToStorage();

    if (elReviewMode) elReviewMode.value = "on";
    updateReviewStatus();

    if (REVIEW_SET.length === 0) {
      showFlash("bad", `è‹¦æ‰‹ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸï¼ˆå‡ºé¡Œ${MIN_SEEN}å›ä»¥ä¸Šã§ã€æ­£è§£ç‡${Math.round(th*100)}%æœªæº€ãŒ0ä»¶ï¼‰`);
      return;
    }

    showFlash("good", `è‹¦æ‰‹ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆ: ${REVIEW_SET.length}èªï¼ˆæ­£è§£ç‡${Math.round(th*100)}%æœªæº€ï¼‰`);
    resetGame();
  }

  // =========================
  // Results
  // =========================
  function showResults(){
    const MIN_SEEN = clamp(parseInt(elResultMinSeen?.value || "1", 10), 1, 9999);
    const rows = Array.from(STATS.values()).filter(r => (r.seen || 0) >= MIN_SEEN);

    if (!rows.length) {
      elResultSummary.textContent = `è¡¨ç¤ºæ¡ä»¶ã«åˆã†å˜èªãŒã‚ã‚Šã¾ã›ã‚“ï¼ˆå‡ºé¡Œ${MIN_SEEN}å›ä»¥ä¸Šï¼‰`;
      elResultTable.innerHTML = `<div class="small" style="opacity:.9;">ãƒ’ãƒ³ãƒˆï¼šä¸Šã®ã€Œè¡¨ç¤º: å‡ºé¡Œå›æ•°ã€ã‚’ <b>1å›ä»¥ä¸Š</b> ã«ã™ã‚‹ã¨å…¨éƒ¨å‡ºã¾ã™ã€‚</div>`;
      elResultPanel.style.display = "block";
      return;
    }

    const totalSeen = rows.reduce((a,r)=>a+(r.seen||0),0);
    const totalCorrect = rows.reduce((a,r)=>a+(r.correct||0),0);
    const totalWrong = rows.reduce((a,r)=>a+(r.wrong||0),0);
    const totalSkip = rows.reduce((a,r)=>a+(r.skip||0),0);

    rows.sort((a, b) => {
      const aSeen = a.seen || 0;
      const bSeen = b.seen || 0;

      const aAcc = aSeen ? (a.correct / aSeen) : 1;
      const bAcc = bSeen ? (b.correct / bSeen) : 1;

      const aZero = aSeen > 0 && (a.correct || 0) === 0;
      const bZero = bSeen > 0 && (b.correct || 0) === 0;

      if (aZero !== bZero) return aZero ? -1 : 1;     // 0% fixed at top
      if (aAcc !== bAcc) return aAcc - bAcc;          // lower acc first
      if (aSeen !== bSeen) return bSeen - aSeen;      // more data first
      return (b.wrong || 0) - (a.wrong || 0);         // then more wrong
    });

    const acc = totalSeen ? Math.round((totalCorrect/totalSeen)*100) : 0;
    elResultSummary.textContent =
      `ç·å‡ºé¡Œ:${totalSeen} / æ­£è§£:${totalCorrect} / ä¸æ­£è§£:${totalWrong} / ã‚¹ã‚­ãƒƒãƒ—:${totalSkip} / æ­£è§£ç‡:${acc}%ï¼ˆè¡¨ç¤º: å‡ºé¡Œ${MIN_SEEN}å›ä»¥ä¸Šï¼‰`;

    const html = `
      <table style="width:100%;border-collapse:collapse;">
        <thead>
          <tr>
            <th style="text-align:left;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">ãƒšã‚¢</th>
            <th style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">Lv</th>
            <th style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">å‡ºé¡Œ</th>
            <th style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">ä¸æ­£è§£</th>
            <th style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">ã‚¹ã‚­ãƒƒãƒ—</th>
            <th style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">æ­£è§£ç‡</th>
            <th style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">é–“é•ã„ç‡</th>
            <th style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.12);">é–“é•ã„ãƒ‘ã‚¿ãƒ¼ãƒ³</th>
          </tr>
        </thead>
        <tbody>
          ${rows.map(r=>{
            const attempts = r.seen || 0;
            const correctRate = attempts ? Math.round((r.correct / attempts) * 100) : 0;
            const wrongRate   = attempts ? Math.round((r.wrong / attempts) * 100) : 0;
            const isBad = correctRate <= 30;
            const patterns = r.wrongChoices ? r.wrongChoices.size : 0;

            return `
              <tr>
                <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">
                  <b>${escapeHtml(r.ja)}</b>
                  <div class="small">â†” ${escapeHtml(r.en)}</div>
                </td>
                <td style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${(__formatLvLabel(r.en, r.level) || r.level)}</td>
                <td style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${attempts}</td>
                <td style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${r.wrong||0}</td>
                <td style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${r.skip||0}</td>

                <td style="
                  text-align:right;
                  padding:6px;
                  border-bottom:1px solid rgba(255,255,255,.08);
                  color:${isBad ? '#ff5c7a' : '#e8eeff'};
                  font-weight:${isBad ? '800' : '400'};
                ">
                  ${correctRate}%
                </td>

                <td style="
                  text-align:right;
                  padding:6px;
                  border-bottom:1px solid rgba(255,255,255,.08);
                  color:${wrongRate >= 70 ? '#ff9a5c' : '#a9b3d6'};
                ">
                  ${wrongRate}%
                </td>

                <td style="text-align:right;padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${patterns}</td>
              </tr>`;
          }).join("")}
        </tbody>
      </table>`;

    elResultTable.innerHTML = html;
    elResultPanel.style.display = "block";
  }
// =========================
  // Game logic (æ–¹å‘å¯¾å¿œ)
  // =========================
  function getPromptText(w) {
    return (getDirection() === "ja2en") ? w.ja : w.en;
  }
  function getAnswerText(w) {
    return (getDirection() === "ja2en") ? w.en : w.ja;
  }
  function getChoicePool() {
    // é¸æŠè‚¢ã¯ã€Œç­”ãˆå´ã€ï¼šå‡ºé¡Œã«ä½¿ã†å®Ÿãƒªã‚¹ãƒˆï¼ˆè¨€èª/å¾©ç¿’/ãƒ¢ãƒ¼ãƒ‰ï¼‰ã¨æƒãˆã‚‹
    const base = (Array.isArray(ACTIVE_WORDS_FOR_QUIZ) && ACTIVE_WORDS_FOR_QUIZ.length) ? ACTIVE_WORDS_FOR_QUIZ : WORDS;
    return base.map(w => getAnswerText(w));
  }
  function buildChoices(word) {
    const answer = getAnswerText(word);
    const distractors = pickN(getChoicePool(), 3, answer);
    return shuffle([answer, ...distractors]);
  }

  function scheduleTimer(startRemain = secondsPerQ) {
    cancelAnimationFrame(rafId);

    const start = performance.now();
    const startValue = startRemain;

    function tick(now) {
      if (isPaused) return;

      const elapsed = (now - start) / 1000;
      const remain = Math.max(0, startValue - elapsed);
      pausedRemain = remain;

      elTime.textContent = remain.toFixed(1);

      const ratio = remain / secondsPerQ;
      elBar.style.transform = `scaleX(${Math.max(0, ratio)})`;

      if (remain <= 0 && !locked) {
        handleSkip(true);
        return;
      }
      rafId = requestAnimationFrame(tick);
    }

    rafId = requestAnimationFrame(tick);
  }

  // âˆãƒ¢ãƒ¼ãƒ‰ã ã‘ã€Œæˆ»ã™ã€
  function reinsertWord(word, when) {
    let idx;
    if (when === "front") {
      idx = Math.floor(Math.random() * Math.max(1, reviewWeight));
    } else if (when === "mid") {
      idx = Math.floor(deck.length * 0.35 + Math.random() * Math.max(1, deck.length * 0.15));
    } else {
      idx = Math.floor(deck.length * 0.7 + Math.random() * Math.max(1, deck.length * 0.25));
    }
    idx = clamp(idx, 0, deck.length);
    deck.splice(idx, 0, word);
  }

  function endGame() {
    cancelAnimationFrame(rafId);
    clearChoices();
    elPrompt.textContent = "çµ‚äº†ï¼";
    elTime.textContent = "0.0";
    elBar.style.transform = "scaleX(0)";
    showFlash("good", `ãŠã¤ã‹ã‚Œï¼ ã‚¹ã‚³ã‚¢: ${score} / æ­£è§£ç‡: ${elAcc.textContent}`);
    showResults();
  }

  function updateModeLabel() {
    const d = getDirection();
    elModeLabel.textContent = (d === "ja2en") ? "æ—¥æœ¬èª â†’ è‹±èªï¼ˆ4æŠï¼‰" : "è‹±èª â†’ æ—¥æœ¬èªï¼ˆ4æŠï¼‰";
  }

  function nextQuestion() {
    if (askedCount >= totalPlanned && totalPlanned !== Infinity) {
      endGame();
      return;
    }
    if (deck.length === 0) {
      if (totalPlanned === Infinity) rebuildInfiniteDeck();
      else { endGame(); return; }
    }

    current = deck.shift();
    askedCount++;

    ensureStat(current).seen++;
    try{ dailyInc('seen', 1); }catch(e){}
    scheduleSaveStats();

    locked = false;
    updateModeLabel();

    const promptText = getPromptText(current);
    elPrompt.textContent = promptText;

    // â˜…å•é¡ŒãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹ãŸã³ã«éŸ³å£°è¡¨ç¤ºã‚‚è‡ªå‹•æ›´æ–°ï¼ˆğŸ”Šã‚’æŠ¼ã•ãªãã¦ã‚‚åæ˜ ï¼‰
    updateVoiceLine(current);
    applyPromptFit(promptText);

    // â˜…è‹±èªâ†’æ—¥æœ¬èªã®ã¨ãã ã‘ï¼šå•é¡ŒãŒå‡ºãŸç¬é–“ã«1å›ã ã‘è‡ªå‹•èª­ã¿ä¸Šã’ï¼ˆè‹±èªå´ï¼‰
    if (getDirection() === "en2ja" && (elAutoSpeak?.value || "on") === "on") {
      setTimeout(() => { speakText(current.en, getForeignLangHint(current), { mode: "auto" }); }, 200);
    }

    clearChoices();
    elFlash.className = "flash"; elFlash.textContent = ""; elFlash.style.display = "none";

    const options = buildChoices(current);
    options.forEach((opt, idx) => {
      const btn = document.createElement("button");
      btn.className = "choice";
      btn.innerHTML = `<span class="small">(${idx+1})</span>  <span class="choiceText">${escapeHtml(opt)}</span>`;
      btn.addEventListener("click", () => handleAnswer(opt));
      elChoices.appendChild(btn);
    });

    renderHud();
    scheduleTimer(isPaused ? (pausedRemain ?? secondsPerQ) : secondsPerQ);
  }

  // =========================
  // TTS
  // =========================
  let voices = [];
  function listVoices() {
    voices = window.speechSynthesis ? window.speechSynthesis.getVoices() : [];
    elVoiceSelect.innerHTML = "";

    // â˜…AUTOï¼ˆè¨€èªã«åˆã‚ã›ã‚‹ï¼‰
    const optAuto = document.createElement("option");
    optAuto.value = "auto";
    optAuto.textContent = "AUTOï¼ˆè¨€èªã«åˆã‚ã›ã‚‹ï¼‰";
    elVoiceSelect.appendChild(optAuto);


    if (!voices.length) {
      const opt = document.createElement("option");
      opt.value = "";
      opt.textContent = "ï¼ˆéŸ³å£°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼‰";
      elVoiceSelect.appendChild(opt);
      elTtsHint.textContent = "ãƒ’ãƒ³ãƒˆ: Chromeã®ã»ã†ãŒéŸ³å£°ãŒå……å®Ÿã—ã¦ã‚‹ã“ã¨ãŒå¤šã„ã‚ˆ";
      return;
    }

    // Autoå„ªå…ˆ: è‹±èª(en-US) ã¨ æ—¥æœ¬èª(ja-JP)ã‚’ä¸Šã«æŒã£ã¦ãã‚‹
    const scoreLang = (lang) => {
      if (!lang) return 999;
      lang = lang.toLowerCase();
      if (lang.includes("en-us")) return 0;
      if (lang.includes("ja-jp")) return 1;
      if (lang.startsWith("en")) return 2;
      if (lang.startsWith("ja")) return 3;
      return 10;
    };

    const sorted = voices.slice().sort((a,b)=>{
      const sa = scoreLang(a.lang), sb = scoreLang(b.lang);
      if (sa !== sb) return sa - sb;
      return (a.name || "").localeCompare(b.name || "");
    });

    sorted.forEach((v) => {
      const opt = document.createElement("option");
      opt.value = String(voices.indexOf(v));
      opt.textContent = `${v.name} (${v.lang})`;
      elVoiceSelect.appendChild(opt);
    });

    elVoiceSelect.selectedIndex = 0;

    // â˜…éŸ³å£°ä¸€è¦§ãŒæƒã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€ç¾åœ¨ã®å•é¡Œã«åˆã‚ã›ã¦è¡¨ç¤ºã‚‚æ›´æ–°
    if (typeof current !== 'undefined' && current) {
      updateVoiceLine(current);
    }
  }

  function cleanForSpeech(text) {
    if (!text) return "";
    return String(text)
      .replace(/ï¼ˆ.*?ï¼‰/g, "")
      .replace(/\(.*?\)/g, "")
      .replace(/[â€œâ€"ã€Œã€]/g, "")
      .trim();
  }

  function pickVoiceFor(langHint) {
    if (!voices.length) return null;

    const sel = (elVoiceSelect.value || "auto");
    // æ‰‹å‹•é¸æŠï¼ˆAUTOä»¥å¤–ï¼‰ãªã‚‰ãã‚Œã‚’ä½¿ã†
    if (sel !== "auto") {
      const idx = parseInt(sel, 10);
      if (Number.isFinite(idx) && voices[idx]) return voices[idx];
    }

    const hint = (langHint || "").trim().toLowerCase();

    // 1) å®Œå…¨ä¸€è‡´ï¼ˆä¾‹: zh-twï¼‰
    let v =
      voices.find(x => (x.lang || "").trim().toLowerCase() === hint);
    if (v) return v;

    // 2) å…ˆé ­ä¸€è‡´ï¼ˆä¾‹: zh- ãªã‚‰ zh-xxï¼‰
    const base = hint.split("-")[0];
    if (base) {
      v = voices.find(x => ((x.lang || "").trim().toLowerCase().split("-")[0] === base));
      if (v) return v;
    }

    // 3) éƒ¨åˆ†ä¸€è‡´ï¼ˆä¿é™ºï¼‰
    v = voices.find(x => ((x.lang || "").toLowerCase().includes(hint)));
    if (v) return v;

    // 4) æœ€å¾Œã®æ‰‹æ®µ: è‹±èªâ†’æ—¥æœ¬èªâ†’å…ˆé ­
    return voices.find(x => (x.lang || "").toLowerCase().startsWith("en"))
      || voices.find(x => (x.lang || "").toLowerCase().startsWith("ja"))
      || voices[0];
  }

  function guessLangHintFromText(t) {
    // ã–ã£ãã‚Šåˆ¤å®šï¼ˆen_langãŒç„¡ã„ã¨ãã®ä¿é™ºï¼‰
    const s = (t || "").trim();
    if (!s) return "";
    if (/[\uAC00-\uD7A3]/.test(s)) return "ko-KR";    // Hangul
    if (/[\u3040-\u30FF]/.test(s)) return "ja-JP";    // Kana
    if (/[\u4E00-\u9FFF]/.test(s)) return "zh-TW";    // Hanï¼ˆå°æ¹¾å¯„ã›ï¼‰
    if (/[A-Za-z]/.test(s)) return "en-US";
    return "";
  }

  function normalizeLangHint(hint) {
    const h = (hint || "").trim();
    // å°æ¹¾èªï¼ˆnan-TWï¼‰ãŒç„¡ã„ç«¯æœ«ãŒå¤šã„ã®ã§ã€ç„¡ã‘ã‚Œã°å°æ¹¾è¯èªã«å¯„ã›ã‚‹
    if (/^nan(-tw)?$/i.test(h) || /^nan-tw$/i.test(h)) return "nan-TW";
    return h;
  }

  function getForeignLangHint(w) {
    // æ—¥æœ¬èªå›ºå®šé‹ç”¨: å¤–å›½èªå´ï¼ˆenåˆ—ï¼‰ã®è¨€èªãƒ’ãƒ³ãƒˆ
    const raw = (w && w.en_lang) ? w.en_lang : "";
    const normalized = normalizeLangHint(raw);
    return normalized || guessLangHintFromText(w ? w.en : "");
  }

  function updateTtsHint(langHint) {
    if (!voices || !voices.length) { elTtsHint.textContent = ""; return; }
    const v = pickVoiceFor(langHint);
    if (v) updateVoiceLine(current, { mode:"local", name:v.name, lang:v.lang });
    else updateVoiceLine(current);
  }


  // â˜…éŸ³å£°ã‚¿ã‚°/tts/å®Ÿéš›ã«ä½¿ã†éŸ³å£° ã‚’ 1è¡Œã§è¡¨ç¤ºï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚ï¼‰
  function updateVoiceLine(word, override) {
    try{
      if (!elTtsHint) return;

      const langTag = (word && (word.lang || word.en_lang || "") || "").toString().trim();
      const ttsPref = (word && (word.tts || "") || "").toString().trim();
      const hint = (word ? (getForeignLangHint(word) || "") : "").toString().trim();
      const preferred = (ttsPref || hint || langTag || "").toString().trim();

      let used = override || null;

      if (!used) {
        if (VOICE_MODE === "auto") {
          const v = (voices && voices.length) ? pickVoiceFor(preferred) : null;
          if (v) used = { mode:"local", name:v.name, lang:v.lang };
          else used = { mode:"online", name:"Online TTS", lang: preferred || "" };
        } else if (VOICE_MODE === "local") {
          const v = (voices && voices.length) ? pickVoiceFor(preferred) : null;
          used = v ? { mode:"local", name:v.name, lang:v.lang } : { mode:"local", name:"(æœªå–å¾—)", lang: preferred || "" };
        } else {
          used = { mode:"online", name:"Online TTS", lang: preferred || "" };
        }
      }


      // è¡¨ç¤ºã¯ã€Œç¾åœ¨ã®éŸ³å£°ã€ã ã‘ï¼ˆæ˜”ã®è¡¨ç¤ºã«æˆ»ã™ï¼‰
      let line = "";
      if (used && (used.name || used.lang)) {
        const langShow = used.lang ? used.lang : "";
        line = `ç¾åœ¨ã®éŸ³å£°: ${used.name || ""}${langShow ? " / " + langShow : ""}`.trim();
      }
      elTtsHint.textContent = line;
    }catch(e){}
  }


  function speakText(rawText, langHint, opts = {}) {
    const synth = window.speechSynthesis;
    if (!synth) {
      showFlash("bad", "ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯èª­ã¿ä¸Šã’ã«å¯¾å¿œã—ã¦ãªã„ã¿ãŸã„");
      return;
    }
    const text = cleanForSpeech(rawText);
    if (!text) return;

    const mode = (opts && opts.mode) ? String(opts.mode) : "manual"; // "manual" | "auto"
    const isAuto = (mode === "auto");

    // éŸ³å£°ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ‰‹å‹•/è‡ªå‹•ã¨ã¯åˆ¥ã®ã€ŒéŸ³æºã€åˆ‡æ›¿ï¼‰
    if (VOICE_MODE === "online") {
      const lp = (langHint || "en").split("-")[0];
      // è‡ªå‹•ã®å ´åˆã¯é€£æ‰“ã§ã†ã‚‹ã•ããªã‚‰ãªã„ã‚ˆã†ã« speaking/pending ã£ã½ã„æ™‚ã¯ã‚¹ã‚­ãƒƒãƒ—
      if (isAuto) {
        // ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã¯ speaking çŠ¶æ…‹ãŒå–ã‚Œãªã„ã®ã§ã€ã“ã“ã§ã¯ã‚¹ã‚­ãƒƒãƒ—ã—ãªã„ï¼ˆçŸ­æ–‡å‰æï¼‰
      }
      speakOnline(text, lp, isAuto);
      return;
    }

    // â˜…AUTO ã¯ã€Œã„ã¾å–‹ã£ã¦ãŸã‚‰ã‚¹ã‚­ãƒƒãƒ—ã€ã—ã¦ãƒã‚¤ã‚ºã‚’é¿ã‘ã‚‹
    if (isAuto) {
      if (synth.speaking || synth.pending) return;
      // cancelã—ãªã„ï¼ˆãƒ–ãƒ„åˆ‡ã‚ŠéŸ³å¯¾ç­–ï¼‰
    } else {
      // æ‰‹å‹•ã¯ã€ŒæŠ¼ã—ãŸã‚‰ç¢ºå®Ÿã«èª­ã‚€ã€ãŸã‚ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«OK
      synth.cancel();
    }

    const u = new SpeechSynthesisUtterance(text);
    let v = pickVoiceFor(langHint);
    if (!v) {
      const h = (langHint || "").toLowerCase();
      // â˜…ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆnan-TWãŒç„¡ã„ã¨ãç­‰ï¼‰
      if (h.startsWith("nan")) v = pickVoiceFor("zh-TW") || pickVoiceFor("zh-CN") || pickVoiceFor("en-US");
      else if (h.startsWith("zh")) v = pickVoiceFor("zh-TW") || pickVoiceFor("zh-CN") || pickVoiceFor("en-US");
      else v = pickVoiceFor("en-US");
    }
    if (v) u.voice = v;

    // â˜…å®Ÿéš›ã«ä½¿ã†éŸ³å£°ã‚’è¡¨ç¤ºï¼ˆã‚ªãƒ¼ãƒˆé€£å‹•ï¼‰
    if (v) updateVoiceLine(current, { mode:"local", name:v.name, lang:v.lang });
    else updateVoiceLine(current);

    u.rate = parseFloat(elRate.value || "1.0");
    u.volume = parseFloat(elVolume.value || "1.0");
    u.lang = (v && v.lang) ? v.lang : (langHint || "en-US");

    
    // === TTS LOCK hook ===
    acquireTtsLock();
    try{ updateTtsHud && updateTtsHud(); }catch(e){}
    synth.speak(u);
    
  }

  function speakCurrent() {
    if (!current) { showFlash("bad", "ã¾ã å•é¡ŒãŒãªã„ã‚ˆ"); return; }
    // â˜…æ—¥æœ¬èªå›ºå®šé‹ç”¨: ğŸ”Šã¯å¸¸ã«å¤–å›½èªå´ï¼ˆenåˆ—ï¼‰ã‚’èª­ã‚€ï¼ˆen_langãŒã‚ã‚Œã°é€£å‹•ï¼‰
    speakText(current.en, getForeignLangHint(current), { mode: "manual" });
  }

  function stopSpeech() {
    
    if (window.speechSynthesis) window.speechSynthesis.cancel();
    releaseTtsLock();
    try{ updateTtsHud && updateTtsHud(); }catch(e){}
    
  }

  // =========================
  // Answer handling (æ–¹å‘å¯¾å¿œ + è‡ªå‹•ç™ºéŸ³)
  // =========================
  function handleAnswer(selected) {
    if (locked) return;
    setLocked(true);
    answered++;

    const answer = getAnswerText(current);
    const isCorrect = selected === answer;
    const st = ensureStat(current);

    if (isCorrect) st.correct++;
    else {
      st.wrong++;
      st.wrongChoices.add(selected);
    }
    scheduleSaveStats();
    try{ dailyInc(isCorrect ? 'correct' : 'wrong', 1); }catch(e){}

    if (isCorrect) {
      correct++;
      combo++;
      const remain = parseFloat(elTime.textContent);

      // 0ã€œ1ï¼ˆæ®‹ã‚Šæ™‚é–“ã®å‰²åˆï¼‰
      const ratio = Math.max(0, Math.min(1, remain / secondsPerQ));

      // åŸºç¤ç‚¹
      const base = 10;

      // ã‚¹ãƒ”ãƒ¼ãƒ‰ç‚¹ï¼šæ—©ã„ã»ã©å¤§ãã„ï¼ˆæœ€å¤§+40ï¼‰
      const speedBonus = Math.round(40 * (ratio ** 2));

      // ã‚³ãƒ³ãƒœç‚¹
      const comboBonus = combo * 2;

      const gain = base + speedBonus + comboBonus;
      score += gain;
      showFlash("good", `æ­£è§£ï¼ +${gain}  ã‚³ãƒ³ãƒœx${combo}`);
      beep("good");

      // â˜…æ—¥æœ¬èªâ†’è‹±èª(ja2en)ã®ã¨ãã¯ã€æ­£è§£å¾Œã«ã€Œç­”ãˆã®è‹±èªã€ã‚’1å›ã ã‘è‡ªå‹•èª­ã¿ä¸Šã’
      //    â€»AUTOã¯ cancelã—ãªã„ï¼†ç™ºè©±ä¸­ãªã‚‰ã‚¹ã‚­ãƒƒãƒ—ï¼ˆã‚¯ãƒªãƒƒã‚¯éŸ³å¯¾ç­–ï¼‰
      if (getDirection() === "ja2en") {
        const ansToSpeak = answer;
        const langToSpeak = getForeignLangHint(current);
        setTimeout(() => {
          speakText(ansToSpeak, langToSpeak, { mode: "auto" });
        }, 120);
      }

      if (roundsMode === Infinity) reinsertWord(current, "back");
    } else {
      combo = 0;
      showFlash("bad", `ä¸æ­£è§£â€¦ æ­£è§£ã¯ã€Œ${answer}ã€`);
      beep("bad");
      if (roundsMode === Infinity) reinsertWord(current, "front");
    }

    renderHud();
    setTimeout(() => { setLocked(false); nextQuestion(); }, 520);
  }

  function handleSkip(isTimeout=false) {
    if (locked) return;
    setLocked(true);
    combo = 0;
    answered++;

    const st = ensureStat(current);
    st.skip++;
    try{ dailyInc('skip', 1); }catch(e){}
    scheduleSaveStats();

    const ans = getAnswerText(current);
    showFlash("bad", isTimeout ? `æ™‚é–“åˆ‡ã‚Œâ€¦ æ­£è§£ã¯ã€Œ${ans}ã€` : `ã‚¹ã‚­ãƒƒãƒ—: å¾©ç¿’ã«å›ã™ï¼ˆæ­£è§£: ${ans}ï¼‰`);
    beep("bad");
    if (roundsMode === Infinity) reinsertWord(current, "front");

    renderHud();
    setTimeout(() => { setLocked(false); nextQuestion(); }, 420);
  }

  function rebuildInfiniteDeck() {
    let ACTIVE = filterByLang(WORDS);
    const mode = elReviewMode?.value ?? "off";
    if (mode === "on" && REVIEW_SET.length >= 4) {
      // å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ä¸­ã§ã‚‚ã€è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã§å¾©ç¿’ã‚»ãƒƒãƒˆãŒè¶³ã‚Šãªã„å ´åˆã¯é€šå¸¸ã®å˜èªãƒªã‚¹ãƒˆã«åˆ‡ã‚Šæ›¿ãˆã‚‹
      const tmp = filterByLang(REVIEW_SET);
      if (tmp.length >= 4) {
        ACTIVE = tmp;
      } else {
        ACTIVE = filterByLang(WORDS);
      }
    }

    ACTIVE_WORDS_FOR_QUIZ = ACTIVE;
        deck = shuffle(ACTIVE).map(w => ({...w}));
    totalPlanned = Infinity;
    askedCount = 0;
  }

  function resetGame() {
    cancelAnimationFrame(rafId);

    secondsPerQ = clamp(parseFloat(elSecondsPerQ.value || "6"), 1, 30);
    reviewWeight = clamp(parseInt(elReviewWeight.value || "5", 10), 1, 10);

    score = 0; combo = 0; correct = 0; answered = 0;
    // STATSã¯ä¿å­˜ã•ã‚Œã¦ã„ã‚‹æˆç¸¾ã‚’ç¶­æŒï¼ˆãƒªã‚¹ã‚¿ãƒ¼ãƒˆã§æ¶ˆã•ãªã„ï¼‰

    elResultPanel.style.display = "none";
    elFlash.className = "flash"; elFlash.textContent = ""; elFlash.style.display = "none";

    applyDeckFilter();
    updateModeLabel();

    let ACTIVE = filterByLang(WORDS);
    const mode = elReviewMode?.value ?? "off";
    if (mode === "on" && REVIEW_SET.length >= 4) {
      const tmp = filterByLang(REVIEW_SET);
      if (tmp.length >= 4) {
        ACTIVE = tmp;
      } else {
        // å¾©ç¿’ã‚»ãƒƒãƒˆãŒè¨€èª/æ¡ä»¶ã§è¶³ã‚Šãªã„æ™‚ã¯é€šå¸¸ãƒªã‚¹ãƒˆã¸æˆ»ã™ï¼ˆå‡ºé¡Œ0ã‚’é˜²ãï¼‰
        ACTIVE = filterByLang(WORDS);
      }
    }

    ACTIVE_WORDS_FOR_QUIZ = ACTIVE;

        debugActiveStatus(ACTIVE);

    if (SELECTED_LANGS.size > 0 && ACTIVE.length === 0) {
      showFlash("bad", "é¸ã‚“ã è¨€èªã®å˜èªãŒ0ä»¶ã ã‚ˆï¼ˆå¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ä¸­ãªã‚‰å¾©ç¿’ãƒ‡ãƒ¼ã‚¿ãŒãã®è¨€èªã«ç„¡ã„å ´åˆã‚‚ã‚ã‚‹ã‚ˆï¼‰");
    }

    if (ACTIVE.length < 4) {
      clearChoices();
      elPrompt.textContent = "å˜èªãŒè¶³ã‚Šãªã„â€¦";
      showFlash("bad", "4æŠãªã®ã§ã€4èªä»¥ä¸Šå¿…è¦ã ã‚ˆã€‚ãƒ‡ãƒƒã‚­/CSVã‚’è¦‹ç›´ã—ã¦ã­ã€‚");
      totalPlanned = 0;
      askedCount = 0;
      renderHud();
      return;
    }

    const rv = elRounds?.value ?? "1";
    roundsMode = (rv === "inf") ? Infinity : clamp(parseInt(rv, 10), 1, 10);
    askedCount = 0;

    if (roundsMode === Infinity) {
      deck = shuffle(ACTIVE).map(w => ({...w}));
      totalPlanned = Infinity;
    } else {
      const merged = [];
      for (let r = 0; r < roundsMode; r++) merged.push(...ACTIVE.map(w => ({...w})));
      deck = shuffle(merged);
      totalPlanned = deck.length;
    }

    isPaused = false;
    pausedRemain = null;

    elBar.style.transform = "scaleX(1)";
    nextQuestion();
  }

  // =========================
  // Pause + results
  // =========================
  function pauseGame() {
    if (isPaused) return;
    isPaused = true;
    showFlash("good", "â¸ ä¸€æ™‚åœæ­¢ä¸­");
  }

  function resumeGame() {
    if (!isPaused) return;
    isPaused = false;
    elResultPanel.style.display = "none";
    scheduleTimer(pausedRemain ?? secondsPerQ);
  }

  // =========================
  // Events
  // =========================
  elSkip.addEventListener("click", () => handleSkip(false));
  elRestart.addEventListener("click", () => resetGame());

  // Daily log UI
  const elToggleDailyPanel = document.getElementById("toggleDailyPanel");
  const elDailyPanel = document.getElementById("dailyPanel");
  const elResetToday = document.getElementById("resetToday");

  elToggleDailyPanel?.addEventListener("click", () => {
    if(!elDailyPanel) return;
    const on = elDailyPanel.style.display !== "none";
    elDailyPanel.style.display = on ? "none" : "block";
    // é–‹ã„ãŸç¬é–“ã«æœ€æ–°è¡¨ç¤º
    try{ renderDailyUI(); }catch(e){}
    if(!on) showFlash("good", "å­¦ç¿’å±¥æ­´ã‚’è¡¨ç¤ºã—ãŸã‚ˆ");
  });

  elResetToday?.addEventListener("click", () => {
    if(!confirm("ã“ã®CSVã®ã€Œä»Šæ—¥ã®å­¦ç¿’ãƒ­ã‚°ã€ã‚’0ã«æˆ»ã™ï¼Ÿï¼ˆé€šç®—ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯æ¶ˆãˆã¾ã›ã‚“ï¼‰")) return;
    try{
      const date = jstDateKey();
      DAILY = { date, seen:0, correct:0, wrong:0, skip:0, updatedAt:0 };
      localStorage.setItem(dailyKeyFor(CURRENT_CSV_HASH, date), JSON.stringify(DAILY));
      upsertTodayInHistory();
      renderDailyUI();
      showFlash("good", "ä»Šæ—¥ã®å­¦ç¿’ãƒ­ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã‚ˆ");
    }catch(e){
      showFlash("bad", "ãƒªã‚»ãƒƒãƒˆã«å¤±æ•—ã—ãŸã‹ã‚‚");
    }
  });

  // æ—¥ä»˜ãŒå¤‰ã‚ã£ãŸã‚‰è‡ªå‹•ã§åˆ‡ã‚Šæ›¿ãˆï¼ˆã‚¿ãƒ–ã‚’é–‹ã„ãŸã¾ã¾ã§ã‚‚OKï¼‰
  setInterval(()=>{ try{
    const t = jstDateKey();
    if(DAILY && DAILY.date && DAILY.date !== t){
      loadDailyForCurrent();
    }
  }catch(e){} }, 5000);

  elShowResultsBtn.addEventListener("click", () => {
    // çµæœã‚’è¦‹ã‚‹æ™‚ã¯åœæ­¢çŠ¶æ…‹ã«ã™ã‚‹ï¼ˆé–‰ã˜ã¦ã‚‚è‡ªå‹•å†é–‹ã—ãªã„ï¼‰
    if (!isPaused) {
      pauseGame();
      elPauseBtn.textContent = "â–¶ å†é–‹";
    }
    showResults();
    showFlash("good", "ğŸ“Š çµæœã‚’è¡¨ç¤ºï¼ˆåœæ­¢ä¸­ï¼‰");
  });

  elPauseBtn.addEventListener("click", () => {
    if (!isPaused) {
      pauseGame();
      elPauseBtn.textContent = "â–¶ å†é–‹";
      return;
    }
    // ãƒ‘ãƒãƒ«å†…ã§å¾©ç¿’ã‚»ãƒƒãƒˆæ›´æ–°/èª­ã¿è¾¼ã¿ã‚’ã—ãŸå¾Œã¯ã€ã“ã“ã§åˆã‚ã¦ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆresetï¼‰ã™ã‚‹
    if (needsResetAfterOverlayAction) {
      needsResetAfterOverlayAction = false;
      elPauseBtn.textContent = "â¸ ä¸€æ™‚åœæ­¢";
      resetGame();
      return;
    }
    resumeGame();
    elPauseBtn.textContent = "â¸ ä¸€æ™‚åœæ­¢";
  });
function handleCloseResultClick(){
    elResultPanel.style.display = "none";
    if (isPaused) {
      showFlash("good", "çµæœã‚’é–‰ã˜ãŸã‚ˆï¼ˆåœæ­¢ä¸­ï¼‰");
    }
  }
  elCloseResult?.addEventListener("click", handleCloseResultClick);
  elCloseResultTop?.addEventListener("click", handleCloseResultClick);

elReviewMode.addEventListener("change", () => {
  updateReviewStatus();

  if (isPaused) {
    // ä¸­æ–­ä¸­ãªã‚‰ã‚²ãƒ¼ãƒ ã¯å†é–‹ã•ã›ãªã„
    needsResetAfterOverlayAction = true;
    overlayRequireManualResume = true;
    showFlash("good", "å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãŸã‚ˆï¼ˆä¸­æ–­ã®ã¾ã¾ï¼‰ã€‚å†é–‹ã™ã‚‹ã¨ãã¯ã€Œçµæœã‚’è¦‹ã‚‹ã€ã‚’æŠ¼ã—ã¦ã­");
    return;
  }

  resetGame();
});



  elPickReview.addEventListener("click", () => openReviewPicker());
  elSaveReview.addEventListener("click", () => saveReviewPicker());
  elClearReview.addEventListener("click", () => clearReviewSet());

  elResetStats?.addEventListener("click", () => {
    if (!confirm("ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’å…¨éƒ¨ãƒªã‚»ãƒƒãƒˆã™ã‚‹ï¼Ÿ")) return;
    try {
      Object.keys(localStorage)
        .filter(k => k.startsWith("hamaru_stats::"))
        .forEach(k => localStorage.removeItem(k));
    } catch {}
    // ç”»é¢ä¸Šã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºã‚‚å³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ãŸã„ã®ã§
    try { loadStatsFromStorage(); } catch {}
    showFlash("good", "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ");
  });

elAutoPickWeak.addEventListener("click", () => autoPickWeakWords());
  elAutoPickWeakFromResults?.addEventListener("click", () => autoPickWeakWords());


  elAutoPickWeakGlobal?.addEventListener("click", () => {
    // å…¨CSVæ¨ªæ–­ã®è‹¦æ‰‹ã‚’ã€Œä»Šã®å¾©ç¿’ã‚»ãƒƒãƒˆã€ã«ä¸€ç™ºã§å…¥ã‚Œã‚‹
    // ç”»é¢ã¯é–‰ã˜ãšã€çµæœãŒè¦‹ãˆã‚‹ã‚ˆã†ã«å¿…è¦ãªã‚‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚‚é–‹ã
    overlayRequireManualResume = true;
    applyGlobalWeakToReview();
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒçŠ¶æ³ã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚‚è¡¨ç¤ºã—ã¦ãŠãï¼ˆä¸è¦ãªã‚‰é–‰ã˜ã¦OKï¼‰
    openOverlay(elGlobalWeakPanel);
    renderGlobalWeak();
  });

  elOpenGlobalWeak?.addEventListener("click", () => {
    openOverlay(elGlobalWeakPanel);
    renderGlobalWeak();
  });
  elCloseGlobalWeak?.addEventListener("click", () => {
    closeOverlay(elGlobalWeakPanel);
    try { const gf=document.getElementById("globalFlash"); if(gf) gf.style.display="none"; } catch {}
  });
  elRefreshGlobalWeak?.addEventListener("click", () => {
    overlayRequireManualResume = true;
    renderGlobalWeak();
    // ã€ŒæŠ¼ã—ãŸæ„Ÿã€ã‚’å‡ºã™ï¼ˆç·åˆãƒ‘ãƒãƒ«å†…ã«ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
    showFlash("good", "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’æ›´æ–°ã—ãŸã‚ˆ");
  });
  elApplyGlobalWeakToReview?.addEventListener("click", () => { overlayRequireManualResume = true; applyGlobalWeakToReview(); });
  elLoadGlobalReview?.addEventListener("click", () => { overlayRequireManualResume = true; loadGlobalReviewIntoCurrent(); });

  elRounds.addEventListener("change", () => resetGame());
  elSecondsPerQ.addEventListener("change", () => resetGame());
  elReviewWeight.addEventListener("change", () => resetGame());

  
elCsvFile.addEventListener("change", async (e) => {
    const f = e.target.files && e.target.files[0];
    if (!f) return;

    // èª­ã¿è¾¼ã¿ã‚’ä¸€æ™‚ä¿ç•™ã—ã¦ã€ä¸Šæ›¸ãåˆ¤å®šãŒå¿…è¦ãªã‚‰ãƒ¢ãƒ¼ãƒ€ãƒ«ã§é¸ã¶
    let pending = null;

    try {
      const textRaw = await f.text();
      const text = normalizeCsvText(textRaw);
      const items = parseCSV(text);
      const newHash = await sha256Hex(text);

      if (items.length < 4) throw new Error("4æŠãªã®ã§ã€4èªä»¥ä¸Šå¿…è¦ã ã‚ˆ");

      const filename = (f && f.name) ? f.name : "ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åä¸æ˜ï¼‰";
      const prevHash = getLastHashForFilename(filename);

      pending = { items, filename, newHash, prevHash };

      const hasPrev = !!prevHash && prevHash !== "builtin";
      const isChanged = hasPrev && prevHash !== newHash;

      // ä»¥å‰ã®åŒåãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¦ã€å†…å®¹ãŒå¤‰ã‚ã£ãŸã£ã½ã„å ´åˆã ã‘é¸ã°ã›ã‚‹
      if (isChanged) {
        const prevStatsCount = statsDataForHash(prevHash).length;
        const prevReviewCount = reviewDataForHash(prevHash).length;

        if (elOverwriteInfo) {
          elOverwriteInfo.innerHTML =
            `ãƒ•ã‚¡ã‚¤ãƒ«å: <span class="kbd">${escapeHtml(filename)}</span><br/>` +
            `å‰ã®æˆç¸¾: <b>${prevStatsCount}</b>èª / å‰ã®å¾©ç¿’: <b>${prevReviewCount}</b>èª<br/>` +
            `æ–°CSV: <b>${items.length}</b>èªï¼ˆå†…å®¹ãŒå¤‰ã‚ã£ãŸã®ã§é¸ã¹ã¾ã™ï¼‰`;
        }
        if (elOverwritePanel) elOverwritePanel.style.display = "block";

        // ã“ã“ã§å‡¦ç†ã‚’æ­¢ã‚ã¦ã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§ç¢ºå®šã•ã›ã‚‹
        const choose = await new Promise((resolve, reject) => {
          const cleanup = () => {
            elBtnInheritAll && (elBtnInheritAll.onclick = null);
            elBtnMergeCommon && (elBtnMergeCommon.onclick = null);
            elBtnResetNew && (elBtnResetNew.onclick = null);
            elBtnCancelLoad && (elBtnCancelLoad.onclick = null);
          };

          elBtnInheritAll && (elBtnInheritAll.onclick = () => { cleanup(); resolve("inherit"); });
          elBtnMergeCommon && (elBtnMergeCommon.onclick = () => { cleanup(); resolve("merge"); });
          elBtnResetNew && (elBtnResetNew.onclick = () => { cleanup(); resolve("reset"); });
          elBtnCancelLoad && (elBtnCancelLoad.onclick = () => { cleanup(); reject(new Error("ã‚­ãƒ£ãƒ³ã‚»ãƒ«")); });
        });

        if (elOverwritePanel) elOverwritePanel.style.display = "none";

        // é¸æŠã«å¿œã˜ã¦ã€å‰ãƒ‡ãƒ¼ã‚¿ã‚’æ–°ãƒãƒƒã‚·ãƒ¥ã¸ã‚³ãƒ”ãƒ¼ï¼ˆã¾ãŸã¯ãƒãƒ¼ã‚¸ï¼‰
        if (choose === "inherit") {
          writeStatsDataForHash(newHash, statsDataForHash(prevHash));
          writeReviewDataForHash(newHash, reviewDataForHash(prevHash));
        } else if (choose === "merge") {
          writeStatsDataForHash(newHash, mergeStatsCommon(statsDataForHash(prevHash), items));
          writeReviewDataForHash(newHash, mergeReviewCommon(reviewDataForHash(prevHash), items));
        } else {
          // reset: ä½•ã‚‚ã—ãªã„ï¼ˆæ–°ãƒãƒƒã‚·ãƒ¥ã¯ç©ºã§é–‹å§‹ï¼‰
        }
      }

      // ã“ã“ã‹ã‚‰å®Ÿéš›ã«åæ˜ 
      CURRENT_CSV_HASH = newHash;
      WORDS_ALL = items;
      CURRENT_CSV_NAME = filename;

      // â˜…ã‚¹ãƒãƒ›ã§ã€Œå˜èªãŒè¶³ã‚Šãªã„ã€ã‚’é˜²ãï¼šCSVèª­ã¿è¾¼ã¿ç›´å¾Œã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’åˆæœŸåŒ–
      try{ if (elDeckSelect) elDeckSelect.value = "all"; }catch(e){}
      try{ if (elReviewMode) elReviewMode.value = "off"; }catch(e){}
      try{ REVIEW_SET = []; }catch(e){}

  try{ SELECTED_LANGS?.clear?.(); }catch(e){}
      try{ SELECTED_LANGS = new Set(); }catch(e){} // ã™ã¹ã¦
      try{ if (typeof renderLangFilterOptions === "function") renderLangFilterOptions(); }catch(e){}

      recordFilenameHash(filename, newHash, items.length);

      // ===== Save as "last CSV" (restore on next open) =====
      try{
        localStorage.setItem(LAST_CSV_NAME_KEY, filename);
        localStorage.setItem(LAST_CSV_HASH_KEY, newHash);
        localStorage.setItem(LAST_CSV_ITEMS_KEY, JSON.stringify(items));
        try{ const el = document.getElementById("lastCsvStatus"); if(el) el.textContent = `âœ… å‰å›CSVã¨ã—ã¦ä¿å­˜: ${filename}`; }catch(e){}
      }catch(e){
        try{ const el = document.getElementById("lastCsvStatus"); if(el) el.textContent = "âš ï¸ å‰å›CSVã®ä¿å­˜ã«å¤±æ•—ï¼ˆå®¹é‡ä¸Šé™ã®å¯èƒ½æ€§ï¼‰"; }catch(e){}
      }


      elCsvStatus.textContent = `ç¾åœ¨ã®CSV: ${CURRENT_CSV_NAME}ï¼ˆ${items.length}èªï¼‰`;
  try { if (typeof renderLangFilterOptions === "function") renderLangFilterOptions(); } catch(e) {}
      applyDeckFilter();

      // å¾©ç¿’/æˆç¸¾ã®å¾©å…ƒ
      REVIEW_SET = [];
      loadReviewFromStorage();
      loadStatsFromStorage();

      updateReviewStatus();
      resetGame();
      renderHud();
      try { loadDailyForCurrent(); } catch(e) {}
      showFlash("good", "CSVã‚’åæ˜ ã—ãŸã‚ˆï¼");
    } catch (err) {
      if (String(err && err.message).includes("ã‚­ãƒ£ãƒ³ã‚»ãƒ«")) {
        showFlash("bad", "èª­ã¿è¾¼ã¿ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸã‚ˆ");
      } else {
        elCsvStatus.textContent = `èª­ã¿è¾¼ã¿å¤±æ•—: ${err.message || err}`;
        showFlash("bad", `CSVã‚¨ãƒ©ãƒ¼: ${err.message || err}`);
      }
      if (elOverwritePanel) elOverwritePanel.style.display = "none";
    } finally {
      elCsvFile.value = "";
    }
  });


  // TTS UI
  elRate.addEventListener("input", () => elRateLabel.textContent = Number(elRate.value).toFixed(2));
  elVolume.addEventListener("input", () => elVolLabel.textContent = Number(elVolume.value).toFixed(2));
  elSpeak.addEventListener("click", () => speakCurrent());
// Force clear TTS lock (for rare stuck states)
  const elClearTtsLock = document.getElementById("clearTtsLock");
  elClearTtsLock?.addEventListener("click", () => {
    try{ window.speechSynthesis && window.speechSynthesis.cancel(); }catch(e){}
    try{ localStorage.removeItem(TTS_LOCK_KEY); }catch(e){}
    try{ releaseTtsLock(); }catch(e){}
    try{ updateTtsHud(); }catch(e){}
// reflect lock changes from other tabsï¼ˆ1å›ã ã‘èµ·å‹•ï¼‰
try{
  if (!window.__ttsHudTimer) {
    window.__ttsHudTimer = setInterval(() => {
      try { updateTtsHud(); } catch(e) {}
    }, 1000);
  }
}catch(e){}






    showFlash("good", "éŸ³å£°ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ãŸã‚ˆï¼ˆå¿…è¦ãªã‚‰å†ç”Ÿã—ã¦ã¿ã¦ã­ï¼‰");
  });


  
  // Last CSV: forget button
  try{
    const elForgetLastCsv = document.getElementById("forgetLastCsv");
    elForgetLastCsv?.addEventListener("click", () => {
      if (!confirm("å‰å›èª­ã¿è¾¼ã‚“ã CSVã‚’å¿˜ã‚Œã¦ã€å†…è”µãƒ‡ãƒ¼ã‚¿ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ")) return;
      forgetLastCsv();
    });
  }catch(e){}


  // =========================================================
  // Global fallbacks (v74): ensure functions exist for inline UI
  // =========================================================
  // Some environments need these on window/global scope.
  if(typeof window.saveTranslateLang!=="function"){
    window.saveTranslateLang = function(v){ try{ localStorage.setItem("hamaru_custom_translate_lang", String(v||"en")); }catch(e){} };
  }
  if(typeof window.loadTranslateLang!=="function"){
    window.loadTranslateLang = function(){ try{ return localStorage.getItem("hamaru_custom_translate_lang")||"en"; }catch(e){ return "en"; } };
  }
  if(typeof window.getLocaleForTts!=="function"){
    window.getLocaleForTts = function(choice){
      const m = {
        "en":"en-US","fr":"fr-FR","it":"it-IT","de":"de-DE","es":"es-ES",
        "ko":"ko-KR","zh-TW":"zh-TW","zh-CN":"zh-CN","ja":"ja-JP"
      };
      return m[String(choice||"en")] || "en-US";
    };
  }
  if(typeof window.getLangPairForDeck!=="function"){
    window.getLangPairForDeck = function(choice){
      const loc = window.getLocaleForTts(choice);
      return `${loc}/ja-JP`;
    };
  }
  if(typeof window.getChosenTranslateLang!=="function"){
    window.getChosenTranslateLang = function(){
      try{
        const top = document.getElementById("customDeckLangChoiceTop");
        if(top && top.value) return top.value.trim();
      }catch(e){}
      try{
        const sel = document.getElementById("cd_langChoice");
        if(sel && sel.value) return sel.value.trim();
      }catch(e){}
      try{ return window.loadTranslateLang(); }catch(e){ return "en"; }
    };
  }

  // IMPORTANT: Provide the function name that inline handlers call.
  if(typeof window.syncTtsLangFromTranslateChoice!=="function"){
    window.syncTtsLangFromTranslateChoice = function(force=true){
      try{
        const choice = window.getChosenTranslateLang();
        const pair = window.getLangPairForDeck(choice);

        // Try panel elements first
        const panel = document.getElementById("customDeckPanel");
        let sel = null;
        let inp = null;

        // lang select
        sel = document.getElementById("cd_lang_select");
        if(!sel && panel){
          const sels = Array.from(panel.querySelectorAll("select"));
          // choose select that contains "/ja-JP" options
          for(const s of sels){
            const hasPair = Array.from(s.options||[]).some(o => (o.value||"").includes("/ja-JP"));
            if(hasPair){ sel = s; break; }
          }
        }

        // custom input (white field)
        inp = document.getElementById("cd_lang");
        if(!inp && panel){
          const inputs = Array.from(panel.querySelectorAll("input"));
          for(const i of inputs){
            const ph = (i.getAttribute("placeholder")||"");
            if(ph.includes("ã‚«ã‚¹ã‚¿ãƒ ï¼ˆä¾‹:")){ inp = i; break; }
          }
        }

        if(sel){
          const exists = Array.from(sel.options||[]).some(o => (o.value||"") === pair);
          if(!exists){
            const opt = document.createElement("option");
            opt.value = pair; opt.textContent = pair;
            sel.appendChild(opt);
          }
          sel.value = pair;
          try{ sel.dispatchEvent(new Event("change", {bubbles:true})); }catch(e){}
        }
        if(inp){
          if(force) inp.value = pair;
          else if(!inp.value.trim()) inp.value = pair;
          inp.placeholder = `ã‚«ã‚¹ã‚¿ãƒ ï¼ˆä¾‹: ${pair}ï¼‰`;
          try{ inp.dispatchEvent(new Event("input", {bubbles:true})); }catch(e){}
          try{ inp.dispatchEvent(new Event("change", {bubbles:true})); }catch(e){}
        }

        // update bottom preview if present
        try{
          const t = document.getElementById("customDeckLocalePreviewTop");
          if(t) t.textContent = pair;
        }catch(e){}
      }catch(e){}
    };
  }


  // Custom Deck UI
  
(function(){
  const __bind = () => {
    try{ if(window.__HAMARU_BIND_DONE) return; window.__HAMARU_BIND_DONE = true; }catch(e){}

  // Bind translate-language selector (robust): save + sync even if IDs differ
  try{
    const sel = findAnyTranslateChoiceSelect();
    if(sel){
      sel.addEventListener("change", ()=>{
        try{ saveTranslateLang(sel.value); }catch(e){}
        try{ syncTtsLangFromTranslateChoice(true); }catch(e){}
      });
    }
  }catch(e){}

    const customDeckPanel = document.getElementById("customDeckPanel");
    const openCustomDeckBtn = document.getElementById("openCustomDeck");
    const useCustomDeckQuickBtn = document.getElementById("useCustomDeckQuick");
    const closeCustomDeckBtn = document.getElementById("closeCustomDeck");

    const topSel = document.getElementById("customDeckLangChoiceTop");
    const panelSel = document.getElementById("cd_langChoice");

    // init selectors from saved value
    try{
      const v = (typeof loadTranslateLang === "function") ? loadTranslateLang() : "en";
      if(topSel) topSel.value = v;
      if(panelSel) panelSel.value = v;
    }catch(e){}

    try{ syncTtsLangFromTranslateChoice(true); }catch(e){}

    // top selector change -> persist + sync panel + force write locale into lang fields
    topSel?.addEventListener("change", (e) => {
      const v = (e.target.value || "en").trim();
      try{ if(typeof saveTranslateLang === "function") saveTranslateLang(v); }catch(err){}
      try{ if(panelSel) panelSel.value = v; }catch(err){}
      try{ if(typeof updateForeignLabel === "function") updateForeignLabel(); }catch(err){}
      try{ if(typeof syncTtsLangFromTranslateChoice === "function") syncTtsLangFromTranslateChoice(true); }catch(err){}
      try{ if(typeof updateLocalePreview === "function") updateLocalePreview(); }catch(err){}
    });

    // panel selector change -> persist + sync top + force write locale into lang fields
    panelSel?.addEventListener("change", (e) => {
      const v = (e.target.value || "en").trim();
      try{ if(typeof saveTranslateLang === "function") saveTranslateLang(v); }catch(err){}
      try{ if(topSel) topSel.value = v; }catch(err){}
      try{ if(typeof updateForeignLabel === "function") updateForeignLabel(); }catch(err){}
      try{ if(typeof syncTtsLangFromTranslateChoice === "function") syncTtsLangFromTranslateChoice(true); }catch(err){}
      try{ if(typeof updateLocalePreview === "function") updateLocalePreview(); }catch(err){}
    });

    // Open / Close panel
    openCustomDeckBtn?.addEventListener("click", () => {
      // å…ˆã«ãƒ‘ãƒãƒ«ã‚’é–‹ã„ã¦æç”»ï¼ˆã‚¹ãƒãƒ›ã§ã€Œå›ºã¾ã£ãŸã€ã«è¦‹ãˆãªã„ã‚ˆã†ã«ï¼‰
      try{ __cd_render_token++; }catch(e){}
      try{
        const st = document.getElementById("cd_status");
        if(st) st.textContent = "èª­ã¿è¾¼ã¿ä¸­...";
      }catch(e){}
      try{
        const tbody = document.getElementById("cd_list");
        if(tbody) tbody.innerHTML = "";
      }catch(e){}
      try{ openOverlay(customDeckPanel); }catch(e){}
      try{ cdSetExamplePlaceholder(); }catch(e){}

      // keep UI choices (don't overwrite user's selection)
      try{
        const v = (typeof getChosenTranslateLang === "function") ? getChosenTranslateLang() : ((typeof loadTranslateLang==="function")?loadTranslateLang():"en");
        try{ if(typeof saveTranslateLang === "function") saveTranslateLang(v); }catch(e){}
        if(topSel) topSel.value = v;
        if(panelSel) panelSel.value = v;
      }catch(e){}

      // æ¬¡ã®æç”»ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¸å›ã—ã¦ã€UIã‚’å…ˆã«æã‹ã›ã‚‹
      requestAnimationFrame(()=>{
        setTimeout(()=>{
          try{ if(typeof renderCustomDeckPanel === "function") renderCustomDeckPanel(); }catch(e){}
          try{ if(typeof clearCustomDeckForm === "function") clearCustomDeckForm(); }catch(e){}
          try{ syncTtsLangFromTranslateChoice(true); }catch(e){}
        }, 0);
      });
});

    closeCustomDeckBtn?.addEventListener("click", () => {
      try{ __cd_render_token++; }catch(e){}
      try{ closeOverlay(customDeckPanel); }catch(e){}
    });

    // Quick apply button
    useCustomDeckQuickBtn?.addEventListener("click", async () => {
      try{ if(typeof useCustomDeck === "function") await useCustomDeck(); }catch(e){}
    });

    // lang preset select -> fill lang input (always set, since user wants auto)
    document.getElementById("cd_lang_select")?.addEventListener("change", (e) => {
      const v = (e.target.value || "").trim();
      const inp = document.getElementById("cd_lang");
      if(inp) inp.value = v;
    });

    // Clear button
    document.getElementById("cd_clear")?.addEventListener("click", () => {
      try{ if(typeof clearCustomDeckForm === "function") clearCustomDeckForm(); }catch(e){}
      try{ if(typeof syncTtsLangFromTranslateChoice === "function") syncTtsLangFromTranslateChoice(true); }catch(e){}
      try{ if(typeof updateLocalePreview === "function") updateLocalePreview(); }catch(e){}
    });

    // Add/Update button
    document.getElementById("cd_add")?.addEventListener("click", async () => {
      try{ await upsertCustomDeckFromForm(); }catch(e){ cdDebug("JSã‚¨ãƒ©ãƒ¼: " + (e?.message||e)); }
    });

    // Recalculate levels for all custom deck words (Oxford â†’ CEFR-J â†’ guess)
    document.getElementById("cd_recalc_lv")?.addEventListener("click", () => {
      try{
        const cur = loadCustomDeck();
        if(!cur.length){ alert("ã¾ã å˜èªãŒã‚ã‚Šã¾ã›ã‚“"); return; }
        let changed = 0;
        for(const it of cur){
          const en = (it.en||"").toString();
          const r = suggestLevelAuto(en);
          if(r && r.lv){
            if(String(it.level||"") !== String(r.lv)){ it.level = String(r.lv); changed++; }
          }else{
            if(String(it.level||"").trim()===""){ it.level = "3"; changed++; }
          }
        }
        saveCustomDeck(cur);
        renderCustomDeckPanel();
        renderCustomDeckHint();
        const st = document.getElementById("cd_status");
        if(st) st.textContent = `âœ… è‡ªå‹•Lvã‚’å†è¨ˆç®—ã—ã¾ã—ãŸï¼ˆå¤‰æ›´:${changed}ï¼‰`;
      }catch(e){
        alert("å†è¨ˆç®—ã«å¤±æ•—ã—ã¾ã—ãŸ: " + (e?.message||e));
      }
    });

    // Export CSV
    document.getElementById("cd_export")?.addEventListener("click", () => {
      const arr = loadCustomDeck();
      if(!arr.length){ alert("ã¾ã å˜èªãŒã‚ã‚Šã¾ã›ã‚“"); return; }
      const csv = buildCustomCsvText(arr);
      downloadTextFile(csv, "custom_deck.csv", "text/csv");
      const st = document.getElementById("cd_status");
      if(st) st.textContent = "âœ… CSVã‚’æ›¸ãå‡ºã—ã¾ã—ãŸ";
    });
    // Import CSV
    document.getElementById("cd_import")?.addEventListener("click", () => {
      document.getElementById("cd_import_file")?.click();
    });
    document.getElementById("cd_import_file")?.addEventListener("change", async (ev) => {
      const file = ev.target?.files?.[0];
      if(!file) return;
      try{
        const text = await file.text();
        const rows = __cd_parseCsv(text);
        const items = __cd_rowsToItems(rows);
        if(!items.length){ alert("å–ã‚Šè¾¼ã¿ã§ãã‚‹å˜èªãŒã‚ã‚Šã¾ã›ã‚“ï¼ˆen/ja ãŒå¿…è¦ï¼‰"); return; }

        const modeAdd = confirm(`CSVã‹ã‚‰ ${items.length}èª èª­ã¿è¾¼ã¿ã¾ã™ã€‚\n\nOK: è¿½åŠ /ä¸Šæ›¸ãï¼ˆé‡è¤‡ã¯ä¸Šæ›¸ãï¼‰\nã‚­ãƒ£ãƒ³ã‚»ãƒ«: ç½®ãæ›ãˆï¼ˆã„ã¾ã®è‡ªä½œå˜èªå¸³ã‚’æ¶ˆã—ã¦å…¥ã‚Œæ›¿ãˆï¼‰`);
        let cur = modeAdd ? loadCustomDeck() : [];
        const map = new Map();
        cur.forEach((it, idx)=>{
          const key = `${(it.en||"").toString().trim().toLowerCase()}||${(it.lang||"").toString().trim()}`;
          if(!key.startsWith("||")) map.set(key, idx);
        });

        let added=0, updated=0;
        for(const it of items){
          const key = `${it.en.trim().toLowerCase()}||${(it.lang||"").trim()}`;
          if(map.has(key)){
            const idx = map.get(key);
            cur[idx] = { ...cur[idx], ...it };
            updated++;
          }else{
            cur.push(it);
            map.set(key, cur.length-1);
            added++;
          }
        }
        saveCustomDeck(cur);
        renderCustomDeckPanel();
        renderCustomDeckHint();
        const st = document.getElementById("cd_status");
        if(st) st.textContent = `âœ… å–ã‚Šè¾¼ã¿å®Œäº†ï¼ˆè¿½åŠ :${added} / ä¸Šæ›¸ã:${updated}ï¼‰`;
      }catch(e){
        alert("å–ã‚Šè¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: " + (e?.message || e));
      }finally{
        try{ ev.target.value = ""; }catch(e){}
      }
    });

    
    // Paste import (no-CSV)
    document.getElementById("cd_paste_open")?.addEventListener("click", () => {
      const box = document.getElementById("cd_pasteBox");
      if(!box) return;
      const show = box.style.display === "none" || !box.style.display;
      box.style.display = show ? "block" : "none";
      if(show){
        try{ document.getElementById("cd_paste_text")?.focus(); }catch(e){}
      }
    });
    document.getElementById("cd_paste_clear")?.addEventListener("click", () => {
      try{ document.getElementById("cd_paste_text").value = ""; }catch(e){}
      const ps = document.getElementById("cd_paste_status");
      if(ps) ps.textContent = "";
    });
    document.getElementById("cd_paste_apply")?.addEventListener("click", async () => {
      try{
        const ta = document.getElementById("cd_paste_text");
        const raw = (ta?.value||"").toString();
        if(!raw.trim()){ alert("è²¼ã‚Šä»˜ã‘æ¬„ãŒç©ºã§ã™"); return; }
        const lang = (document.getElementById("cd_langChoice")?.value || "en").toString();
        const ttsDefault = (document.getElementById("cd_tts")?.value || "").toString();
        const autoT = !!document.getElementById("cd_paste_autotrans")?.checked;
        const startNow = !!document.getElementById("cd_paste_start")?.checked;
        const ps = document.getElementById("cd_paste_status");
        if(ps) ps.textContent = `è§£æä¸­â€¦`;

        let items = __cd_parsePaste(raw, lang, ttsDefault).filter(it => (it.en||it.ja));
        // normalize: if only one side provided, keep; translation optionally fills
        if(autoT){
          if(ps) ps.textContent = `è‡ªå‹•ç¿»è¨³ä¸­â€¦ï¼ˆæœ€å¤§30ä»¶ã¾ã§ï¼‰`;
          items = await __cd_autofillMissingByTranslate(items, lang, (d,t)=>{
            if(ps) ps.textContent = `è‡ªå‹•ç¿»è¨³ä¸­â€¦ ${d}/${Math.min(t,30)}`;
          });
        }

        // must have at least en & ja for game usefulness
        items = items.filter(it => (it.en||"").toString().trim() && (it.ja||"").toString().trim());
        if(!items.length){ alert("å–ã‚Šè¾¼ã¿ã§ãã‚‹å˜èªãŒã‚ã‚Šã¾ã›ã‚“ï¼ˆå¤–å›½èªã¨æ—¥æœ¬èªãŒå¿…è¦ï¼‰"); if(ps) ps.textContent=""; return; }

        const modeAdd = confirm(`è²¼ã‚Šä»˜ã‘ã‹ã‚‰ ${items.length}èª å–ã‚Šè¾¼ã¿ã¾ã™ã€‚\n\nOK: è¿½åŠ /ä¸Šæ›¸ãï¼ˆé‡è¤‡ã¯ä¸Šæ›¸ãï¼‰\nã‚­ãƒ£ãƒ³ã‚»ãƒ«: ç½®ãæ›ãˆï¼ˆã„ã¾ã®è‡ªä½œå˜èªå¸³ã‚’æ¶ˆã—ã¦å…¥ã‚Œæ›¿ãˆï¼‰`);
        let cur = modeAdd ? loadCustomDeck() : [];
        const map = new Map();
        cur.forEach((it, idx)=>{
          const key = `${(it.en||"").toString().trim().toLowerCase()}||${(it.lang||"").toString().trim()}`;
          if(!key.startsWith("||")) map.set(key, idx);
        });

        let added=0, updated=0;
        for(const it of items){
          const key = `${it.en.trim().toLowerCase()}||${(it.lang||"").trim()}`;
          if(map.has(key)){
            const idx = map.get(key);
            cur[idx] = { ...cur[idx], ...it };
            updated++;
          }else{
            cur.push(it);
            map.set(key, cur.length-1);
            added++;
          }
        }
        saveCustomDeck(cur);
        renderCustomDeckPanel();
        renderCustomDeckHint();
        if(ps) ps.textContent = `âœ… å–ã‚Šè¾¼ã¿å®Œäº†ï¼ˆè¿½åŠ :${added} / ä¸Šæ›¸ã:${updated}ï¼‰`;

        if(startNow){
          try{ document.getElementById("cd_use")?.click(); }catch(e){}
        }
      }catch(e){
        alert("è²¼ã‚Šä»˜ã‘å–ã‚Šè¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: " + (e?.message||e));
      }
    });

// Backup export/import (includes scores, review sets, settings)
    document.getElementById("cd_backup_export")?.addEventListener("click", () => {
      try{
        const obj = __backup_collect();
        const json = JSON.stringify(obj, null, 2);
        const name = `tangojuku_backup_${new Date().toISOString().slice(0,10)}.json`;
        downloadTextFile(json, name, "application/json");
        const st = document.getElementById("cd_status");
        if(st) st.textContent = "âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æ›¸ãå‡ºã—ã¾ã—ãŸï¼ˆjsonï¼‰";
      }catch(e){
        alert("ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆã«å¤±æ•—: " + (e?.message||e));
      }
    });
    document.getElementById("cd_backup_import")?.addEventListener("click", () => {
      document.getElementById("cd_backup_file")?.click();
    });
    document.getElementById("cd_backup_file")?.addEventListener("change", async (ev) => {
      const file = ev.target?.files?.[0];
      if(!file) return;
      try{
        const text = await file.text();
        const obj = JSON.parse(text);
        if(!confirm("ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’èª­ã¿è¾¼ã‚€ã¨ã€æˆç¸¾ã‚„è¨­å®šãŒä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")) return;
        __backup_apply(obj);
        alert("âœ… èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°ã—ã¦åæ˜ ã—ã¾ã™ã€‚");
        location.reload();
      }catch(e){
        alert("èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: " + (e?.message||e));
      }finally{
        try{ ev.target.value=""; }catch(e){}
      }
    });

function __cd_bulkRemoveDupes(){
  try{
    const items = loadCustomDeck();
    if(!Array.isArray(items) || items.length===0){
      const st = document.getElementById("cd_status");
      if(st) st.textContent = "ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“";
      return;
    }

    // ç¾åœ¨ã®çµã‚Šè¾¼ã¿ç¯„å›²ï¼ˆæ¤œç´¢/lang/Lv/é‡è¤‡ã ã‘ï¼‰ã«å¯¾ã—ã¦é‡è¤‡ã‚’åˆ¤å®š
    const order = __cd_filteredOrder(items); // index list (newest first)
    const counts = new Map();
    for(const i of order){
      const it = items[i] || {};
      const en = __cd_trim(it.en).toLowerCase();
      const lang = __cd_trim(it.lang);
      if(!en) continue;
      const key = `${en}||${lang}`;
      counts.set(key, (counts.get(key)||0) + 1);
    }

    const keep = new Map();
    for(const i of order){
      const it = items[i] || {};
      const en = __cd_trim(it.en).toLowerCase();
      const lang = __cd_trim(it.lang);
      if(!en) continue;
      const key = `${en}||${lang}`;
      if((counts.get(key)||0) < 2) continue;
      // æ–°ã—ã„é †ã«è¦‹ã¦ã€æœ€åˆã«è¦‹ã¤ã‹ã£ãŸ1ä»¶ã‚’æ®‹ã™
      if(!keep.has(key)) keep.set(key, i);
    }

    const del = new Set();
    for(const i of order){
      const it = items[i] || {};
      const en = __cd_trim(it.en).toLowerCase();
      const lang = __cd_trim(it.lang);
      if(!en) continue;
      const key = `${en}||${lang}`;
      if((counts.get(key)||0) < 2) continue;
      if(keep.get(key) !== i) del.add(i);
    }

    if(del.size === 0){
      const st = document.getElementById("cd_status");
      if(st) st.textContent = "é‡è¤‡ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“";
      return;
    }

    const ok = confirm(`ç¾åœ¨ã®çµã‚Šè¾¼ã¿ç¯„å›²ã§ã€é‡è¤‡ ${del.size} ä»¶ã‚’ä¸€æ‹¬å‰Šé™¤ã—ã¾ã™ã€‚\nï¼ˆå„ã‚°ãƒ«ãƒ¼ãƒ—ã§æœ€æ–°ã®1ä»¶ã ã‘æ®‹ã—ã¾ã™ï¼‰\nã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ`);
    if(!ok) return;

    const next = items.filter((_,i)=>!del.has(i));
    saveCustomDeck(next);
    renderCustomDeckPanel();
    renderCustomDeckHint();

    const st = document.getElementById("cd_status");
    if(st) st.textContent = `ğŸ§¹ é‡è¤‡ã‚’ä¸€æ‹¬å‰Šé™¤: ${del.size}ä»¶`;
  }catch(e){
    const st = document.getElementById("cd_status");
    if(st) st.textContent = "ä¸€æ‹¬å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ";
  }
}



    // Filters
    const __wireFilters = () => {
      const q = document.getElementById("cd_search");
      const fl = document.getElementById("cd_filter_lang");
      const fv = document.getElementById("cd_filter_level");
      const dup = document.getElementById("cd_only_dupes");
      const clr = document.getElementById("cd_clear_filters");
      const bulk = document.getElementById("cd_bulk_dedup");
      const apply = () => { renderCustomDeckPanel(); };
      if(q){
        q.addEventListener("input", ()=>{ __cd_filters.q = q.value; apply(); });
      }
      if(fl){
        fl.addEventListener("change", ()=>{ __cd_filters.lang = fl.value; apply(); });
      }
      if(fv){
        fv.addEventListener("change", ()=>{ __cd_filters.level = fv.value; apply(); });
      }
      if(dup){
        dup.addEventListener("change", ()=>{ __cd_filters.onlyDupes = dup.checked; apply(); });
      }
      if(clr){
        clr.addEventListener("click", ()=>{
          __cd_filters = { q:"", lang:"", level:"", onlyDupes:false };
          try{ if(q) q.value=""; if(fl) fl.value=""; if(fv) fv.value=""; if(dup) dup.checked=false; }catch(e){}
          apply();
        });
      }

      if(bulk){
        bulk.addEventListener("click", ()=>{ try{ __cd_bulkRemoveDupes(); }catch(e){} });
      }
    };
    try{ __wireFilters(); }catch(e){}


    // Use this custom deck
    document.getElementById("cd_use")?.addEventListener("click", async () => {
      try{ await useCustomDeck(); }catch(e){}
      try{ closeOverlay(customDeckPanel); }catch(e){}
    });

    // Reset custom deck
    document.getElementById("cd_reset")?.addEventListener("click", () => {
      if(!confirm("è‡ªä½œå˜èªå¸³ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")) return;
      saveCustomDeck([]);
      renderCustomDeckPanel();
      renderCustomDeckHint();
      clearCustomDeckForm();
      const st = document.getElementById("cd_status");
      if(st) st.textContent = "ğŸ§¹ å…¨å‰Šé™¤ã—ã¾ã—ãŸ";
    });

    // Auto translate on blur (optional)
    const __enEl = document.getElementById("cd_en");
    const __jaEl = document.getElementById("cd_ja");
    __enEl?.addEventListener("blur", async () => {
      try{
        if(!document.getElementById("cd_autoTranslate")?.checked) return;
        const en = (__enEl.value||"").trim();
        const ja = (__jaEl.value||"").trim();
        if(en && !ja && typeof translateTextOnline === "function"){
          const v = (typeof loadTranslateLang === "function") ? loadTranslateLang() : "en";
          const t = await translateTextOnline(en, v, "ja");
          __jaEl.value = t;
        }
      }catch(e){}
    });
    __jaEl?.addEventListener("blur", async () => {
      try{
        if(!document.getElementById("cd_autoTranslate")?.checked) return;
        const ja = (__jaEl.value||"").trim();
        const en = (__enEl.value||"").trim();
        if(ja && !en && typeof translateTextOnline === "function"){
          const v = (typeof loadTranslateLang === "function") ? loadTranslateLang() : "en";
          const t = await translateTextOnline(ja, "ja", v);
          __enEl.value = t;
        }
      }catch(e){}
    });

    // Failsafe: whenever focusing inputs, re-sync locale
    __enEl?.addEventListener("focus", ()=>{ 
      try{ if(typeof syncTtsLangFromTranslateChoice === "function") syncTtsLangFromTranslateChoice(true); }catch(e){}
      try{ if(typeof updateLocalePreview === "function") updateLocalePreview(); }catch(e){}
    });
    __jaEl?.addEventListener("focus", ()=>{ 
      try{ if(typeof syncTtsLangFromTranslateChoice === "function") syncTtsLangFromTranslateChoice(true); }catch(e){}
      try{ if(typeof updateLocalePreview === "function") updateLocalePreview(); }catch(e){}
    });
  

    // Auto Lv (CEFR-J)
    try{ installCustomDeckAutoLv(); }catch(e){}
    try{ updateCdAutoLvHint(true); }catch(e){}

  };
  try{
    if(document.readyState === "loading"){
      window.addEventListener("DOMContentLoaded", __bind, { once:true });
    }else{
      __bind();
    }
    window.addEventListener("pageshow", () => { try{ __bind(); }catch(e){} });
  }catch(e){}
})();


// =========================
// Custom Deck (in-app editor)
// =========================

const CUSTOM_TRANSLATE_LANG_KEY = "hamaru_custom_translate_lang"; // stores: en/fr/it/de/es/ko/zh-TW/zh-CN
function loadTranslateLang(){
  try{ return localStorage.getItem(CUSTOM_TRANSLATE_LANG_KEY) || "en"; }catch(e){ return "en"; }
}
function saveTranslateLang(v){
  try{ localStorage.setItem(CUSTOM_TRANSLATE_LANG_KEY, v); }catch(e){}
}

function getChosenTranslateLang(){
  // Prefer current UI selection (even if localStorage wasn't updated yet)
  try{
    const top = document.getElementById("customDeckLangChoiceTop");
    if(top && top.value) return top.value.trim();
  }catch(e){}
  try{
    const sel = document.getElementById("cd_langChoice");
    if(sel && sel.value) return sel.value.trim();
  }catch(e){}
  try{ return loadTranslateLang(); }catch(e){ return "en"; }
}

function cdSetExamplePlaceholder(){
  try{
    const lang = (typeof getChosenTranslateLang==="function") ? getChosenTranslateLang() : "en";
    const map = {
      "en":"example",
      "fr":"exemple",
      "it":"esempio",
      "de":"Beispiel",
      "es":"ejemplo",
      "ko":"ì˜ˆ",
      "zh-TW":"ä¾‹å­",
      "zh-CN":"ä¾‹å­"
    };
    const ex = map[lang] || "example";
    const el = document.getElementById("cd_en");
    if(el){
      // å…¥åŠ›ãŒç©ºãªã‚‰ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’è¨€èªã«åˆã‚ã›ã‚‹ï¼ˆå…¥åŠ›ä¸­ã¯è§¦ã‚‰ãªã„ï¼‰
      if(!el.value.trim()) el.placeholder = ex;
    }
  }catch(e){}
}

function getLocaleForTts(lang){
  // map translation lang -> likely TTS locale used in your game
  const map = {
    "en": "en-US",
    "fr": "fr-FR",
    "it": "it-IT",
    "de": "de-DE",
    "es": "es-ES",
    "ko": "ko-KR",
    "zh-TW": "zh-TW",
    "zh-CN": "zh-CN"
  };
  return map[lang] || "en-US";
}

function getLangPairForDeck(choice){
  // The app's lang column uses "FOREIGN_LOCALE/ja-JP" (e.g., fr-FR/ja-JP, ko-KR/ja-JP)
  const loc = getLocaleForTts(choice);
  return `${loc}/ja-JP`;
}


let __updatingLocalePreview=false;

function updateLocalePreview(){
  if(__updatingLocalePreview) return;
  __updatingLocalePreview=true;
  try{
    const choice = getChosenTranslateLang();
    const loc = getLocaleForTts(choice);
    const el = document.getElementById("cd_localePreview");
    if(el) el.textContent = loc;
    try{ const t=document.getElementById('customDeckLocalePreviewTop'); if(t) t.textContent = loc; }catch(e){}
  }catch(e){} 
  finally{ __updatingLocalePreview=false; }
}

function updateForeignLabel(){
  const choice = getChosenTranslateLang();
  const label = {
    "en":"è‹±èª","fr":"ãƒ•ãƒ©ãƒ³ã‚¹èª","it":"ã‚¤ã‚¿ãƒªã‚¢èª","de":"ãƒ‰ã‚¤ãƒ„èª","es":"ã‚¹ãƒšã‚¤ãƒ³èª","ko":"éŸ“å›½èª","zh-TW":"ä¸­å›½èª(ç¹ä½“)","zh-CN":"ä¸­å›½èª(ç°¡ä½“)"
  }[choice] || "å¤–å›½èª";
  // Update placeholder hints (keep ids)
  try{ document.querySelector('label[for="cd_en"]'); }catch(e){}







function syncTtsLangFromTranslateChoice(force=true){
  // v77: è»½é‡ç‰ˆï¼ˆã‚¹ãƒãƒ›ã§å›ºã¾ã‚Šã«ãã„ã‚ˆã†ã«DOMç·ãªã‚æ¢ç´¢ã‚’ã‚„ã‚ã‚‹ï¼‰
  try{
    const choice = (typeof getChosenTranslateLang==="function")
      ? getChosenTranslateLang()
      : ((typeof loadTranslateLang==="function") ? loadTranslateLang() : "en");

    const locPair = (typeof getLangPairForDeck==="function")
      ? getLangPairForDeck(choice)
      : `${getLocaleForTts(choice)}/ja-JP`;

    // previews
    try{
      const t1 = document.getElementById("customDeckLocalePreviewTop");
      if(t1) t1.textContent = locPair;
      const t2 = document.getElementById("customDeckLocalePreview");
      if(t2) t2.textContent = locPair;
      const t3 = document.getElementById("cd_localePreview");
      if(t3) t3.textContent = locPair;
    }catch(e){}

    // direct targets (IDs are stable in this build)
    const sel = document.getElementById("cd_lang_select");
    if(sel){
      if(force || !sel.value) sel.value = locPair;
      try{ sel.dispatchEvent(new Event("change", {bubbles:true})); }catch(e){}
    }

    const inp = document.getElementById("cd_lang");
    if(inp){
      if(force) inp.value = locPair;
      else if(!inp.value.trim()) inp.value = locPair;
      inp.placeholder = `ã‚«ã‚¹ã‚¿ãƒ ï¼ˆä¾‹: ${locPair}ï¼‰`;
      try{ inp.dispatchEvent(new Event("input", {bubbles:true})); }catch(e){}
      try{ inp.dispatchEvent(new Event("change", {bubbles:true})); }catch(e){}
    }
  }catch(e){}
}





  try{
    const enEl = document.getElementById("cd_en");
    if(enEl && !enEl.value.trim()){
      enEl.placeholder = `${label}ï¼ˆä¾‹ï¼‰`;
    }
  }catch(e){}
}


async function translateTextOnline(text, from, to){
  // Public endpoint (no key). Rate limits/accuracy may vary.
  const q = encodeURIComponent(text);
  const url = `https://api.mymemory.translated.net/get?q=${q}&langpair=${encodeURIComponent(from)}|${encodeURIComponent(to)}`;
  const res = await fetch(url, {method:"GET"});
  if(!res.ok) throw new Error("translate failed");
  const data = await res.json();
  const t = data?.responseData?.translatedText;
  if(!t) throw new Error("no translation");
  return t;
}

const CUSTOM_DECK_KEY = "hamaru_custom_deck_v68";

function loadCustomDeck(){
  try{
    const raw = localStorage.getItem(CUSTOM_DECK_KEY);
    const arr = raw ? JSON.parse(raw) : [];
    return Array.isArray(arr) ? arr : [];
  }catch(e){
    return [];
  }
}
function saveCustomDeck(arr){
  try{ localStorage.setItem(CUSTOM_DECK_KEY, JSON.stringify(arr)); }catch(e){}
}
// ---- Custom Deck filter state ----
let __cd_filters = { q:"", lang:"", level:"", onlyDupes:false };

function __cd_trim(s){ return (s||"").toString().trim(); }

function __cd_buildLangOptions(items){
  try{
    const sel = document.getElementById("cd_filter_lang");
    if(!sel) return;
    const cur = sel.value || "";
    const set = new Set();
    (items||[]).forEach(it=>{
      const k = __cd_trim(it.lang);
      if(k) set.add(k);
    });
    const opts = Array.from(set).sort();
    // rebuild (keep first option)
    sel.innerHTML = '<option value="">lang: ã™ã¹ã¦</option>' + opts.map(v=>`<option value="${v.replace(/"/g,'&quot;')}">${v.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</option>`).join("");
    sel.value = cur;
  }catch(e){}
}

function __cd_makeDupeMap(items){
  const m = new Map();
  (items||[]).forEach(it=>{
    const en = __cd_trim(it.en).toLowerCase();
    const lang = __cd_trim(it.lang);
    const key = `${en}||${lang}`;
    if(!en) return;
    m.set(key, (m.get(key)||0)+1);
  });
  return m;
}

function __cd_filteredOrder(items){
  const q = __cd_trim(__cd_filters.q).toLowerCase();
  const flang = __cd_trim(__cd_filters.lang);
  const flevel = __cd_trim(__cd_filters.level);
  const onlyDupes = !!__cd_filters.onlyDupes;
  const dupes = onlyDupes ? __cd_makeDupeMap(items) : null;

  const idx = [];
  for(let i=0;i<(items||[]).length;i++){
    const it = items[i] || {};
    const en = __cd_trim(it.en);
    const ja = __cd_trim(it.ja);
    const lv = __cd_trim(it.level);
    const lang = __cd_trim(it.lang);

    if(flang && lang !== flang) continue;
    if(flevel && (lv||"") !== flevel) continue;
    if(q){
      const hay = (en + " " + ja).toLowerCase();
      if(!hay.includes(q)) continue;
    }
    if(onlyDupes){
      const key = `${en.toLowerCase()}||${lang}`;
      if(!dupes || (dupes.get(key)||0) < 2) continue;
    }
    idx.push(i);
  }

  


return idx.reverse();
}

function normalizeBoolStr(v){
  const s = (v||"").toString().trim().toLowerCase();
  if(!s) return "";
  if(["1","true","t","yes","y","on"].includes(s)) return "true";
  if(["0","false","f","no","n","off"].includes(s)) return "false";
  return s; // ãã®ã¾ã¾
}
function cdEscapeCsv(val){
  const s = (val ?? "").toString();
  if(/[",\n]/.test(s)) return '"' + s.replace(/"/g,'""') + '"';
  return s;
}
function buildCustomCsvText(items){
  const header = ["en","ja","level","lang","tts"].join(",") + "\n";
  const lines = items.map(it => {
    const en = cdEscapeCsv(it.en||"");
    const ja = cdEscapeCsv(it.ja||"");
    const lv = cdEscapeCsv(it.level||"");
    const lang = cdEscapeCsv(it.lang||"");
    const tts = cdEscapeCsv(it.tts||"");
    return [en,ja,lv,lang,tts].join(",");
  });
  return header + lines.join("\n") + "\n";
}

// ---- CSV import (simple robust parser) ----
function __cd_parseCsv(text){
  const s = (text || "").toString().replace(/^\uFEFF/, ""); // strip BOM
  const rows = [];
  let cur = "";
  let row = [];
  let i = 0;
  let inQ = false;
  while(i < s.length){
    const ch = s[i];
    if(inQ){
      if(ch === '"'){
        if(s[i+1] === '"'){ cur += '"'; i += 2; continue; }
        inQ = false; i++; continue;
      }
      cur += ch; i++; continue;
    }else{
      if(ch === '"'){ inQ = true; i++; continue; }
      if(ch === ","){ row.push(cur); cur = ""; i++; continue; }
      if(ch === "\n"){ row.push(cur); rows.push(row); row = []; cur = ""; i++; continue; }
      if(ch === "\r"){ i++; continue; }
      cur += ch; i++; continue;
    }
  }
  row.push(cur); rows.push(row);
  // trim empty tail rows
  while(rows.length && rows[rows.length-1].every(c => !String(c||"").trim())) rows.pop();
  return rows;
}

function __cd_rowsToItems(rows){
  if(!rows || !rows.length) return [];
  let start = 0;
  const head = rows[0].map(x => String(x||"").trim().toLowerCase());
  const hasHeader = head.includes("en") && head.includes("ja");
  const col = {};
  if(hasHeader){
    head.forEach((h, idx)=>{ col[h]=idx; });
    start = 1;
  }else{
    // assume: en,ja,level,lang,tts
    col["en"]=0; col["ja"]=1; col["level"]=2; col["lang"]=3; col["tts"]=4;
  }
  const out = [];
  for(let r=start; r<rows.length; r++){
    const a = rows[r] || [];
    const en = (a[col["en"]] ?? "").toString().trim();
    const ja = (a[col["ja"]] ?? "").toString().trim();
    if(!en || !ja) continue;
    const level = (a[col["level"]] ?? "").toString().trim();
    const lang  = (a[col["lang"]]  ?? "").toString().trim();
    const tts   = normalizeBoolStr((a[col["tts"]] ?? "").toString().trim());
    out.push({ en, ja, level, lang, tts });
  }
  return out;
}


// ---- Paste import (no-CSV) ----
function __cd_hasJaChars(s){
  return /[\u3040-\u30ff\u3400-\u9fff\uF900-\uFAFF]/.test(String(s||""));
}
function __cd_parsePaste(raw, lang, ttsDefault){
  const out = [];
  const s = (raw||"").toString().replace(/\r\n/g,"\n").replace(/\r/g,"\n");
  const lines = s.split("\n");
  for(let ln=0; ln<lines.length; ln++){
    let line = (lines[ln]||"").trim();
    if(!line) continue;
    if(line.startsWith("#") || line.startsWith("//")) continue;

    // remove bullet prefixes
    line = line.replace(/^[\-\*\u2022]+\s*/,"").trim();
    if(!line) continue;

    const it = __cd_parsePasteLine(line, lang, ttsDefault);
    if(it) out.push(it);
  }
  return out;
}

function __cd_parsePasteLine(line, lang, ttsDefault){
  let en = "", ja = "", lv = "";
  let parts = null;

  // 1) tab (best)
  if(line.includes("\t")){
    parts = line.split("\t").map(x=>String(x||"").trim()).filter(x=>x!== "");
  }else if(line.includes(",")){
    // 2) comma (simple)
    parts = line.split(",").map(x=>String(x||"").trim()).filter(x=>x!== "");
  }else{
    // 3) common separators
    const sepRe = /\s*(?:\:|ï¼š|\-|â€“|â€”|=>|â†’)\s*/;
    if(sepRe.test(line)){
      parts = line.split(sepRe).map(x=>String(x||"").trim()).filter(x=>x!== "");
    }
  }

  if(parts && parts.length>=2){
    en = parts[0] || "";
    ja = parts[1] || "";
    if(parts.length>=3) lv = (parts[2]||"").toString().trim();
  }else{
    // 4) heuristic: if line contains Japanese but no obvious separator:
    //    - If it's Japanese-only (no Latin letters), treat as ja only.
    //    - Otherwise, split at first Japanese chunk boundary (e.g., "watch out æ°—ã‚’ã¤ã‘ã¦").
    if(__cd_hasJaChars(line)){
      const hasLatin = /[A-Za-z]/.test(line);
      if(!hasLatin){
        en = "";
        ja = line.trim();
      }else{
        const m = line.match(/^(.+?)\s*([\u3040-\u30ff\u3400-\u9fff\uF900-\uFAFF].*)$/);
        if(m){
          en = (m[1]||"").trim();
          ja = (m[2]||"").trim();
        }else{
          // fallback: split by spaces
          const toks = line.split(/\s+/);
          en = (toks[0]||"").trim();
          ja = toks.slice(1).join(" ").trim();
        }
      }
    }else{
      // no Japanese: treat as "foreign meaning" if separator absent -> split last token as lv if numeric
      const toks = line.split(/\s+/).filter(Boolean);
      if(toks.length>=2){
        en = toks[0];
        ja = toks.slice(1).join(" ");
      }else{
        en = line.trim();
      }
    }
  }

  // clean
  en = (en||"").toString().trim();
  ja = (ja||"").toString().trim();
  lv = (lv||"").toString().trim();

  // heuristic: if user pasted Japanese first or Japanese-only, keep Japanese in 'ja'
  try{
    const enHasJa = __cd_hasJaChars(en);
    const jaHasJa = __cd_hasJaChars(ja);
    if(en && !ja && enHasJa){
      ja = en; en = "";
    }else if(en && ja && enHasJa && !jaHasJa){
      const tmp = en; en = ja; ja = tmp;
    }
  }catch(e){}

  if(!en && !ja) return null;

  // If lv is not numeric, ignore
  if(lv && !/^\d+(\.\d+)?$/.test(lv)) lv = "";

  const item = {
    en: en,
    ja: ja,
    level: lv ? (lv.includes(".") ? parseFloat(lv) : parseInt(lv,10)) : "",
    lang: (lang||"").toString().trim(),
    tts: (ttsDefault||"").toString().trim()
  };
  return item;
}

async function __cd_autofillMissingByTranslate(items, lang, onProgress){
  // Online translate via MyMemory. Rate-limited; keep it small.
  const out = [];
  let done = 0;
  const MAX = 30; // safety
  for(const it of items){
    const x = { ...it };
    try{
      if(!x.ja && x.en){
        if(done < MAX){
          const t = await translateTextOnline(String(x.en), String(lang||"en"), "ja");
          x.ja = (t||"").toString().trim();
          done++;
          if(onProgress) onProgress(done, items.length);
          await new Promise(r=>setTimeout(r, 250));
        }
      }else if(!x.en && x.ja){
        if(done < MAX){
          const t = await translateTextOnline(String(x.ja), "ja", String(lang||"en"));
          x.en = (t||"").toString().trim();
          done++;
          if(onProgress) onProgress(done, items.length);
          await new Promise(r=>setTimeout(r, 250));
        }
      }
    }catch(e){
      // ignore single-line failures
    }
    out.push(x);
  }
  return out;
}

// ---- Full backup (localStorage) ----
function __backup_collect(){
  const keys = [];
  try{
    for(let i=0;i<localStorage.length;i++){
      const k = localStorage.key(i);
      if(!k) continue;
      if(k === "VOICE_MODE" || k.startsWith("hamaru_")) keys.push(k);
    }
  }catch(e){}
  keys.sort();
  const data = {};
  for(const k of keys){
    try{ data[k] = localStorage.getItem(k); }catch(e){}
  }
  return { format:"tangojuku_backup_v1", createdAt: new Date().toISOString(), data };
}

function __backup_apply(obj){
  if(!obj || obj.format !== "tangojuku_backup_v1" || !obj.data) throw new Error("ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å½¢å¼ãŒé•ã„ã¾ã™");
  const keys = Object.keys(obj.data);
  // ç¢ºå®Ÿã«é©ç”¨
  for(const k of keys){
    const v = obj.data[k];
    try{
      if(v === null || v === undefined) localStorage.removeItem(k);
      else localStorage.setItem(k, String(v));
    }catch(e){}
  }
}

function renderCustomDeckHint(){
  try{
    const arr = loadCustomDeck();
    const el = document.getElementById("customDeckHint");
    if(el) el.textContent = arr.length ? `ç™»éŒ²æ¸ˆã¿: ${arr.length}èª` : "ã¾ã å˜èªãŒã‚ã‚Šã¾ã›ã‚“ï¼ˆé–‹ã„ã¦è¿½åŠ ã—ã¦ãã ã•ã„ï¼‰";
  }catch(e){}
}

// ---- custom deck list rendering (chunked + delegated events) ----
let __cd_cache = [];
let __cd_bound = false;
let __cd_render_token = 0; // æç”»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç”¨

function __cd_escape(s){
  return (s||"").toString().replace(/</g,"&lt;").replace(/>/g,"&gt;");
}

function renderCustomDeckPanel(){
  // é€”ä¸­ã§é–‰ã˜ãŸã‚‰æç”»ã‚’æ­¢ã‚ã‚‹
  __cd_render_token++;
  const token = __cd_render_token;

  const arr = loadCustomDeck();
  __cd_cache = Array.isArray(arr) ? arr : [];

  const tbody = document.getElementById("cd_list");
  const elCount = document.getElementById("cd_count");
  const elStatus = document.getElementById("cd_status");

  if(elCount) elCount.textContent = `${__cd_cache.length}èª`;

  // åˆæœŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  if(elStatus){
    elStatus.textContent = __cd_cache.length ? "æº–å‚™OK" : "ã¾ãš en/ja ã‚’è¿½åŠ ã—ã¦ã­";
  }
  if(!tbody) return;

  // ã‚¤ãƒ™ãƒ³ãƒˆã¯1å›ã ã‘ï¼ˆå¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã‚‚å›ºã¾ã‚‰ãªã„ï¼‰
  if(!__cd_bound){
    __cd_bound = true;
    tbody.addEventListener("click", (ev)=>{
      const t = ev.target;
      const editBtn = t?.closest?.("[data-cd-edit]");
      const delBtn  = t?.closest?.("[data-cd-del]");

      if(editBtn){
        const i = Number(editBtn.getAttribute("data-cd-edit"));
        const a = loadCustomDeck();
        const it = a[i];
        if(!it) return;

        document.getElementById("cd_en").value = it.en||"";
        document.getElementById("cd_ja").value = it.ja||"";
        document.getElementById("cd_level").value = it.level||"";
        document.getElementById("cd_lang").value = it.lang||"";
        try{ const sel=document.getElementById("cd_lang_select"); if(sel){ sel.value = (it.lang||""); } }catch(e){}
        try{ document.getElementById("cd_tts").value = (it.tts||"").toString().toLowerCase(); }catch(e){}
        document.getElementById("cd_editIndex").value = String(i);

        const st = document.getElementById("cd_status");
        if(st) st.textContent = `ç·¨é›†ãƒ¢ãƒ¼ãƒ‰: #${i+1}`;
        return;
      }

      if(delBtn){
        const i = Number(delBtn.getAttribute("data-cd-del"));
        if(!confirm(`#${i+1} ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) return;
        const a = loadCustomDeck();
        a.splice(i,1);
        saveCustomDeck(a);
        renderCustomDeckPanel();
        renderCustomDeckHint();
        return;
      }
    });
  }

  // ã¾ãšç©ºã«
  tbody.innerHTML = "";

  // å¤§é‡ã§ã‚‚å›ºã¾ã‚‰ãªã„ã‚ˆã†ã«åˆ†å‰²æç”»
  const CHUNK = 100; // 1å›ã«æãè¡Œæ•°ï¼ˆé‡ã„ç«¯æœ«å‘ã‘ã«æ§ãˆã‚ï¼‰
  let idx = 0;
  // æ–°ã—ã„å˜èªã‚’ä¸Šã«è¡¨ç¤ºï¼ˆè¦‹å¤±ã„é˜²æ­¢ï¼‰
  __cd_buildLangOptions(__cd_cache);
  const __cd_order = __cd_filteredOrder(__cd_cache);
  try{ const el=document.getElementById("cd_count"); if(el) el.textContent = `${__cd_order.length}/${__cd_cache.length}`; }catch(e){}

  const renderChunk = ()=>{
    if(token !== __cd_render_token) return; // ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    const end = Math.min(idx + CHUNK, __cd_order.length);
    let out = "";
    for(; idx < end; idx++){
      const real = __cd_order[idx];
      const it = __cd_cache[real] || {};
      const en = __cd_escape(it.en);
      const ja = __cd_escape(it.ja);
      const lv = __formatLvLabel(it.en, (it.level ?? ""));
      const lang = __cd_escape(it.lang);
      out += `
        <tr>
          <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${en}</td>
          <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${ja}</td>
          <td style="padding:6px;text-align:right;border-bottom:1px solid rgba(255,255,255,.08);">${lv}</td>
          <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">${lang}</td>
          <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,.08);">
            <button class="btn smallbtn" type="button" data-cd-edit="${real}">ç·¨é›†</button>
            <button class="btn smallbtn" type="button" data-cd-del="${real}">å‰Šé™¤</button>
          </td>
        </tr>
      `;
    }
    if(out) tbody.insertAdjacentHTML("beforeend", out);

    if(idx < __cd_order.length){
      if(elStatus) elStatus.textContent = `è¡¨ç¤ºä¸­... ${idx}/${__cd_order.length}èª`;
      requestAnimationFrame(renderChunk);
    }else{
      if(elStatus) elStatus.textContent = __cd_cache.length ? "æº–å‚™OK" : "ã¾ãš en/ja ã‚’è¿½åŠ ã—ã¦ã­";
      // è¿½åŠ /æ›´æ–°ç›´å¾Œ: ãã®è¡Œã¸è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆè¦‹å¤±ã„é˜²æ­¢ï¼‰
      try{
        const sidx = window.__cd_scroll_to_index;
        if(Number.isFinite(sidx)){
          const btn = tbody.querySelector(`[data-cd-edit="${sidx}"]`);
          const tr = btn ? btn.closest('tr') : null;
          if(btn) btn.scrollIntoView({block:'center'});
          if(tr){ tr.style.outline='2px solid rgba(56,217,150,.9)'; tr.style.outlineOffset='-2px';
            setTimeout(()=>{ try{ tr.style.outline=''; tr.style.outlineOffset=''; }catch(e){} }, 1200);
          }
          window.__cd_scroll_to_index = null;
        }
       }catch(e){}

    }
  };

  // 0ä»¶ãªã‚‰å³çµ‚äº†
  if(__cd_cache.length === 0) return;

  // ã¾ãšçŠ¶æ…‹ã‚’å‡ºã—ã¦ã‹ã‚‰æç”»é–‹å§‹
  if(elStatus) elStatus.textContent = `è¡¨ç¤ºæº–å‚™... 0/${__cd_cache.length}èª`;
  requestAnimationFrame(renderChunk);
}


function clearCustomDeckForm(){
  document.getElementById("cd_en").value = "";
  document.getElementById("cd_ja").value = "";
  const __lvEl = document.getElementById("cd_level");
  if(__lvEl){ __lvEl.value = ""; __lvEl.dataset.autoFilled="0"; }
  try{ document.getElementById("cd_tts").value = ""; }catch(e){}
  try{ const h=document.getElementById("cd_lvHint"); if(h) h.textContent=""; }catch(e){}
  document.getElementById("cd_editIndex").value = "-1";
  const st = document.getElementById("cd_status");
  if(st) st.textContent = "å…¥åŠ›ã—ã¦è¿½åŠ ã—ã‚ˆã†";
  try{ if(typeof syncTtsLangFromTranslateChoice==="function") syncTtsLangFromTranslateChoice(true); }catch(e){}

}

async function upsertCustomDeckFromForm(){
  const elEn = document.getElementById("cd_en");
  const elJa = document.getElementById("cd_ja");
  const elLv = document.getElementById("cd_level");
  const elLang = document.getElementById("cd_lang");
  const elTts = document.getElementById("cd_tts");
  const elAuto = document.getElementById("cd_autoTranslate");
  const elEdit = document.getElementById("cd_editIndex");

  const en = (elEn?.value || "").trim();
  let ja = (elJa?.value || "").trim();
  let level = clamp(Number((elLv?.value || "").trim() || 1) || 1, 1, 99);
  const autoLv = !!document.getElementById("cd_autoLevel")?.checked;
  let lang = (elLang?.value || "").trim();
  const tts = normalizeBoolStr(elTts?.value || "");
  const auto = !!elAuto?.checked;

  if(!en){ alert("å¤–å›½èªï¼ˆé¸ã‚“ã è¨€èªï¼‰ã‚’å…¥ã‚Œã¦ã­"); return; }

  // è‡ªå‹•ç¿»è¨³ï¼ˆjaãŒç©ºã®æ™‚ã ã‘ï¼‰
  if(auto && !ja){
    try{
      const choice = (typeof getChosenTranslateLang==="function") ? getChosenTranslateLang() : ((typeof loadTranslateLang==="function")?loadTranslateLang():"en");
      // "en" / "fr" ãªã©ï¼ˆMyMemoryã¯è¨€èªã‚³ãƒ¼ãƒ‰æƒ³å®šï¼‰
      const from = (choice || "en").toString().split("-")[0];
      ja = await translateTextOnline(en, from, "ja");
      if(elJa) elJa.value = ja;
    }catch(e){
      alert("è‡ªå‹•ç¿»è¨³ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ—¥æœ¬èªã‚’æ‰‹å…¥åŠ›ã—ã¦ã­ã€‚");
    }
  }

  if(!ja){ alert("æ—¥æœ¬èªï¼ˆjaï¼‰ã‚’å…¥ã‚Œã¦ã­"); return; }

  // è‡ªå‹•Lv: Oxford 3000/5000 â†’ CEFR-J â†’ï¼ˆä¸¡æ–¹ã«ãªã‘ã‚Œã°æ¨å®šLv3ï¼‰
  // â€»è‡ªå‹•Lvã‚’ONã«ã—ã¦ã„ã‚‹é–“ã¯è¾æ›¸ã®çµæœã‚’å„ªå…ˆã€‚æ‰‹å‹•ã«ã—ãŸã„å ´åˆã¯ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã—ã¦ã­ã€‚
  if(autoLv){
    try{
      const r = suggestLevelAuto(en);
      if(r && r.lv){
        level = Number(r.lv);
        if(elLv){ elLv.value = String(r.lv); elLv.dataset.autoFilled = "1"; }
      }else{
        if(String(elLv?.value||"").trim()===""){
          level = 3;
          if(elLv){ elLv.value = "3"; elLv.dataset.autoFilled = "1"; }
        }
      }
      try{ updateCdAutoLvHint(false); }catch(e){}
    }catch(e){}
  }

// lang ãŒç©ºãªã‚‰ã€é¸æŠä¸­ã®æ¨å¥¨ãƒ­ã‚±ãƒ¼ãƒ«ã‚’å…¥ã‚Œã‚‹
  if(!lang){
    try{
      const choice = (typeof getChosenTranslateLang==="function") ? getChosenTranslateLang() : ((typeof loadTranslateLang==="function")?loadTranslateLang():"en");
      const loc = (typeof getLocaleForTts==="function") ? getLocaleForTts(choice) : "";
      lang = (loc || "").trim();
      if(elLang) elLang.value = lang;
      try{ const sel=document.getElementById("cd_lang_select"); if(sel && lang) sel.value = lang; }catch(e){}
    }catch(e){}
  }

  const idx = Number(elEdit?.value || "-1");
  const arr = loadCustomDeck();
  const item = { en, ja, level, lang, tts };

  if(Number.isFinite(idx) && idx >= 0 && idx < arr.length){
    arr[idx] = item;
  }else{
    arr.push(item);
  }

  saveCustomDeck(arr);
  // è¿½åŠ /æ›´æ–°ã—ãŸè¡ŒãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾è±¡ã‚’è¨˜éŒ²
  try{
    const __idx = (Number.isFinite(idx) && idx >= 0 && idx < arr.length) ? idx : (arr.length - 1);
    window.__cd_scroll_to_index = __idx;
  }catch(e){}
  renderCustomDeckPanel();
  renderCustomDeckHint();
  clearCustomDeckForm();

  const st = document.getElementById("cd_status");
  if(st) st.textContent = "âœ… åæ˜ ã—ã¾ã—ãŸ";
}

function downloadTextFile(text, filename, mime){
  try{
    const blob = new Blob([text], {type: mime || "text/plain"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = filename || "download.txt";
    document.body.appendChild(a);
    a.click();
    setTimeout(()=>{ try{ URL.revokeObjectURL(a.href); }catch(e){}; a.remove(); }, 0);
  }catch(e){
    alert("ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ");
  }
}


async function useCustomDeck(){
  const arr = loadCustomDeck();
  if(arr.length < 4){
    alert("è‡ªä½œå˜èªå¸³ã¯4èªä»¥ä¸Šã‚ã‚‹ã¨ã‚²ãƒ¼ãƒ ã§ãã¾ã™ï¼ˆ4æŠã®ãŸã‚ï¼‰");
    return;
  }
  // build stable hash
  const csvText = buildCustomCsvText(arr);
  const h = await sha256Hex("custom::" + csvText);

  // map to game items
  const items = arr.map(it=>({
    en: (it.en||"").trim(),
    ja: (it.ja||"").trim(),
    level: (Number(it.level||0)||1),
    lang: (it.lang||"").trim(),
    en_lang: "",
    ja_lang: "",
    tts: (it.tts||"").toString().trim()
  }));

  CURRENT_CSV_NAME = "è‡ªä½œå˜èªå¸³";
  CURRENT_CSV_HASH = h;
  WORDS_ALL = items;


  // è‡ªä½œå˜èªå¸³ã‚’ä½¿ã†æ™‚ã¯ã€å¤ã„å¾©ç¿’ã‚»ãƒƒãƒˆãŒæ®‹ã£ã¦å‡ºé¡Œ0ã«ãªã‚‹ã®ã‚’é˜²ã
  try{ if (elReviewMode) elReviewMode.value = "off"; }catch(e){}
  try{ REVIEW_SET = []; }catch(e){}


  // Last CSVã¨ã—ã¦ã‚‚ä¿å­˜ï¼ˆæˆ»ã‚‹/å†èµ·å‹•ã§ã‚‚å¾©å…ƒï¼‰
  try{
    localStorage.setItem(LAST_CSV_NAME_KEY, CURRENT_CSV_NAME);
    localStorage.setItem(LAST_CSV_HASH_KEY, CURRENT_CSV_HASH);
    localStorage.setItem(LAST_CSV_ITEMS_KEY, JSON.stringify(items));
  }catch(e){}

  // Resync
  applyDeckFilter();
  REVIEW_SET = [];
  loadReviewFromStorage();
  loadStatsFromStorage();
  updateReviewStatus();
  loadDailyForCurrent();
  renderDailyUI();
  renderHud();
  resetGame();

  const st = document.getElementById("cd_status");
  if(st) st.textContent = `âœ… è‡ªä½œå˜èªå¸³ã‚’é©ç”¨: ${items.length}èª`;
  renderCustomDeckHint();
}

// =========================
  // Init
  // =========================
  // âœ… å‰å›CSVã‚’æœ€å„ªå…ˆã§å¾©å…ƒï¼ˆã‚¹ãƒãƒ›ã®ã€Œæˆ»ã‚‹ã€ã€Œå†è¡¨ç¤ºã€ã€Œå†èµ·å‹•ã€å¯¾ç­–ï¼‰
  const __restored = restoreAllFromLastCsvIfNeeded();

  // bfcacheï¼ˆæˆ»ã‚‹/é€²ã‚€ã§ãƒšãƒ¼ã‚¸ãŒã€Œå¾©å¸°ã€ã—ãŸæ™‚ï¼‰ã«ã‚‚å¾©å…ƒã‚’ã‹ã‘ã‚‹
  window.addEventListener("pageshow", (ev) => {
    try{
      // persisted=true ã®ã¨ãã¯ bfcache ã‹ã‚‰å¾©å¸°
      // persisted=false ã§ã‚‚ Android/Chrome ã¯æˆ»ã‚‹ã§çŠ¶æ…‹ãŒã‚ºãƒ¬ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§æ¯å›ãƒã‚§ãƒƒã‚¯ã™ã‚‹
      const ok = restoreAllFromLastCsvIfNeeded();
      if(ok){
        // å¾©å…ƒã•ã‚ŒãŸã‚‰ã€ã„ã£ãŸã‚“ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦æ•´åˆæ€§ã‚’å–ã‚‹
        try{ resetGame(); }catch(e){}
      }
    }catch(e){}
  });

  if(!__restored){
    // å¾©å…ƒã§ããªã‹ã£ãŸå ´åˆã¯å†…è”µãƒ‡ãƒ¼ã‚¿ã§é€šå¸¸åˆæœŸåŒ–
    applyDeckFilter();
    loadReviewFromStorage();
    loadStatsFromStorage();
    updateReviewStatus();
  }

  listVoices();
  elRateLabel.textContent = Number(elRate.value).toFixed(2);
  elVolLabel.textContent = Number(elVolume.value).toFixed(2);
  elCsvStatus.textContent = `ç¾åœ¨ã®CSV: ${CURRENT_CSV_NAME}ï¼ˆ${WORDS_ALL.length}èªï¼‰`;

  try { loadDailyForCurrent(); } catch(e) {}

  try { if (typeof renderLangFilterOptions === "function") renderLangFilterOptions(); } catch(e) {}
  // =========================
  // è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆãƒãƒƒãƒ—UIï¼‰åˆæœŸåŒ–
  // =========================
  try {
    // åˆæœŸã¯å…¨éƒ¨ONï¼ˆè¦‹ãŸç›®ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ï¼‰ã€‚åŠ¹æœã¯ã€Œã™ã¹ã¦å¯¾è±¡ã€ã¨åŒã˜ã€‚
    try { SELECTED_LANGS = new Set(getKnownLangs()); } catch(e) {}

    if (typeof renderLangFilterOptions === "function") renderLangFilterOptions();
    if (elLangAll) {
      elLangAll.addEventListener("click", () => {
        // å…¨é¸æŠ = ãƒãƒƒãƒ—ã‚’å…¨éƒ¨ONï¼ˆè¦‹ãŸç›®ã®å…¨é¸æŠï¼‰
        try { SELECTED_LANGS = new Set(getKnownLangs()); } catch(e) { SELECTED_LANGS = new Set(); }
        renderLangFilterOptions();
        showFlash("good", "è¨€èª: å…¨é¸æŠã«ã—ãŸã‚ˆ");
      });
    }
    if (elLangClear) {
      elLangClear.addEventListener("click", () => {
        // ã‚¯ãƒªã‚¢=ã™ã¹ã¦ï¼ˆè¿·å­é˜²æ­¢ï¼‰
        SELECTED_LANGS = new Set();
        renderLangFilterOptions();
        // åå¿œãŒåˆ†ã‹ã‚‹ã‚ˆã†ã«ã€å¿…ãšãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™
        const langs = (typeof getKnownLangs === "function") ? getKnownLangs() : [];
        if (!langs || langs.length === 0) {
          if (elLangFilterStatus) elLangFilterStatus.textContent = "è¨€èª: ã™ã¹ã¦ï¼ˆâ€»CSVã‚’èª­ã¿è¾¼ã‚€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆï¼‰";
          showFlash("good", "ã¾ã è¨€èªãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚ˆã€‚langåˆ—ã¤ãCSVã‚’èª­ã¿è¾¼ã‚“ã§ã­");
        } else {
          if (elLangFilterStatus) elLangFilterStatus.textContent = "è¨€èª: ã™ã¹ã¦";
          showFlash("good", "è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ã‚¯ãƒªã‚¢ã—ãŸã‚ˆï¼ˆ= ã™ã¹ã¦å¯¾è±¡ï¼‰");
          try { elLangClear.classList.add("langClearPulse"); setTimeout(()=>elLangClear.classList.remove("langClearPulse"), 250); } catch(e) {}
        }
      });
    }
  } catch(e) { console.error(e); }
  // =========================
  // Auto-start first question (v74)
  // =========================
  function autoStartIfBlank(tag){
    try{
      const p = document.getElementById("prompt");
      const ch = document.getElementById("choices");
      const restart = document.getElementById("restart");
      const promptTxt = (p?.textContent||"").trim();
      const hasChoices = !!(ch && ch.querySelector("button.choice"));
      // If nothing is shown yet, trigger the same path as the Restart button.
      if((promptTxt === "---" || promptTxt === "") && !hasChoices && restart){
        restart.click();
      }
    }catch(e){}
  }
  // Run multiple times for timing + bfcache.
  setTimeout(()=>autoStartIfBlank("t200"), 200);
  setTimeout(()=>autoStartIfBlank("t800"), 800);
  setTimeout(()=>autoStartIfBlank("t1600"), 1600);
  window.addEventListener("pageshow", ()=>setTimeout(()=>autoStartIfBlank("pageshow"), 50));
  window.addEventListener("visibilitychange", ()=>{ if(!document.hidden) setTimeout(()=>autoStartIfBlank("vis"), 50); });



  renderHud();
  resetGame();


// ===== TTS HUD =====
function updateTtsHud(){
  const pill = document.getElementById("ttsHudPill");
  if(!pill) return;

  let lock = null;
  try{
    const raw = localStorage.getItem(TTS_LOCK_KEY);
    if(!raw){
      lock = null;
    }else if(raw[0] !== "{"){
      // æ—§å½¢å¼ï¼ˆidæ–‡å­—åˆ—ã®ã¿ï¼‰
      lock = { id: raw, ts: Date.now() };
    }else{
      lock = JSON.parse(raw);
      // æœŸé™åˆ‡ã‚Œãªã‚‰ã€Œæœªä½¿ç”¨ã€æ‰±ã„ï¼ˆè¡¨ç¤ºãŒèµ¤ã®ã¾ã¾å›ºã¾ã‚‹ã®ã‚’é˜²ãï¼‰
      if(lock && lock.ts && (Date.now() - lock.ts) > (typeof LOCK_TTL_MS !== "undefined" ? LOCK_TTL_MS : 12000)){
        lock = null;
      }
    }
  }catch(e){
    lock = null;
  }

  pill.classList.remove("free","active","waiting");

  if(!lock || !lock.id){
    pill.textContent = "ğŸ™ éŸ³å£°: æœªä½¿ç”¨";
    pill.classList.add("free");
  }else if(lock.id === TAB_ID){
    pill.textContent = "ğŸ™ éŸ³å£°: ä½¿ç”¨ä¸­";
    pill.classList.add("active");
  }else{
    pill.textContent = "ğŸ™ éŸ³å£°: å¾…æ©Ÿä¸­";
    pill.classList.add("waiting");
  }
}
try{ updateTtsHud(); }catch(e){}
function setVh(){
  document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px');
}
setVh();
addEventListener('resize', setVh);
addEventListener('orientationchange', setVh);

  // (removed MutationObserver auto-sync: it could trigger heavy loops on some devices)


  // =========================
  // Auto start (smartphone/bfcache safe)
  // =========================
  function ensureStarted(){
    try{
      const p = document.getElementById("prompt");
      const ch = document.getElementById("choices");
      const promptTxt = (p?.textContent||"").trim();
      const hasChoices = !!(ch && ch.querySelector("button.choice"));
      if(!hasChoices || promptTxt === "---" || promptTxt === ""){
        if(typeof resetGame === "function") resetGame();
      }
    }catch(e){}
  }

  window.addEventListener("load", ()=>{ 
    setTimeout(ensureStarted, 0);
    setTimeout(ensureStarted, 500);
  });
  window.addEventListener("pageshow", ()=>{ 
    setTimeout(ensureStarted, 0);
    setTimeout(ensureStarted, 300);
  });
  document.addEventListener("visibilitychange", ()=>{ 
    if(!document.hidden) setTimeout(ensureStarted, 200);
  });
  document.addEventListener("pointerdown", ensureStarted, { once:true });

// ===== Help overlay + first-run hint =====
(function(){
  const HELP_DONE_KEY = "hamaru_help_done_v1";
  function openHelp(){
    const o = document.getElementById("helpOverlay");
    if(!o) return;
    o.style.display = "block";
  }
  function closeHelp(){
    const o = document.getElementById("helpOverlay");
    if(!o) return;
    o.style.display = "none";
    try{ localStorage.setItem(HELP_DONE_KEY, "1"); }catch(e){}
  }
  function bind(){
    document.getElementById("openHelp")?.addEventListener("click", openHelp);
    document.getElementById("closeHelp")?.addEventListener("click", closeHelp);
    // backdrop click
    document.getElementById("helpOverlay")?.addEventListener("click", (ev)=>{
      if(ev.target && ev.target.id === "helpOverlay") closeHelp();
    });
    // first run auto-open once
    try{
      const done = localStorage.getItem(HELP_DONE_KEY);
      if(!done) setTimeout(openHelp, 250);
    }catch(e){}
  }
  try{
    if(document.readyState === "loading") window.addEventListener("DOMContentLoaded", bind, {once:true});
    else bind();
  }catch(e){}
})();

// ===== PWA (optional) =====
(function(){
  try{
    if("serviceWorker" in navigator){
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }
  }catch(e){}
})();
</script>

<!-- è‡ªä½œå˜èªå¸³ï¼ˆCustom Deckï¼‰ -->
<div id="customDeckPanel" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.55); padding:18px; z-index:9999; overflow:auto;">
  <div class="card" style="max-width:980px;margin:0 auto;">
    <div class="inline" style="justify-content:space-between;align-items:center;">
      <h1 style="font-size:16px;margin:0;">è‡ªä½œå˜èªå¸³</h1>
      <select id="cd_langChoice" style="min-width:220px; max-width:420px;" onchange="try{saveTranslateLang(this.value);}catch(e){} try{updateForeignLabel();}catch(e){} try{syncTtsLangFromTranslateChoice(true);}catch(e){} try{cdSetExamplePlaceholder();}catch(e){}">
        <option value="en">è‹±èªï¼ˆenï¼‰</option>
        <option value="fr">ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆfrï¼‰</option>
        <option value="it">ã‚¤ã‚¿ãƒªã‚¢èªï¼ˆitï¼‰</option>
        <option value="de">ãƒ‰ã‚¤ãƒ„èªï¼ˆdeï¼‰</option>
        <option value="es">ã‚¹ãƒšã‚¤ãƒ³èªï¼ˆesï¼‰</option>
        <option value="ko">éŸ“å›½èªï¼ˆkoï¼‰</option>
        <option value="zh-TW">ä¸­å›½èªï¼ˆç¹ä½“, zh-TWï¼‰</option>
        <option value="zh-CN">ä¸­å›½èªï¼ˆç°¡ä½“, zh-CNï¼‰</option>
      </select>
      <button class="btn smallbtn" type="button" id="closeCustomDeck" style="margin-left:auto;">é–‰ã˜ã‚‹</button>
    </div>
<div class="spacer"></div>
    <div class="cd-layout">
      <div class="cd-left">
        <div class="cd-row">
                <div class="cd-field">
                  <div class="small" style="margin-bottom:4px;opacity:.9;">å¤–å›½èªï¼ˆé¸ã‚“ã è¨€èªï¼‰*</div>
                  <input id="cd_en" placeholder="example" style="width:100%;">
                </div>
                <div class="cd-field">
                  <div class="small" style="margin-bottom:4px;opacity:.9;">æ—¥æœ¬èªï¼ˆjaï¼‰*</div>
                  <input id="cd_ja" placeholder="ä¾‹ï¼šä¾‹æ–‡" style="width:100%;">
                </div>
              </div>

              <div class="cd-row" style="margin-top:10px;">
                <div class="cd-field small">
                  <div class="small" style="margin-bottom:4px;opacity:.9;">Lv</div>
                  <input id="cd_level" placeholder="2" style="width:100%;">
                </div>

                <div style="margin-top:8px;display:flex;gap:8px;align-items:center;">
                  <input type="checkbox" id="cd_autoLevel" style="width:18px;height:18px;">
                  <span class="small" style="opacity:.95;">è‡ªå‹•Lvï¼ˆOxford3000/5000 â†’ CEFR-J â†’ æ¨å®šï¼‰</span>
                </div>
                <div id="cd_lvHint" class="small" style="margin-top:6px;opacity:.85;"></div>


                <div class="cd-field mid">
                  <div class="small" style="margin-bottom:4px;opacity:.9;">langï¼ˆé¸æŠï¼‰</div>
                  <select id="cd_lang_select" style="width:100%;">
                    <option value="">ï¼ˆç©ºï¼‰</option>
                    <option value="en-US/ja-JP">en-US/ja-JP</option>
                    <option value="fr-FR/ja-JP">fr-FR/ja-JP</option>
                    <option value="it-IT/ja-JP">it-IT/ja-JP</option>
                    <option value="de-DE/ja-JP">de-DE/ja-JP</option>
                    <option value="es-ES/ja-JP">es-ES/ja-JP</option>
                    <option value="ko-KR/ja-JP">ko-KR/ja-JP</option>
                    <option value="zh-TW/ja-JP">zh-TW/ja-JP</option>
                    <option value="zh-CN/ja-JP">zh-CN/ja-JP</option>
                    <option value="ja-JP/en-US">ja-JP/en-US</option>
</select>
                  <div class="cd-note" style="margin-top:4px;">è‡ªåˆ†ã§å…¥ã‚ŒãŸã„å ´åˆã¯ä¸‹ã®æ¬„ã«ç›´æ¥å…¥åŠ›ã‚‚OK</div>
                  <input id="cd_lang" placeholder="ã‚«ã‚¹ã‚¿ãƒ ï¼ˆä¾‹: en-USï¼‰" style="width:100%; margin-top:6px;">
                </div>

                <div class="cd-field small">
                  <div class="small" style="margin-bottom:4px;opacity:.9;">tts</div>
                  <select id="cd_tts" style="width:100%;">
                    <option value="">ï¼ˆç©ºï¼‰</option>
                    <option value="true">1 / true</option>
                    <option value="false">0 / false</option>
                  </select>
                </div>
              </div>

              <div class="cd-row" style="margin-top:12px;">
                <label class="pill" style="display:flex;gap:8px;align-items:center;user-select:none;">
                  <input type="checkbox" id="cd_autoTranslate" style="width:18px;height:18px;">
                  <span class="small" style="opacity:.95;">è‡ªå‹•ç¿»è¨³ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼‰</span>
                </label>
                <span class="cd-note">â€»é€šä¿¡ãŒå¿…è¦ã€‚ç²¾åº¦ã¯ä¿è¨¼ã§ããªã„ã®ã§æœ€çµ‚ç¢ºèªã—ã¦ã­ã€‚<br><span style="opacity:.9;">â€»è‡ªå‹•ç¿»è¨³ã¯å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆMyMemoryï¼‰ã«å…¥åŠ›å†…å®¹ã‚’é€ä¿¡ã—ã¾ã™ã€‚å€‹äººæƒ…å ±ã¯å…¥ã‚Œãªã„ã§ã­ã€‚</span></span>
              </div>

              <div class="cd-actions" style="margin-top:12px;">
                <button class="btn smallbtn primary" type="button" id="cd_add">è¿½åŠ /æ›´æ–°</button>
                <button class="btn smallbtn half" type="button" id="cd_clear">å…¥åŠ›ã‚¯ãƒªã‚¢</button>
                <button class="btn smallbtn half" type="button" id="cd_export">CSVã‚’æ›¸ãå‡ºã—</button>
                <button class="btn smallbtn half" type="button" id="cd_recalc_lv">è‡ªå‹•Lvã‚’å†è¨ˆç®—</button>
                <button class="btn smallbtn half" type="button" id="cd_import">CSVã‹ã‚‰å–ã‚Šè¾¼ã¿</button>
                <button class="btn smallbtn half" type="button" id="cd_paste_open">è²¼ã‚Šä»˜ã‘ã§ä¸€æ‹¬è¿½åŠ </button>
                <button class="btn smallbtn" type="button" id="cd_backup_export">å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</button>
                <button class="btn smallbtn" type="button" id="cd_backup_import">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’èª­ã¿è¾¼ã‚€</button>
                <button class="btn smallbtn" type="button" id="cd_use">ã“ã®è‡ªä½œå˜èªå¸³ã§å­¦ç¿’</button>
                <button class="btn smallbtn danger" type="button" id="cd_reset">å…¨å‰Šé™¤</button>
              </div>

              <input type="hidden" id="cd_editIndex" value="-1">
              
              <div id="cd_pasteBox" class="cardlike" style="display:none; margin-top:10px;">
                <div class="small" style="opacity:.92; margin-bottom:6px;">
                  ğŸ“‹ ã“ã“ã«å˜èªãƒªã‚¹ãƒˆã‚’ã¾ã¨ã‚ã¦è²¼ã‚Šä»˜ã‘ã§ãã¾ã™ï¼ˆ1è¡Œ1èªï¼‰ã€‚<br>
                  ä¾‹ï¼š<span style="opacity:.9;">apple\tã‚Šã‚“ã”</span> / <span style="opacity:.9;">watch out æ°—ã‚’ã¤ã‘ã¦</span> / <span style="opacity:.9;">bonjour : ã“ã‚“ã«ã¡ã¯</span>
                </div>
                <textarea id="cd_paste_text" rows="7" style="width:100%; resize:vertical;" placeholder="ã“ã“ã«è²¼ã‚Šä»˜ã‘ï¼ˆä¾‹ï¼‰&#10;apple	ã‚Šã‚“ã”&#10;watch out æ°—ã‚’ã¤ã‘ã¦&#10;bonjour : ã“ã‚“ã«ã¡ã¯"></textarea>
                <div class="inline" style="gap:10px; flex-wrap:wrap; margin-top:8px;">
                  <label class="inline small" style="gap:8px;">
                    <input type="checkbox" id="cd_paste_autotrans">
                    <span>è¶³ã‚Šãªã„å´ã‚’è‡ªå‹•ç¿»è¨³ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼‰</span>
                  </label>
                  <label class="inline small" style="gap:8px;">
                    <input type="checkbox" id="cd_paste_start">
                    <span>è¿½åŠ å¾Œã™ãå­¦ç¿’é–‹å§‹</span>
                  </label>
                </div>
                <div class="inline" style="gap:10px; flex-wrap:wrap; margin-top:10px;">
                  <button class="btn smallbtn primary" type="button" id="cd_paste_apply">è²¼ã‚Šä»˜ã‘ã‚’å–ã‚Šè¾¼ã‚€</button>
                  <button class="btn smallbtn" type="button" id="cd_paste_clear">ã‚¯ãƒªã‚¢</button>
                  <span class="small" id="cd_paste_status" style="opacity:.85;"></span>
                </div>
              </div>

<div class="small" id="cd_status" style="margin-top:10px; opacity:.9;"></div>
              <input type="file" id="cd_import_file" accept=".csv,text/csv" style="display:none;">
              <input type="file" id="cd_backup_file" accept="application/json,.json" style="display:none;">
      </div>
      <div class="cd-right">
        <div class="cardlike">
          <div class="inline" style="gap:8px; flex-wrap:wrap; align-items:center; margin-bottom:10px;">
            <span class="pill" style="padding:6px 10px;">è¡¨ç¤º: <b id="cd_count">0</b></span>
            <input id="cd_search" placeholder="æ¤œç´¢ï¼ˆå¤–å›½èª / æ—¥æœ¬èªï¼‰" style="flex:1 1 220px; min-width:200px;">
            <select id="cd_filter_lang" class="smallbtn" style="padding:8px 10px; min-width:160px;">
              <option value="">lang: ã™ã¹ã¦</option>
            </select>
            <select id="cd_filter_level" class="smallbtn" style="padding:8px 10px; min-width:120px;">
              <option value="">Lv: ã™ã¹ã¦</option>
              <option value="1">Lv1</option>
              <option value="2">Lv2</option>
              <option value="3">Lv3</option>
              <option value="4">Lv4</option>
              <option value="5">Lv5</option>
            </select>
            <label class="pill" style="display:flex;gap:6px;align-items:center;padding:6px 10px; user-select:none;">
              <input type="checkbox" id="cd_only_dupes" style="width:16px;height:16px;">
              <span class="small" style="opacity:.9;">é‡è¤‡ã ã‘</span>
            </label>
            <button class="btn smallbtn" type="button" id="cd_clear_filters">çµã‚Šè¾¼ã¿è§£é™¤</button>
            <button class="btn smallbtn" type="button" id="cd_bulk_dedup">é‡è¤‡ã‚’ä¸€æ‹¬å‰Šé™¤</button>
          </div>
          <div style="overflow:auto;">
            <table style="width:100%; border-collapse:collapse;">
              <tbody id="cd_list"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ä½¿ã„æ–¹ / ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« -->
<div id="helpOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.65); padding:18px; z-index:10000; overflow:auto;">
  <div class="card" style="max-width:820px;margin:0 auto;">
    <div class="inline" style="justify-content:space-between;align-items:center;">
      <h1 style="font-size:16px;margin:0;">ä½¿ã„æ–¹ï¼ˆ1åˆ†ï¼‰</h1>
      <button class="btn smallbtn" type="button" id="closeHelp">é–‰ã˜ã‚‹</button>
    </div>
    <div class="spacer"></div>
    <ol style="line-height:1.7; margin:0; padding-left: 18px;">
      <li><b>CSVã‚’å…¥ã‚Œã‚‹</b>ï¼šç”»é¢ã®ã€ŒCSVã‚’é¸æŠã€ã‹ã‚‰èª­ã¿è¾¼ã‚€ï¼ˆè¤‡æ•°OKï¼‰ã€‚</li>
      <li><b>æ··ã–ã‚Šé˜²æ­¢</b>ï¼šCSVã« <span class="kbd">lang</span> åˆ—ãŒã‚ã‚‹å ´åˆã€ã€Œå‡ºé¡Œã™ã‚‹è¨€èªã€ã§çµã‚Œã¾ã™ã€‚</li>
      <li><b>è‡ªä½œå˜èªå¸³</b>ï¼šå·¦ã®ã€Œè‡ªä½œå˜èªå¸³ã‚’é–‹ãã€ã§è¿½åŠ ã§ãã¾ã™ã€‚CSVæ›¸ãå‡ºã—/å–ã‚Šè¾¼ã¿ã‚‚ã“ã“ã€‚</li>
      <li><b>å¾©ç¿’</b>ï¼šé–“é•ãˆãŸå•é¡Œã¯å¾©ç¿’ã‚»ãƒƒãƒˆã«å…¥ã‚Šã€ç·åˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ã§ã‚‚è¦‹ã‚‰ã‚Œã¾ã™ã€‚</li>
      <li><b>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</b>ï¼šç«¯æœ«ç§»è¡Œå‰ã«ã€Œå…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€ã‚’ä¿å­˜ã—ã¦ãŠãã¨å®‰å¿ƒã€‚</li>
    </ol>
    <div class="spacer"></div>
    <div class="small" style="opacity:.85;">
      â€»è‡ªå‹•ç¿»è¨³ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼‰ã¯å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¸é€ä¿¡ã•ã‚Œã¾ã™ã€‚å€‹äººæƒ…å ±ã¯å…¥ã‚Œãªã„ã§ã­ã€‚
    </div>
  </div>
</div>
</body>
</html>
